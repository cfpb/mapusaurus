"use strict";

$(document).ready(function() {
    var searchNameBox = $("#geoid"), year = $("#year").val(), msaField = $("#msa-field"), search = new Bloodhound({
        datumTokenizer: function(d) {
            return Bloodhound.tokenizers.whitespace(d.name);
        },
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        remote: {
            url: "/shapes/search/?auto=1&q=%QUERY&year=" + year,
            filter: function(resp) {
                return resp.geos;
            }
        }
    });
    search.initialize(), searchNameBox.typeahead({
        highlight: !0
    }, {
        displayKey: "name",
        source: search.ttAdapter()
    }).on("keyup", function() {
        searchNameBox.val() !== msaField.data("name") && (msaField.val(""), $("input[type=submit]").prop("disabled", !0));
    }).on("typeahead:selected", function(ev, suggestion) {
        msaField.val(suggestion.geoid).data("name", suggestion.name), $("#metro-search__submit").prop("disabled", !1).removeClass("btn__disabled");
    });
});
//# sourceMappingURL=metro-search.min.js.map