$(document).ready(function() {
    function getYear() {
        return parseInt($year.val());
    }
    function initTypeahead() {
        var search = new Bloodhound({
            initialize: !1,
            datumTokenizer: function(d) {
                return Bloodhound.tokenizers.whitespace(d.name);
            },
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            remote: {
                url: "/institutions/search/?auto=1&year=" + selectedYear + "&q=%QUERY",
                filter: function(resp) {
                    return resp.institutions;
                }
            }
        });
        search.initialize(), $("#institutions_search").find("#search_year").val(selectedYear), 
        $typeahead.typeahead({
            highlight: !0
        }, {
            displayKey: "formatted_name",
            source: search.ttAdapter()
        });
    }
    var $typeahead = $("#institutions_search input.search_institution"), $year = $("#search-year"), selectedYear = getYear();
    initTypeahead(), $year.on("change", function() {
        selectedYear = getYear(), $typeahead.typeahead("destroy"), $typeahead.val(""), initTypeahead();
    });
});
//# sourceMappingURL=search.min.js.map