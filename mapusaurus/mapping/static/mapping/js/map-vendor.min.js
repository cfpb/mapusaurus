function getHashParams() {
    for (var e, hashParams = {}, a = /\+/g, r = /([^!&;=<>]+)(!?[=><]?)([^&;]*)/g, d = function(s) {
        return decodeURIComponent(s.replace(a, " "));
    }, q = window.location.hash.substring(1).replace(/^!\/?/, ""); e = r.exec(q); ) hashParams[d(e[1])] = {
        values: d(e[3]),
        comparator: d(e[2])
    };
    return hashParams;
}

function updateUrlHash(params) {
    function buildHashParam(param, name) {
        hashParams.push(name + "=" + param.values);
    }
    var newHash, hashParams = [];
    _.forEach(params, buildHashParam), newHash = "&" + hashParams.join("&"), window.location.hash = newHash;
}

function addParam(paramName, values) {
    var params = getHashParams();
    params[paramName] = {}, params[paramName].values = values, params[paramName].comparator = "=", 
    updateUrlHash(params);
}

(function() {
    var root = this, previousUnderscore = root._, ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype, push = ArrayProto.push, slice = ArrayProto.slice, concat = ArrayProto.concat, toString = ObjProto.toString, hasOwnProperty = ObjProto.hasOwnProperty, nativeIsArray = Array.isArray, nativeKeys = Object.keys, nativeBind = FuncProto.bind, _ = function(obj) {
        return obj instanceof _ ? obj : this instanceof _ ? void (this._wrapped = obj) : new _(obj);
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = _), 
    exports._ = _) : root._ = _, _.VERSION = "1.7.0";
    var createCallback = function(func, context, argCount) {
        if (void 0 === context) return func;
        switch (null == argCount ? 3 : argCount) {
          case 1:
            return function(value) {
                return func.call(context, value);
            };

          case 2:
            return function(value, other) {
                return func.call(context, value, other);
            };

          case 3:
            return function(value, index, collection) {
                return func.call(context, value, index, collection);
            };

          case 4:
            return function(accumulator, value, index, collection) {
                return func.call(context, accumulator, value, index, collection);
            };
        }
        return function() {
            return func.apply(context, arguments);
        };
    };
    _.iteratee = function(value, context, argCount) {
        return null == value ? _.identity : _.isFunction(value) ? createCallback(value, context, argCount) : _.isObject(value) ? _.matches(value) : _.property(value);
    }, _.each = _.forEach = function(obj, iteratee, context) {
        if (null == obj) return obj;
        iteratee = createCallback(iteratee, context);
        var i, length = obj.length;
        if (length === +length) for (i = 0; length > i; i++) iteratee(obj[i], i, obj); else {
            var keys = _.keys(obj);
            for (i = 0, length = keys.length; length > i; i++) iteratee(obj[keys[i]], keys[i], obj);
        }
        return obj;
    }, _.map = _.collect = function(obj, iteratee, context) {
        if (null == obj) return [];
        iteratee = _.iteratee(iteratee, context);
        for (var currentKey, keys = obj.length !== +obj.length && _.keys(obj), length = (keys || obj).length, results = Array(length), index = 0; length > index; index++) currentKey = keys ? keys[index] : index, 
        results[index] = iteratee(obj[currentKey], currentKey, obj);
        return results;
    };
    var reduceError = "Reduce of empty array with no initial value";
    _.reduce = _.foldl = _.inject = function(obj, iteratee, memo, context) {
        null == obj && (obj = []), iteratee = createCallback(iteratee, context, 4);
        var currentKey, keys = obj.length !== +obj.length && _.keys(obj), length = (keys || obj).length, index = 0;
        if (arguments.length < 3) {
            if (!length) throw new TypeError(reduceError);
            memo = obj[keys ? keys[index++] : index++];
        }
        for (;length > index; index++) currentKey = keys ? keys[index] : index, memo = iteratee(memo, obj[currentKey], currentKey, obj);
        return memo;
    }, _.reduceRight = _.foldr = function(obj, iteratee, memo, context) {
        null == obj && (obj = []), iteratee = createCallback(iteratee, context, 4);
        var currentKey, keys = obj.length !== +obj.length && _.keys(obj), index = (keys || obj).length;
        if (arguments.length < 3) {
            if (!index) throw new TypeError(reduceError);
            memo = obj[keys ? keys[--index] : --index];
        }
        for (;index--; ) currentKey = keys ? keys[index] : index, memo = iteratee(memo, obj[currentKey], currentKey, obj);
        return memo;
    }, _.find = _.detect = function(obj, predicate, context) {
        var result;
        return predicate = _.iteratee(predicate, context), _.some(obj, function(value, index, list) {
            return predicate(value, index, list) ? (result = value, !0) : void 0;
        }), result;
    }, _.filter = _.select = function(obj, predicate, context) {
        var results = [];
        return null == obj ? results : (predicate = _.iteratee(predicate, context), _.each(obj, function(value, index, list) {
            predicate(value, index, list) && results.push(value);
        }), results);
    }, _.reject = function(obj, predicate, context) {
        return _.filter(obj, _.negate(_.iteratee(predicate)), context);
    }, _.every = _.all = function(obj, predicate, context) {
        if (null == obj) return !0;
        predicate = _.iteratee(predicate, context);
        var index, currentKey, keys = obj.length !== +obj.length && _.keys(obj), length = (keys || obj).length;
        for (index = 0; length > index; index++) if (currentKey = keys ? keys[index] : index, 
        !predicate(obj[currentKey], currentKey, obj)) return !1;
        return !0;
    }, _.some = _.any = function(obj, predicate, context) {
        if (null == obj) return !1;
        predicate = _.iteratee(predicate, context);
        var index, currentKey, keys = obj.length !== +obj.length && _.keys(obj), length = (keys || obj).length;
        for (index = 0; length > index; index++) if (currentKey = keys ? keys[index] : index, 
        predicate(obj[currentKey], currentKey, obj)) return !0;
        return !1;
    }, _.contains = _.include = function(obj, target) {
        return null == obj ? !1 : (obj.length !== +obj.length && (obj = _.values(obj)), 
        _.indexOf(obj, target) >= 0);
    }, _.invoke = function(obj, method) {
        var args = slice.call(arguments, 2), isFunc = _.isFunction(method);
        return _.map(obj, function(value) {
            return (isFunc ? method : value[method]).apply(value, args);
        });
    }, _.pluck = function(obj, key) {
        return _.map(obj, _.property(key));
    }, _.where = function(obj, attrs) {
        return _.filter(obj, _.matches(attrs));
    }, _.findWhere = function(obj, attrs) {
        return _.find(obj, _.matches(attrs));
    }, _.max = function(obj, iteratee, context) {
        var value, computed, result = -(1 / 0), lastComputed = -(1 / 0);
        if (null == iteratee && null != obj) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; length > i; i++) value = obj[i], value > result && (result = value);
        } else iteratee = _.iteratee(iteratee, context), _.each(obj, function(value, index, list) {
            computed = iteratee(value, index, list), (computed > lastComputed || computed === -(1 / 0) && result === -(1 / 0)) && (result = value, 
            lastComputed = computed);
        });
        return result;
    }, _.min = function(obj, iteratee, context) {
        var value, computed, result = 1 / 0, lastComputed = 1 / 0;
        if (null == iteratee && null != obj) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; length > i; i++) value = obj[i], result > value && (result = value);
        } else iteratee = _.iteratee(iteratee, context), _.each(obj, function(value, index, list) {
            computed = iteratee(value, index, list), (lastComputed > computed || computed === 1 / 0 && result === 1 / 0) && (result = value, 
            lastComputed = computed);
        });
        return result;
    }, _.shuffle = function(obj) {
        for (var rand, set = obj && obj.length === +obj.length ? obj : _.values(obj), length = set.length, shuffled = Array(length), index = 0; length > index; index++) rand = _.random(0, index), 
        rand !== index && (shuffled[index] = shuffled[rand]), shuffled[rand] = set[index];
        return shuffled;
    }, _.sample = function(obj, n, guard) {
        return null == n || guard ? (obj.length !== +obj.length && (obj = _.values(obj)), 
        obj[_.random(obj.length - 1)]) : _.shuffle(obj).slice(0, Math.max(0, n));
    }, _.sortBy = function(obj, iteratee, context) {
        return iteratee = _.iteratee(iteratee, context), _.pluck(_.map(obj, function(value, index, list) {
            return {
                value: value,
                index: index,
                criteria: iteratee(value, index, list)
            };
        }).sort(function(left, right) {
            var a = left.criteria, b = right.criteria;
            if (a !== b) {
                if (a > b || void 0 === a) return 1;
                if (b > a || void 0 === b) return -1;
            }
            return left.index - right.index;
        }), "value");
    };
    var group = function(behavior) {
        return function(obj, iteratee, context) {
            var result = {};
            return iteratee = _.iteratee(iteratee, context), _.each(obj, function(value, index) {
                var key = iteratee(value, index, obj);
                behavior(result, value, key);
            }), result;
        };
    };
    _.groupBy = group(function(result, value, key) {
        _.has(result, key) ? result[key].push(value) : result[key] = [ value ];
    }), _.indexBy = group(function(result, value, key) {
        result[key] = value;
    }), _.countBy = group(function(result, value, key) {
        _.has(result, key) ? result[key]++ : result[key] = 1;
    }), _.sortedIndex = function(array, obj, iteratee, context) {
        iteratee = _.iteratee(iteratee, context, 1);
        for (var value = iteratee(obj), low = 0, high = array.length; high > low; ) {
            var mid = low + high >>> 1;
            iteratee(array[mid]) < value ? low = mid + 1 : high = mid;
        }
        return low;
    }, _.toArray = function(obj) {
        return obj ? _.isArray(obj) ? slice.call(obj) : obj.length === +obj.length ? _.map(obj, _.identity) : _.values(obj) : [];
    }, _.size = function(obj) {
        return null == obj ? 0 : obj.length === +obj.length ? obj.length : _.keys(obj).length;
    }, _.partition = function(obj, predicate, context) {
        predicate = _.iteratee(predicate, context);
        var pass = [], fail = [];
        return _.each(obj, function(value, key, obj) {
            (predicate(value, key, obj) ? pass : fail).push(value);
        }), [ pass, fail ];
    }, _.first = _.head = _.take = function(array, n, guard) {
        return null != array ? null == n || guard ? array[0] : 0 > n ? [] : slice.call(array, 0, n) : void 0;
    }, _.initial = function(array, n, guard) {
        return slice.call(array, 0, Math.max(0, array.length - (null == n || guard ? 1 : n)));
    }, _.last = function(array, n, guard) {
        return null != array ? null == n || guard ? array[array.length - 1] : slice.call(array, Math.max(array.length - n, 0)) : void 0;
    }, _.rest = _.tail = _.drop = function(array, n, guard) {
        return slice.call(array, null == n || guard ? 1 : n);
    }, _.compact = function(array) {
        return _.filter(array, _.identity);
    };
    var flatten = function(input, shallow, strict, output) {
        if (shallow && _.every(input, _.isArray)) return concat.apply(output, input);
        for (var i = 0, length = input.length; length > i; i++) {
            var value = input[i];
            _.isArray(value) || _.isArguments(value) ? shallow ? push.apply(output, value) : flatten(value, shallow, strict, output) : strict || output.push(value);
        }
        return output;
    };
    _.flatten = function(array, shallow) {
        return flatten(array, shallow, !1, []);
    }, _.without = function(array) {
        return _.difference(array, slice.call(arguments, 1));
    }, _.uniq = _.unique = function(array, isSorted, iteratee, context) {
        if (null == array) return [];
        _.isBoolean(isSorted) || (context = iteratee, iteratee = isSorted, isSorted = !1), 
        null != iteratee && (iteratee = _.iteratee(iteratee, context));
        for (var result = [], seen = [], i = 0, length = array.length; length > i; i++) {
            var value = array[i];
            if (isSorted) i && seen === value || result.push(value), seen = value; else if (iteratee) {
                var computed = iteratee(value, i, array);
                _.indexOf(seen, computed) < 0 && (seen.push(computed), result.push(value));
            } else _.indexOf(result, value) < 0 && result.push(value);
        }
        return result;
    }, _.union = function() {
        return _.uniq(flatten(arguments, !0, !0, []));
    }, _.intersection = function(array) {
        if (null == array) return [];
        for (var result = [], argsLength = arguments.length, i = 0, length = array.length; length > i; i++) {
            var item = array[i];
            if (!_.contains(result, item)) {
                for (var j = 1; argsLength > j && _.contains(arguments[j], item); j++) ;
                j === argsLength && result.push(item);
            }
        }
        return result;
    }, _.difference = function(array) {
        var rest = flatten(slice.call(arguments, 1), !0, !0, []);
        return _.filter(array, function(value) {
            return !_.contains(rest, value);
        });
    }, _.zip = function(array) {
        if (null == array) return [];
        for (var length = _.max(arguments, "length").length, results = Array(length), i = 0; length > i; i++) results[i] = _.pluck(arguments, i);
        return results;
    }, _.object = function(list, values) {
        if (null == list) return {};
        for (var result = {}, i = 0, length = list.length; length > i; i++) values ? result[list[i]] = values[i] : result[list[i][0]] = list[i][1];
        return result;
    }, _.indexOf = function(array, item, isSorted) {
        if (null == array) return -1;
        var i = 0, length = array.length;
        if (isSorted) {
            if ("number" != typeof isSorted) return i = _.sortedIndex(array, item), array[i] === item ? i : -1;
            i = 0 > isSorted ? Math.max(0, length + isSorted) : isSorted;
        }
        for (;length > i; i++) if (array[i] === item) return i;
        return -1;
    }, _.lastIndexOf = function(array, item, from) {
        if (null == array) return -1;
        var idx = array.length;
        for ("number" == typeof from && (idx = 0 > from ? idx + from + 1 : Math.min(idx, from + 1)); --idx >= 0; ) if (array[idx] === item) return idx;
        return -1;
    }, _.range = function(start, stop, step) {
        arguments.length <= 1 && (stop = start || 0, start = 0), step = step || 1;
        for (var length = Math.max(Math.ceil((stop - start) / step), 0), range = Array(length), idx = 0; length > idx; idx++, 
        start += step) range[idx] = start;
        return range;
    };
    var Ctor = function() {};
    _.bind = function(func, context) {
        var args, bound;
        if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
        if (!_.isFunction(func)) throw new TypeError("Bind must be called on a function");
        return args = slice.call(arguments, 2), bound = function() {
            if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
            Ctor.prototype = func.prototype;
            var self = new Ctor();
            Ctor.prototype = null;
            var result = func.apply(self, args.concat(slice.call(arguments)));
            return _.isObject(result) ? result : self;
        };
    }, _.partial = function(func) {
        var boundArgs = slice.call(arguments, 1);
        return function() {
            for (var position = 0, args = boundArgs.slice(), i = 0, length = args.length; length > i; i++) args[i] === _ && (args[i] = arguments[position++]);
            for (;position < arguments.length; ) args.push(arguments[position++]);
            return func.apply(this, args);
        };
    }, _.bindAll = function(obj) {
        var i, key, length = arguments.length;
        if (1 >= length) throw new Error("bindAll must be passed function names");
        for (i = 1; length > i; i++) key = arguments[i], obj[key] = _.bind(obj[key], obj);
        return obj;
    }, _.memoize = function(func, hasher) {
        var memoize = function(key) {
            var cache = memoize.cache, address = hasher ? hasher.apply(this, arguments) : key;
            return _.has(cache, address) || (cache[address] = func.apply(this, arguments)), 
            cache[address];
        };
        return memoize.cache = {}, memoize;
    }, _.delay = function(func, wait) {
        var args = slice.call(arguments, 2);
        return setTimeout(function() {
            return func.apply(null, args);
        }, wait);
    }, _.defer = function(func) {
        return _.delay.apply(_, [ func, 1 ].concat(slice.call(arguments, 1)));
    }, _.throttle = function(func, wait, options) {
        var context, args, result, timeout = null, previous = 0;
        options || (options = {});
        var later = function() {
            previous = options.leading === !1 ? 0 : _.now(), timeout = null, result = func.apply(context, args), 
            timeout || (context = args = null);
        };
        return function() {
            var now = _.now();
            previous || options.leading !== !1 || (previous = now);
            var remaining = wait - (now - previous);
            return context = this, args = arguments, 0 >= remaining || remaining > wait ? (clearTimeout(timeout), 
            timeout = null, previous = now, result = func.apply(context, args), timeout || (context = args = null)) : timeout || options.trailing === !1 || (timeout = setTimeout(later, remaining)), 
            result;
        };
    }, _.debounce = function(func, wait, immediate) {
        var timeout, args, context, timestamp, result, later = function() {
            var last = _.now() - timestamp;
            wait > last && last > 0 ? timeout = setTimeout(later, wait - last) : (timeout = null, 
            immediate || (result = func.apply(context, args), timeout || (context = args = null)));
        };
        return function() {
            context = this, args = arguments, timestamp = _.now();
            var callNow = immediate && !timeout;
            return timeout || (timeout = setTimeout(later, wait)), callNow && (result = func.apply(context, args), 
            context = args = null), result;
        };
    }, _.wrap = function(func, wrapper) {
        return _.partial(wrapper, func);
    }, _.negate = function(predicate) {
        return function() {
            return !predicate.apply(this, arguments);
        };
    }, _.compose = function() {
        var args = arguments, start = args.length - 1;
        return function() {
            for (var i = start, result = args[start].apply(this, arguments); i--; ) result = args[i].call(this, result);
            return result;
        };
    }, _.after = function(times, func) {
        return function() {
            return --times < 1 ? func.apply(this, arguments) : void 0;
        };
    }, _.before = function(times, func) {
        var memo;
        return function() {
            return --times > 0 ? memo = func.apply(this, arguments) : func = null, memo;
        };
    }, _.once = _.partial(_.before, 2), _.keys = function(obj) {
        if (!_.isObject(obj)) return [];
        if (nativeKeys) return nativeKeys(obj);
        var keys = [];
        for (var key in obj) _.has(obj, key) && keys.push(key);
        return keys;
    }, _.values = function(obj) {
        for (var keys = _.keys(obj), length = keys.length, values = Array(length), i = 0; length > i; i++) values[i] = obj[keys[i]];
        return values;
    }, _.pairs = function(obj) {
        for (var keys = _.keys(obj), length = keys.length, pairs = Array(length), i = 0; length > i; i++) pairs[i] = [ keys[i], obj[keys[i]] ];
        return pairs;
    }, _.invert = function(obj) {
        for (var result = {}, keys = _.keys(obj), i = 0, length = keys.length; length > i; i++) result[obj[keys[i]]] = keys[i];
        return result;
    }, _.functions = _.methods = function(obj) {
        var names = [];
        for (var key in obj) _.isFunction(obj[key]) && names.push(key);
        return names.sort();
    }, _.extend = function(obj) {
        if (!_.isObject(obj)) return obj;
        for (var source, prop, i = 1, length = arguments.length; length > i; i++) {
            source = arguments[i];
            for (prop in source) hasOwnProperty.call(source, prop) && (obj[prop] = source[prop]);
        }
        return obj;
    }, _.pick = function(obj, iteratee, context) {
        var key, result = {};
        if (null == obj) return result;
        if (_.isFunction(iteratee)) {
            iteratee = createCallback(iteratee, context);
            for (key in obj) {
                var value = obj[key];
                iteratee(value, key, obj) && (result[key] = value);
            }
        } else {
            var keys = concat.apply([], slice.call(arguments, 1));
            obj = new Object(obj);
            for (var i = 0, length = keys.length; length > i; i++) key = keys[i], key in obj && (result[key] = obj[key]);
        }
        return result;
    }, _.omit = function(obj, iteratee, context) {
        if (_.isFunction(iteratee)) iteratee = _.negate(iteratee); else {
            var keys = _.map(concat.apply([], slice.call(arguments, 1)), String);
            iteratee = function(value, key) {
                return !_.contains(keys, key);
            };
        }
        return _.pick(obj, iteratee, context);
    }, _.defaults = function(obj) {
        if (!_.isObject(obj)) return obj;
        for (var i = 1, length = arguments.length; length > i; i++) {
            var source = arguments[i];
            for (var prop in source) void 0 === obj[prop] && (obj[prop] = source[prop]);
        }
        return obj;
    }, _.clone = function(obj) {
        return _.isObject(obj) ? _.isArray(obj) ? obj.slice() : _.extend({}, obj) : obj;
    }, _.tap = function(obj, interceptor) {
        return interceptor(obj), obj;
    };
    var eq = function(a, b, aStack, bStack) {
        if (a === b) return 0 !== a || 1 / a === 1 / b;
        if (null == a || null == b) return a === b;
        a instanceof _ && (a = a._wrapped), b instanceof _ && (b = b._wrapped);
        var className = toString.call(a);
        if (className !== toString.call(b)) return !1;
        switch (className) {
          case "[object RegExp]":
          case "[object String]":
            return "" + a == "" + b;

          case "[object Number]":
            return +a !== +a ? +b !== +b : 0 === +a ? 1 / +a === 1 / b : +a === +b;

          case "[object Date]":
          case "[object Boolean]":
            return +a === +b;
        }
        if ("object" != typeof a || "object" != typeof b) return !1;
        for (var length = aStack.length; length--; ) if (aStack[length] === a) return bStack[length] === b;
        var aCtor = a.constructor, bCtor = b.constructor;
        if (aCtor !== bCtor && "constructor" in a && "constructor" in b && !(_.isFunction(aCtor) && aCtor instanceof aCtor && _.isFunction(bCtor) && bCtor instanceof bCtor)) return !1;
        aStack.push(a), bStack.push(b);
        var size, result;
        if ("[object Array]" === className) {
            if (size = a.length, result = size === b.length) for (;size-- && (result = eq(a[size], b[size], aStack, bStack)); ) ;
        } else {
            var key, keys = _.keys(a);
            if (size = keys.length, result = _.keys(b).length === size) for (;size-- && (key = keys[size], 
            result = _.has(b, key) && eq(a[key], b[key], aStack, bStack)); ) ;
        }
        return aStack.pop(), bStack.pop(), result;
    };
    _.isEqual = function(a, b) {
        return eq(a, b, [], []);
    }, _.isEmpty = function(obj) {
        if (null == obj) return !0;
        if (_.isArray(obj) || _.isString(obj) || _.isArguments(obj)) return 0 === obj.length;
        for (var key in obj) if (_.has(obj, key)) return !1;
        return !0;
    }, _.isElement = function(obj) {
        return !(!obj || 1 !== obj.nodeType);
    }, _.isArray = nativeIsArray || function(obj) {
        return "[object Array]" === toString.call(obj);
    }, _.isObject = function(obj) {
        var type = typeof obj;
        return "function" === type || "object" === type && !!obj;
    }, _.each([ "Arguments", "Function", "String", "Number", "Date", "RegExp" ], function(name) {
        _["is" + name] = function(obj) {
            return toString.call(obj) === "[object " + name + "]";
        };
    }), _.isArguments(arguments) || (_.isArguments = function(obj) {
        return _.has(obj, "callee");
    }), "function" != typeof /./ && (_.isFunction = function(obj) {
        return "function" == typeof obj || !1;
    }), _.isFinite = function(obj) {
        return isFinite(obj) && !isNaN(parseFloat(obj));
    }, _.isNaN = function(obj) {
        return _.isNumber(obj) && obj !== +obj;
    }, _.isBoolean = function(obj) {
        return obj === !0 || obj === !1 || "[object Boolean]" === toString.call(obj);
    }, _.isNull = function(obj) {
        return null === obj;
    }, _.isUndefined = function(obj) {
        return void 0 === obj;
    }, _.has = function(obj, key) {
        return null != obj && hasOwnProperty.call(obj, key);
    }, _.noConflict = function() {
        return root._ = previousUnderscore, this;
    }, _.identity = function(value) {
        return value;
    }, _.constant = function(value) {
        return function() {
            return value;
        };
    }, _.noop = function() {}, _.property = function(key) {
        return function(obj) {
            return obj[key];
        };
    }, _.matches = function(attrs) {
        var pairs = _.pairs(attrs), length = pairs.length;
        return function(obj) {
            if (null == obj) return !length;
            obj = new Object(obj);
            for (var i = 0; length > i; i++) {
                var pair = pairs[i], key = pair[0];
                if (pair[1] !== obj[key] || !(key in obj)) return !1;
            }
            return !0;
        };
    }, _.times = function(n, iteratee, context) {
        var accum = Array(Math.max(0, n));
        iteratee = createCallback(iteratee, context, 1);
        for (var i = 0; n > i; i++) accum[i] = iteratee(i);
        return accum;
    }, _.random = function(min, max) {
        return null == max && (max = min, min = 0), min + Math.floor(Math.random() * (max - min + 1));
    }, _.now = Date.now || function() {
        return new Date().getTime();
    };
    var escapeMap = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    }, unescapeMap = _.invert(escapeMap), createEscaper = function(map) {
        var escaper = function(match) {
            return map[match];
        }, source = "(?:" + _.keys(map).join("|") + ")", testRegexp = RegExp(source), replaceRegexp = RegExp(source, "g");
        return function(string) {
            return string = null == string ? "" : "" + string, testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
        };
    };
    _.escape = createEscaper(escapeMap), _.unescape = createEscaper(unescapeMap), _.result = function(object, property) {
        if (null != object) {
            var value = object[property];
            return _.isFunction(value) ? object[property]() : value;
        }
    };
    var idCounter = 0;
    _.uniqueId = function(prefix) {
        var id = ++idCounter + "";
        return prefix ? prefix + id : id;
    }, _.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var noMatch = /(.)^/, escapes = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, escaper = /\\|'|\r|\n|\u2028|\u2029/g, escapeChar = function(match) {
        return "\\" + escapes[match];
    };
    _.template = function(text, settings, oldSettings) {
        !settings && oldSettings && (settings = oldSettings), settings = _.defaults({}, settings, _.templateSettings);
        var matcher = RegExp([ (settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source ].join("|") + "|$", "g"), index = 0, source = "__p+='";
        text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
            return source += text.slice(index, offset).replace(escaper, escapeChar), index = offset + match.length, 
            escape ? source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'" : interpolate ? source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'" : evaluate && (source += "';\n" + evaluate + "\n__p+='"), 
            match;
        }), source += "';\n", settings.variable || (source = "with(obj||{}){\n" + source + "}\n"), 
        source = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + source + "return __p;\n";
        try {
            var render = new Function(settings.variable || "obj", "_", source);
        } catch (e) {
            throw e.source = source, e;
        }
        var template = function(data) {
            return render.call(this, data, _);
        }, argument = settings.variable || "obj";
        return template.source = "function(" + argument + "){\n" + source + "}", template;
    }, _.chain = function(obj) {
        var instance = _(obj);
        return instance._chain = !0, instance;
    };
    var result = function(obj) {
        return this._chain ? _(obj).chain() : obj;
    };
    _.mixin = function(obj) {
        _.each(_.functions(obj), function(name) {
            var func = _[name] = obj[name];
            _.prototype[name] = function() {
                var args = [ this._wrapped ];
                return push.apply(args, arguments), result.call(this, func.apply(_, args));
            };
        });
    }, _.mixin(_), _.each([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
            var obj = this._wrapped;
            return method.apply(obj, arguments), "shift" !== name && "splice" !== name || 0 !== obj.length || delete obj[0], 
            result.call(this, obj);
        };
    }), _.each([ "concat", "join", "slice" ], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
            return result.call(this, method.apply(this._wrapped, arguments));
        };
    }), _.prototype.value = function() {
        return this._wrapped;
    }, "function" == typeof define && define.amd && define("underscore", [], function() {
        return _;
    });
}).call(this), function() {
    "use strict";
    function setup($) {
        function install(el, opts) {
            var css, themedCSS, full = el == window, msg = opts && void 0 !== opts.message ? opts.message : void 0;
            if (opts = $.extend({}, $.blockUI.defaults, opts || {}), !opts.ignoreIfBlocked || !$(el).data("blockUI.isBlocked")) {
                if (opts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {}), 
                css = $.extend({}, $.blockUI.defaults.css, opts.css || {}), opts.onOverlayClick && (opts.overlayCSS.cursor = "pointer"), 
                themedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {}), msg = void 0 === msg ? opts.message : msg, 
                full && pageBlock && remove(window, {
                    fadeOut: 0
                }), msg && "string" != typeof msg && (msg.parentNode || msg.jquery)) {
                    var node = msg.jquery ? msg[0] : msg, data = {};
                    $(el).data("blockUI.history", data), data.el = node, data.parent = node.parentNode, 
                    data.display = node.style.display, data.position = node.style.position, data.parent && data.parent.removeChild(node);
                }
                $(el).data("blockUI.onUnblock", opts.onUnblock);
                var lyr1, lyr2, lyr3, s, z = opts.baseZ;
                lyr1 = $(msie || opts.forceIframe ? '<iframe class="blockUI" style="z-index:' + z++ + ';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="' + opts.iframeSrc + '"></iframe>' : '<div class="blockUI" style="display:none"></div>'), 
                lyr2 = $(opts.theme ? '<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:' + z++ + ';display:none"></div>' : '<div class="blockUI blockOverlay" style="z-index:' + z++ + ';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'), 
                opts.theme && full ? (s = '<div class="blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:' + (z + 10) + ';display:none;position:fixed">', 
                opts.title && (s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">' + (opts.title || "&nbsp;") + "</div>"), 
                s += '<div class="ui-widget-content ui-dialog-content"></div>', s += "</div>") : opts.theme ? (s = '<div class="blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:' + (z + 10) + ';display:none;position:absolute">', 
                opts.title && (s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">' + (opts.title || "&nbsp;") + "</div>"), 
                s += '<div class="ui-widget-content ui-dialog-content"></div>', s += "</div>") : s = full ? '<div class="blockUI ' + opts.blockMsgClass + ' blockPage" style="z-index:' + (z + 10) + ';display:none;position:fixed"></div>' : '<div class="blockUI ' + opts.blockMsgClass + ' blockElement" style="z-index:' + (z + 10) + ';display:none;position:absolute"></div>', 
                lyr3 = $(s), msg && (opts.theme ? (lyr3.css(themedCSS), lyr3.addClass("ui-widget-content")) : lyr3.css(css)), 
                opts.theme || lyr2.css(opts.overlayCSS), lyr2.css("position", full ? "fixed" : "absolute"), 
                (msie || opts.forceIframe) && lyr1.css("opacity", 0);
                var layers = [ lyr1, lyr2, lyr3 ], $par = $(full ? "body" : el);
                $.each(layers, function() {
                    this.appendTo($par);
                }), opts.theme && opts.draggable && $.fn.draggable && lyr3.draggable({
                    handle: ".ui-dialog-titlebar",
                    cancel: "li"
                });
                var expr = setExpr && (!$.support.boxModel || $("object,embed", full ? null : el).length > 0);
                if (ie6 || expr) {
                    if (full && opts.allowBodyStretch && $.support.boxModel && $("html,body").css("height", "100%"), 
                    (ie6 || !$.support.boxModel) && !full) var t = sz(el, "borderTopWidth"), l = sz(el, "borderLeftWidth"), fixT = t ? "(0 - " + t + ")" : 0, fixL = l ? "(0 - " + l + ")" : 0;
                    $.each(layers, function(i, o) {
                        var s = o[0].style;
                        if (s.position = "absolute", 2 > i) full ? s.setExpression("height", "Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:" + opts.quirksmodeOffsetHack + ') + "px"') : s.setExpression("height", 'this.parentNode.offsetHeight + "px"'), 
                        full ? s.setExpression("width", 'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"') : s.setExpression("width", 'this.parentNode.offsetWidth + "px"'), 
                        fixL && s.setExpression("left", fixL), fixT && s.setExpression("top", fixT); else if (opts.centerY) full && s.setExpression("top", '(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'), 
                        s.marginTop = 0; else if (!opts.centerY && full) {
                            var top = opts.css && opts.css.top ? parseInt(opts.css.top, 10) : 0, expression = "((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + " + top + ') + "px"';
                            s.setExpression("top", expression);
                        }
                    });
                }
                if (msg && (opts.theme ? lyr3.find(".ui-widget-content").append(msg) : lyr3.append(msg), 
                (msg.jquery || msg.nodeType) && $(msg).show()), (msie || opts.forceIframe) && opts.showOverlay && lyr1.show(), 
                opts.fadeIn) {
                    var cb = opts.onBlock ? opts.onBlock : noOp, cb1 = opts.showOverlay && !msg ? cb : noOp, cb2 = msg ? cb : noOp;
                    opts.showOverlay && lyr2._fadeIn(opts.fadeIn, cb1), msg && lyr3._fadeIn(opts.fadeIn, cb2);
                } else opts.showOverlay && lyr2.show(), msg && lyr3.show(), opts.onBlock && opts.onBlock.bind(lyr3)();
                if (bind(1, el, opts), full ? (pageBlock = lyr3[0], pageBlockEls = $(opts.focusableElements, pageBlock), 
                opts.focusInput && setTimeout(focus, 20)) : center(lyr3[0], opts.centerX, opts.centerY), 
                opts.timeout) {
                    var to = setTimeout(function() {
                        full ? $.unblockUI(opts) : $(el).unblock(opts);
                    }, opts.timeout);
                    $(el).data("blockUI.timeout", to);
                }
            }
        }
        function remove(el, opts) {
            var count, full = el == window, $el = $(el), data = $el.data("blockUI.history"), to = $el.data("blockUI.timeout");
            to && (clearTimeout(to), $el.removeData("blockUI.timeout")), opts = $.extend({}, $.blockUI.defaults, opts || {}), 
            bind(0, el, opts), null === opts.onUnblock && (opts.onUnblock = $el.data("blockUI.onUnblock"), 
            $el.removeData("blockUI.onUnblock"));
            var els;
            els = full ? $("body").children().filter(".blockUI").add("body > .blockUI") : $el.find(">.blockUI"), 
            opts.cursorReset && (els.length > 1 && (els[1].style.cursor = opts.cursorReset), 
            els.length > 2 && (els[2].style.cursor = opts.cursorReset)), full && (pageBlock = pageBlockEls = null), 
            opts.fadeOut ? (count = els.length, els.stop().fadeOut(opts.fadeOut, function() {
                0 === --count && reset(els, data, opts, el);
            })) : reset(els, data, opts, el);
        }
        function reset(els, data, opts, el) {
            var $el = $(el);
            if (!$el.data("blockUI.isBlocked")) {
                els.each(function(i, o) {
                    this.parentNode && this.parentNode.removeChild(this);
                }), data && data.el && (data.el.style.display = data.display, data.el.style.position = data.position, 
                data.el.style.cursor = "default", data.parent && data.parent.appendChild(data.el), 
                $el.removeData("blockUI.history")), $el.data("blockUI.static") && $el.css("position", "static"), 
                "function" == typeof opts.onUnblock && opts.onUnblock(el, opts);
                var body = $(document.body), w = body.width(), cssW = body[0].style.width;
                body.width(w - 1).width(w), body[0].style.width = cssW;
            }
        }
        function bind(b, el, opts) {
            var full = el == window, $el = $(el);
            if ((b || (!full || pageBlock) && (full || $el.data("blockUI.isBlocked"))) && ($el.data("blockUI.isBlocked", b), 
            full && opts.bindEvents && (!b || opts.showOverlay))) {
                var events = "mousedown mouseup keydown keypress keyup touchstart touchend touchmove";
                b ? $(document).bind(events, opts, handler) : $(document).unbind(events, handler);
            }
        }
        function handler(e) {
            if ("keydown" === e.type && e.keyCode && 9 == e.keyCode && pageBlock && e.data.constrainTabKey) {
                var els = pageBlockEls, fwd = !e.shiftKey && e.target === els[els.length - 1], back = e.shiftKey && e.target === els[0];
                if (fwd || back) return setTimeout(function() {
                    focus(back);
                }, 10), !1;
            }
            var opts = e.data, target = $(e.target);
            return target.hasClass("blockOverlay") && opts.onOverlayClick && opts.onOverlayClick(e), 
            target.parents("div." + opts.blockMsgClass).length > 0 ? !0 : 0 === target.parents().children().filter("div.blockUI").length;
        }
        function focus(back) {
            if (pageBlockEls) {
                var e = pageBlockEls[back === !0 ? pageBlockEls.length - 1 : 0];
                e && e.focus();
            }
        }
        function center(el, x, y) {
            var p = el.parentNode, s = el.style, l = (p.offsetWidth - el.offsetWidth) / 2 - sz(p, "borderLeftWidth"), t = (p.offsetHeight - el.offsetHeight) / 2 - sz(p, "borderTopWidth");
            x && (s.left = l > 0 ? l + "px" : "0"), y && (s.top = t > 0 ? t + "px" : "0");
        }
        function sz(el, p) {
            return parseInt($.css(el, p), 10) || 0;
        }
        $.fn._fadeIn = $.fn.fadeIn;
        var noOp = $.noop || function() {}, msie = /MSIE/.test(navigator.userAgent), ie6 = /MSIE 6.0/.test(navigator.userAgent) && !/MSIE 8.0/.test(navigator.userAgent), setExpr = (document.documentMode || 0, 
        $.isFunction(document.createElement("div").style.setExpression));
        $.blockUI = function(opts) {
            install(window, opts);
        }, $.unblockUI = function(opts) {
            remove(window, opts);
        }, $.growlUI = function(title, message, timeout, onClose) {
            var $m = $('<div class="growlUI"></div>');
            title && $m.append("<h1>" + title + "</h1>"), message && $m.append("<h2>" + message + "</h2>"), 
            void 0 === timeout && (timeout = 3e3);
            var callBlock = function(opts) {
                opts = opts || {}, $.blockUI({
                    message: $m,
                    fadeIn: "undefined" != typeof opts.fadeIn ? opts.fadeIn : 700,
                    fadeOut: "undefined" != typeof opts.fadeOut ? opts.fadeOut : 1e3,
                    timeout: "undefined" != typeof opts.timeout ? opts.timeout : timeout,
                    centerY: !1,
                    showOverlay: !1,
                    onUnblock: onClose,
                    css: $.blockUI.defaults.growlCSS
                });
            };
            callBlock();
            $m.css("opacity");
            $m.mouseover(function() {
                callBlock({
                    fadeIn: 0,
                    timeout: 3e4
                });
                var displayBlock = $(".blockMsg");
                displayBlock.stop(), displayBlock.fadeTo(300, 1);
            }).mouseout(function() {
                $(".blockMsg").fadeOut(1e3);
            });
        }, $.fn.block = function(opts) {
            if (this[0] === window) return $.blockUI(opts), this;
            var fullOpts = $.extend({}, $.blockUI.defaults, opts || {});
            return this.each(function() {
                var $el = $(this);
                fullOpts.ignoreIfBlocked && $el.data("blockUI.isBlocked") || $el.unblock({
                    fadeOut: 0
                });
            }), this.each(function() {
                "static" == $.css(this, "position") && (this.style.position = "relative", $(this).data("blockUI.static", !0)), 
                this.style.zoom = 1, install(this, opts);
            });
        }, $.fn.unblock = function(opts) {
            return this[0] === window ? ($.unblockUI(opts), this) : this.each(function() {
                remove(this, opts);
            });
        }, $.blockUI.version = 2.7, $.blockUI.defaults = {
            message: "<h1>Please wait...</h1>",
            title: null,
            draggable: !0,
            theme: !1,
            css: {
                padding: 0,
                margin: 0,
                width: "30%",
                top: "40%",
                left: "35%",
                textAlign: "center",
                color: "#000",
                border: "3px solid #aaa",
                backgroundColor: "#fff",
                cursor: "wait"
            },
            themedCSS: {
                width: "30%",
                top: "40%",
                left: "35%"
            },
            overlayCSS: {
                backgroundColor: "#000",
                opacity: .6,
                cursor: "wait"
            },
            cursorReset: "default",
            growlCSS: {
                width: "350px",
                top: "10px",
                left: "",
                right: "10px",
                border: "none",
                padding: "5px",
                opacity: .6,
                cursor: "default",
                color: "#fff",
                backgroundColor: "#000",
                "-webkit-border-radius": "10px",
                "-moz-border-radius": "10px",
                "border-radius": "10px"
            },
            iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank",
            forceIframe: !1,
            baseZ: 1e3,
            centerX: !0,
            centerY: !0,
            allowBodyStretch: !0,
            bindEvents: !0,
            constrainTabKey: !0,
            fadeIn: 200,
            fadeOut: 400,
            timeout: 0,
            showOverlay: !0,
            focusInput: !0,
            focusableElements: ":input:enabled:visible",
            onBlock: null,
            onUnblock: null,
            onOverlayClick: null,
            quirksmodeOffsetHack: 4,
            blockMsgClass: "blockMsg",
            ignoreIfBlocked: !1
        };
        var pageBlock = null, pageBlockEls = [];
    }
    "function" == typeof define && define.amd && define.amd.jQuery ? define([ "jquery" ], setup) : setup(jQuery);
}(), !function(t, e, i) {
    function n() {
        var e = t.L;
        o.noConflict = function() {
            return t.L = e, this;
        }, t.L = o;
    }
    var o = {
        version: "0.8-dev"
    };
    "object" == typeof module && "object" == typeof module.exports ? module.exports = o : "function" == typeof define && define.amd && define(o), 
    "undefined" != typeof t && n(), o.Util = {
        extend: function(t) {
            var e, i, n, o;
            for (i = 1, n = arguments.length; n > i; i++) {
                o = arguments[i];
                for (e in o) t[e] = o[e];
            }
            return t;
        },
        create: Object.create || function() {
            function t() {}
            return function(e) {
                return t.prototype = e, new t();
            };
        }(),
        bind: function(t, e) {
            var i = Array.prototype.slice;
            if (t.bind) return t.bind.apply(t, i.call(arguments, 1));
            var n = i.call(arguments, 2);
            return function() {
                return t.apply(e, n.length ? n.concat(i.call(arguments)) : arguments);
            };
        },
        stamp: function(t) {
            return t._leaflet_id = t._leaflet_id || ++o.Util.lastId, t._leaflet_id;
        },
        lastId: 0,
        throttle: function(t, e, i) {
            var n, o, s, r;
            return r = function() {
                n = !1, o && (s.apply(i, o), o = !1);
            }, s = function() {
                n ? o = arguments : (t.apply(i, arguments), setTimeout(r, e), n = !0);
            };
        },
        wrapNum: function(t, e, i) {
            var n = e[1], o = e[0], s = n - o;
            return t === n && i ? t : ((t - o) % s + s) % s + o;
        },
        falseFn: function() {
            return !1;
        },
        formatNum: function(t, e) {
            var i = Math.pow(10, e || 5);
            return Math.round(t * i) / i;
        },
        trim: function(t) {
            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "");
        },
        splitWords: function(t) {
            return o.Util.trim(t).split(/\s+/);
        },
        setOptions: function(t, e) {
            t.hasOwnProperty("options") || (t.options = t.options ? o.Util.create(t.options) : {});
            for (var i in e) t.options[i] = e[i];
            return t.options;
        },
        getParamString: function(t, e, i) {
            var n = [];
            for (var o in t) n.push(encodeURIComponent(i ? o.toUpperCase() : o) + "=" + encodeURIComponent(t[o]));
            return (e && -1 !== e.indexOf("?") ? "&" : "?") + n.join("&");
        },
        template: function(t, e) {
            return t.replace(o.Util.templateRe, function(t, n) {
                var o = e[n];
                if (o === i) throw new Error("No value provided for variable " + t);
                return "function" == typeof o && (o = o(e)), o;
            });
        },
        templateRe: /\{ *([\w_]+) *\}/g,
        isArray: Array.isArray || function(t) {
            return "[object Array]" === Object.prototype.toString.call(t);
        },
        emptyImageUrl: "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
    }, function() {
        function e(e) {
            return t["webkit" + e] || t["moz" + e] || t["ms" + e];
        }
        function i(e) {
            var i = +new Date(), o = Math.max(0, 16 - (i - n));
            return n = i + o, t.setTimeout(e, o);
        }
        var n = 0, s = t.requestAnimationFrame || e("RequestAnimationFrame") || i, r = t.cancelAnimationFrame || e("CancelAnimationFrame") || e("CancelRequestAnimationFrame") || function(e) {
            t.clearTimeout(e);
        };
        o.Util.requestAnimFrame = function(e, n, r) {
            return r && s === i ? void e.call(n) : s.call(t, o.bind(e, n));
        }, o.Util.cancelAnimFrame = function(e) {
            e && r.call(t, e);
        };
    }(), o.extend = o.Util.extend, o.bind = o.Util.bind, o.stamp = o.Util.stamp, o.setOptions = o.Util.setOptions, 
    o.Class = function() {}, o.Class.extend = function(t) {
        var e = function() {
            this.initialize && this.initialize.apply(this, arguments), this.callInitHooks();
        }, i = e.__super__ = this.prototype, n = o.Util.create(i);
        n.constructor = e, e.prototype = n;
        for (var s in this) this.hasOwnProperty(s) && "prototype" !== s && (e[s] = this[s]);
        return t.statics && (o.extend(e, t.statics), delete t.statics), t.includes && (o.Util.extend.apply(null, [ n ].concat(t.includes)), 
        delete t.includes), n.options && (t.options = o.Util.extend(o.Util.create(n.options), t.options)), 
        o.extend(n, t), n._initHooks = [], n.callInitHooks = function() {
            if (!this._initHooksCalled) {
                i.callInitHooks && i.callInitHooks.call(this), this._initHooksCalled = !0;
                for (var t = 0, e = n._initHooks.length; e > t; t++) n._initHooks[t].call(this);
            }
        }, e;
    }, o.Class.include = function(t) {
        o.extend(this.prototype, t);
    }, o.Class.mergeOptions = function(t) {
        o.extend(this.prototype.options, t);
    }, o.Class.addInitHook = function(t) {
        var e = Array.prototype.slice.call(arguments, 1), i = "function" == typeof t ? t : function() {
            this[t].apply(this, e);
        };
        this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(i);
    }, o.Evented = o.Class.extend({
        on: function(t, e, i) {
            if ("object" == typeof t) for (var n in t) this._on(n, t[n], e); else {
                t = o.Util.splitWords(t);
                for (var s = 0, r = t.length; r > s; s++) this._on(t[s], e, i);
            }
            return this;
        },
        off: function(t, e, i) {
            if (t) if ("object" == typeof t) for (var n in t) this._off(n, t[n], e); else {
                t = o.Util.splitWords(t);
                for (var s = 0, r = t.length; r > s; s++) this._off(t[s], e, i);
            } else delete this._events;
            return this;
        },
        _on: function(t, e, i) {
            var n = this._events = this._events || {}, s = i && i !== this && o.stamp(i);
            if (s) {
                var r = t + "_idx", a = t + "_len", h = n[r] = n[r] || {}, l = o.stamp(e) + "_" + s;
                h[l] || (h[l] = {
                    fn: e,
                    ctx: i
                }, n[a] = (n[a] || 0) + 1);
            } else n[t] = n[t] || [], n[t].push({
                fn: e
            });
        },
        _off: function(t, e, i) {
            var n = this._events, s = t + "_idx", r = t + "_len";
            if (n) {
                if (!e) return delete n[t], delete n[s], void delete n[r];
                var a, h, l, u, c, d = i && i !== this && o.stamp(i);
                if (d) c = o.stamp(e) + "_" + d, a = n[s], a && a[c] && (u = a[c], delete a[c], 
                n[r]--); else if (a = n[t]) for (h = 0, l = a.length; l > h; h++) if (a[h].fn === e) {
                    u = a[h], a.splice(h, 1);
                    break;
                }
                u && (u.fn = o.Util.falseFn);
            }
        },
        fire: function(t, e, i) {
            if (!this.listens(t, i)) return this;
            var n = o.Util.extend({}, e, {
                type: t,
                target: this
            }), s = this._events;
            if (s) {
                var r, a, h, l, u = s[t + "_idx"];
                if (s[t]) for (h = s[t].slice(), r = 0, a = h.length; a > r; r++) h[r].fn.call(this, n);
                for (l in u) u[l].fn.call(u[l].ctx, n);
            }
            return i && this._propagateEvent(n), this;
        },
        listens: function(t, e) {
            var i = this._events;
            if (i && (i[t] || i[t + "_len"])) return !0;
            if (e) for (var n in this._eventParents) if (this._eventParents[n].listens(t, e)) return !0;
            return !1;
        },
        once: function(t, e, i) {
            if ("object" == typeof t) {
                for (var n in t) this.once(n, t[n], e);
                return this;
            }
            var s = o.bind(function() {
                this.off(t, e, i).off(t, s, i);
            }, this);
            return this.on(t, e, i).on(t, s, i);
        },
        addEventParent: function(t) {
            return this._eventParents = this._eventParents || {}, this._eventParents[o.stamp(t)] = t, 
            this;
        },
        removeEventParent: function(t) {
            return this._eventParents && delete this._eventParents[o.stamp(t)], this;
        },
        _propagateEvent: function(t) {
            for (var e in this._eventParents) this._eventParents[e].fire(t.type, o.extend({
                layer: t.target
            }, t), !0);
        }
    });
    var s = o.Evented.prototype;
    s.addEventListener = s.on, s.removeEventListener = s.clearAllEventListeners = s.off, 
    s.addOneTimeEventListener = s.once, s.fireEvent = s.fire, s.hasEventListeners = s.listens, 
    o.Mixin = {
        Events: s
    }, function() {
        var i = navigator.userAgent.toLowerCase(), n = e.documentElement, s = "ActiveXObject" in t, r = -1 !== i.indexOf("webkit"), a = -1 !== i.indexOf("phantom"), h = -1 !== i.search("android [23]"), l = -1 !== i.indexOf("chrome"), u = "undefined" != typeof orientation, c = navigator.msPointerEnabled && navigator.msMaxTouchPoints && !t.PointerEvent, d = t.PointerEvent && navigator.pointerEnabled && navigator.maxTouchPoints || c, _ = s && "transition" in n.style, m = "WebKitCSSMatrix" in t && "m11" in new t.WebKitCSSMatrix() && !h, p = "MozPerspective" in n.style, f = "OTransition" in n.style, g = !t.L_NO_TOUCH && !a && (d || "ontouchstart" in t || t.DocumentTouch && e instanceof t.DocumentTouch);
        o.Browser = {
            ie: s,
            ielt9: s && !e.addEventListener,
            webkit: r,
            gecko: -1 !== i.indexOf("gecko") && !r && !t.opera && !s,
            android: -1 !== i.indexOf("android"),
            android23: h,
            chrome: l,
            safari: !l && -1 !== i.indexOf("safari"),
            ie3d: _,
            webkit3d: m,
            gecko3d: p,
            opera3d: f,
            any3d: !t.L_DISABLE_3D && (_ || m || p || f) && !a,
            mobile: u,
            mobileWebkit: u && r,
            mobileWebkit3d: u && m,
            mobileOpera: u && t.opera,
            touch: !!g,
            msPointer: !!c,
            pointer: !!d,
            retina: (t.devicePixelRatio || t.screen.deviceXDPI / t.screen.logicalXDPI) > 1
        };
    }(), o.Point = function(t, e, i) {
        this.x = i ? Math.round(t) : t, this.y = i ? Math.round(e) : e;
    }, o.Point.prototype = {
        clone: function() {
            return new o.Point(this.x, this.y);
        },
        add: function(t) {
            return this.clone()._add(o.point(t));
        },
        _add: function(t) {
            return this.x += t.x, this.y += t.y, this;
        },
        subtract: function(t) {
            return this.clone()._subtract(o.point(t));
        },
        _subtract: function(t) {
            return this.x -= t.x, this.y -= t.y, this;
        },
        divideBy: function(t) {
            return this.clone()._divideBy(t);
        },
        _divideBy: function(t) {
            return this.x /= t, this.y /= t, this;
        },
        multiplyBy: function(t) {
            return this.clone()._multiplyBy(t);
        },
        _multiplyBy: function(t) {
            return this.x *= t, this.y *= t, this;
        },
        round: function() {
            return this.clone()._round();
        },
        _round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
        },
        floor: function() {
            return this.clone()._floor();
        },
        _floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
        },
        ceil: function() {
            return this.clone()._ceil();
        },
        _ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
        },
        distanceTo: function(t) {
            t = o.point(t);
            var e = t.x - this.x, i = t.y - this.y;
            return Math.sqrt(e * e + i * i);
        },
        equals: function(t) {
            return t = o.point(t), t.x === this.x && t.y === this.y;
        },
        contains: function(t) {
            return t = o.point(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y);
        },
        toString: function() {
            return "Point(" + o.Util.formatNum(this.x) + ", " + o.Util.formatNum(this.y) + ")";
        }
    }, o.point = function(t, e, n) {
        return t instanceof o.Point ? t : o.Util.isArray(t) ? new o.Point(t[0], t[1]) : t === i || null === t ? t : new o.Point(t, e, n);
    }, o.Bounds = function(t, e) {
        if (t) for (var i = e ? [ t, e ] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n]);
    }, o.Bounds.prototype = {
        extend: function(t) {
            return t = o.point(t), this.min || this.max ? (this.min.x = Math.min(t.x, this.min.x), 
            this.max.x = Math.max(t.x, this.max.x), this.min.y = Math.min(t.y, this.min.y), 
            this.max.y = Math.max(t.y, this.max.y)) : (this.min = t.clone(), this.max = t.clone()), 
            this;
        },
        getCenter: function(t) {
            return new o.Point((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t);
        },
        getBottomLeft: function() {
            return new o.Point(this.min.x, this.max.y);
        },
        getTopRight: function() {
            return new o.Point(this.max.x, this.min.y);
        },
        getSize: function() {
            return this.max.subtract(this.min);
        },
        contains: function(t) {
            var e, i;
            return t = "number" == typeof t[0] || t instanceof o.Point ? o.point(t) : o.bounds(t), 
            t instanceof o.Bounds ? (e = t.min, i = t.max) : e = i = t, e.x >= this.min.x && i.x <= this.max.x && e.y >= this.min.y && i.y <= this.max.y;
        },
        intersects: function(t) {
            t = o.bounds(t);
            var e = this.min, i = this.max, n = t.min, s = t.max, r = s.x >= e.x && n.x <= i.x, a = s.y >= e.y && n.y <= i.y;
            return r && a;
        },
        isValid: function() {
            return !(!this.min || !this.max);
        }
    }, o.bounds = function(t, e) {
        return !t || t instanceof o.Bounds ? t : new o.Bounds(t, e);
    }, o.Transformation = function(t, e, i, n) {
        this._a = t, this._b = e, this._c = i, this._d = n;
    }, o.Transformation.prototype = {
        transform: function(t, e) {
            return this._transform(t.clone(), e);
        },
        _transform: function(t, e) {
            return e = e || 1, t.x = e * (this._a * t.x + this._b), t.y = e * (this._c * t.y + this._d), 
            t;
        },
        untransform: function(t, e) {
            return e = e || 1, new o.Point((t.x / e - this._b) / this._a, (t.y / e - this._d) / this._c);
        }
    }, o.DomUtil = {
        get: function(t) {
            return "string" == typeof t ? e.getElementById(t) : t;
        },
        getStyle: function(t, i) {
            var n = t.style[i] || t.currentStyle && t.currentStyle[i];
            if ((!n || "auto" === n) && e.defaultView) {
                var o = e.defaultView.getComputedStyle(t, null);
                n = o ? o[i] : null;
            }
            return "auto" === n ? null : n;
        },
        create: function(t, i, n) {
            var o = e.createElement(t);
            return o.className = i, n && n.appendChild(o), o;
        },
        remove: function(t) {
            var e = t.parentNode;
            e && e.removeChild(t);
        },
        empty: function(t) {
            for (;t.firstChild; ) t.removeChild(t.firstChild);
        },
        toFront: function(t) {
            t.parentNode.appendChild(t);
        },
        toBack: function(t) {
            var e = t.parentNode;
            e.insertBefore(t, e.firstChild);
        },
        hasClass: function(t, e) {
            if (t.classList !== i) return t.classList.contains(e);
            var n = o.DomUtil.getClass(t);
            return n.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(n);
        },
        addClass: function(t, e) {
            if (t.classList !== i) for (var n = o.Util.splitWords(e), s = 0, r = n.length; r > s; s++) t.classList.add(n[s]); else if (!o.DomUtil.hasClass(t, e)) {
                var a = o.DomUtil.getClass(t);
                o.DomUtil.setClass(t, (a ? a + " " : "") + e);
            }
        },
        removeClass: function(t, e) {
            t.classList !== i ? t.classList.remove(e) : o.DomUtil.setClass(t, o.Util.trim((" " + o.DomUtil.getClass(t) + " ").replace(" " + e + " ", " ")));
        },
        setClass: function(t, e) {
            t.className.baseVal === i ? t.className = e : t.className.baseVal = e;
        },
        getClass: function(t) {
            return t.className.baseVal === i ? t.className : t.className.baseVal;
        },
        setOpacity: function(t, e) {
            "opacity" in t.style ? t.style.opacity = e : "filter" in t.style && o.DomUtil._setOpacityIE(t, e);
        },
        _setOpacityIE: function(t, e) {
            var i = !1, n = "DXImageTransform.Microsoft.Alpha";
            try {
                i = t.filters.item(n);
            } catch (o) {
                if (1 === e) return;
            }
            e = Math.round(100 * e), i ? (i.Enabled = 100 !== e, i.Opacity = e) : t.style.filter += " progid:" + n + "(opacity=" + e + ")";
        },
        testProp: function(t) {
            for (var i = e.documentElement.style, n = 0; n < t.length; n++) if (t[n] in i) return t[n];
            return !1;
        },
        setTransform: function(t, e, i) {
            var n = e || new o.Point(0, 0);
            t.style[o.DomUtil.TRANSFORM] = "translate3d(" + n.x + "px," + n.y + "px,0)" + (i ? " scale(" + i + ")" : "");
        },
        setPosition: function(t, e, i) {
            t._leaflet_pos = e, o.Browser.any3d && !i ? o.DomUtil.setTransform(t, e) : (t.style.left = e.x + "px", 
            t.style.top = e.y + "px");
        },
        getPosition: function(t) {
            return t._leaflet_pos;
        }
    }, function() {
        o.DomUtil.TRANSFORM = o.DomUtil.testProp([ "transform", "WebkitTransform", "OTransform", "MozTransform", "msTransform" ]);
        var i = o.DomUtil.TRANSITION = o.DomUtil.testProp([ "webkitTransition", "transition", "OTransition", "MozTransition", "msTransition" ]);
        if (o.DomUtil.TRANSITION_END = "webkitTransition" === i || "OTransition" === i ? i + "End" : "transitionend", 
        "onselectstart" in e) o.DomUtil.disableTextSelection = function() {
            o.DomEvent.on(t, "selectstart", o.DomEvent.preventDefault);
        }, o.DomUtil.enableTextSelection = function() {
            o.DomEvent.off(t, "selectstart", o.DomEvent.preventDefault);
        }; else {
            var n = o.DomUtil.testProp([ "userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect" ]);
            o.DomUtil.disableTextSelection = function() {
                if (n) {
                    var t = e.documentElement.style;
                    this._userSelect = t[n], t[n] = "none";
                }
            }, o.DomUtil.enableTextSelection = function() {
                n && (e.documentElement.style[n] = this._userSelect, delete this._userSelect);
            };
        }
        o.DomUtil.disableImageDrag = function() {
            o.DomEvent.on(t, "dragstart", o.DomEvent.preventDefault);
        }, o.DomUtil.enableImageDrag = function() {
            o.DomEvent.off(t, "dragstart", o.DomEvent.preventDefault);
        }, o.DomUtil.preventOutline = function(e) {
            o.DomUtil.restoreOutline(), this._outlineElement = e, this._outlineStyle = e.style.outline, 
            e.style.outline = "none", o.DomEvent.on(t, "keydown", o.DomUtil.restoreOutline, this);
        }, o.DomUtil.restoreOutline = function() {
            this._outlineElement && (this._outlineElement.style.outline = this._outlineStyle, 
            delete this._outlineElement, delete this._outlineStyle, o.DomEvent.off(t, "keydown", o.DomUtil.restoreOutline, this));
        };
    }(), o.LatLng = function(t, e, n) {
        if (isNaN(t) || isNaN(e)) throw new Error("Invalid LatLng object: (" + t + ", " + e + ")");
        this.lat = +t, this.lng = +e, n !== i && (this.alt = +n);
    }, o.LatLng.prototype = {
        equals: function(t, e) {
            if (!t) return !1;
            t = o.latLng(t);
            var n = Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng));
            return (e === i ? 1e-9 : e) >= n;
        },
        toString: function(t) {
            return "LatLng(" + o.Util.formatNum(this.lat, t) + ", " + o.Util.formatNum(this.lng, t) + ")";
        },
        distanceTo: function(t) {
            return o.CRS.Earth.distance(this, o.latLng(t));
        },
        wrap: function() {
            return o.CRS.Earth.wrapLatLng(this);
        },
        toBounds: function(t) {
            var e = 180 * t / 40075017, i = e / Math.cos(Math.PI / 180 * this.lat);
            return o.latLngBounds([ this.lat - e, this.lng - i ], [ this.lat + e, this.lng + i ]);
        }
    }, o.latLng = function(t, e, n) {
        return t instanceof o.LatLng ? t : o.Util.isArray(t) && "object" != typeof t[0] ? 3 === t.length ? new o.LatLng(t[0], t[1], t[2]) : 2 === t.length ? new o.LatLng(t[0], t[1]) : null : t === i || null === t ? t : "object" == typeof t && "lat" in t ? new o.LatLng(t.lat, "lng" in t ? t.lng : t.lon, t.alt) : e === i ? null : new o.LatLng(t, e, n);
    }, o.LatLngBounds = function(t, e) {
        if (t) for (var i = e ? [ t, e ] : t, n = 0, o = i.length; o > n; n++) this.extend(i[n]);
    }, o.LatLngBounds.prototype = {
        extend: function(t) {
            var e, i, n = this._southWest, s = this._northEast;
            if (t instanceof o.LatLng) e = t, i = t; else {
                if (!(t instanceof o.LatLngBounds)) return t ? this.extend(o.latLng(t) || o.latLngBounds(t)) : this;
                if (e = t._southWest, i = t._northEast, !e || !i) return this;
            }
            return n || s ? (n.lat = Math.min(e.lat, n.lat), n.lng = Math.min(e.lng, n.lng), 
            s.lat = Math.max(i.lat, s.lat), s.lng = Math.max(i.lng, s.lng)) : (this._southWest = new o.LatLng(e.lat, e.lng), 
            this._northEast = new o.LatLng(i.lat, i.lng)), this;
        },
        pad: function(t) {
            var e = this._southWest, i = this._northEast, n = Math.abs(e.lat - i.lat) * t, s = Math.abs(e.lng - i.lng) * t;
            return new o.LatLngBounds(new o.LatLng(e.lat - n, e.lng - s), new o.LatLng(i.lat + n, i.lng + s));
        },
        getCenter: function() {
            return new o.LatLng((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2);
        },
        getSouthWest: function() {
            return this._southWest;
        },
        getNorthEast: function() {
            return this._northEast;
        },
        getNorthWest: function() {
            return new o.LatLng(this.getNorth(), this.getWest());
        },
        getSouthEast: function() {
            return new o.LatLng(this.getSouth(), this.getEast());
        },
        getWest: function() {
            return this._southWest.lng;
        },
        getSouth: function() {
            return this._southWest.lat;
        },
        getEast: function() {
            return this._northEast.lng;
        },
        getNorth: function() {
            return this._northEast.lat;
        },
        contains: function(t) {
            t = "number" == typeof t[0] || t instanceof o.LatLng ? o.latLng(t) : o.latLngBounds(t);
            var e, i, n = this._southWest, s = this._northEast;
            return t instanceof o.LatLngBounds ? (e = t.getSouthWest(), i = t.getNorthEast()) : e = i = t, 
            e.lat >= n.lat && i.lat <= s.lat && e.lng >= n.lng && i.lng <= s.lng;
        },
        intersects: function(t) {
            t = o.latLngBounds(t);
            var e = this._southWest, i = this._northEast, n = t.getSouthWest(), s = t.getNorthEast(), r = s.lat >= e.lat && n.lat <= i.lat, a = s.lng >= e.lng && n.lng <= i.lng;
            return r && a;
        },
        toBBoxString: function() {
            return [ this.getWest(), this.getSouth(), this.getEast(), this.getNorth() ].join(",");
        },
        equals: function(t) {
            return t ? (t = o.latLngBounds(t), this._southWest.equals(t.getSouthWest()) && this._northEast.equals(t.getNorthEast())) : !1;
        },
        isValid: function() {
            return !(!this._southWest || !this._northEast);
        }
    }, o.latLngBounds = function(t, e) {
        return !t || t instanceof o.LatLngBounds ? t : new o.LatLngBounds(t, e);
    }, o.Projection = {}, o.Projection.LonLat = {
        project: function(t) {
            return new o.Point(t.lng, t.lat);
        },
        unproject: function(t) {
            return new o.LatLng(t.y, t.x);
        },
        bounds: o.bounds([ -180, -90 ], [ 180, 90 ])
    }, o.Projection.SphericalMercator = {
        R: 6378137,
        project: function(t) {
            var e = Math.PI / 180, i = 1 - 1e-15, n = Math.max(Math.min(Math.sin(t.lat * e), i), -i);
            return new o.Point(this.R * t.lng * e, this.R * Math.log((1 + n) / (1 - n)) / 2);
        },
        unproject: function(t) {
            var e = 180 / Math.PI;
            return new o.LatLng((2 * Math.atan(Math.exp(t.y / this.R)) - Math.PI / 2) * e, t.x * e / this.R);
        },
        bounds: function() {
            var t = 6378137 * Math.PI;
            return o.bounds([ -t, -t ], [ t, t ]);
        }()
    }, o.CRS = {
        latLngToPoint: function(t, e) {
            var i = this.projection.project(t), n = this.scale(e);
            return this.transformation._transform(i, n);
        },
        pointToLatLng: function(t, e) {
            var i = this.scale(e), n = this.transformation.untransform(t, i);
            return this.projection.unproject(n);
        },
        project: function(t) {
            return this.projection.project(t);
        },
        unproject: function(t) {
            return this.projection.unproject(t);
        },
        scale: function(t) {
            return 256 * Math.pow(2, t);
        },
        getProjectedBounds: function(t) {
            if (this.infinite) return null;
            var e = this.projection.bounds, i = this.scale(t), n = this.transformation.transform(e.min, i), s = this.transformation.transform(e.max, i);
            return o.bounds(n, s);
        },
        wrapLatLng: function(t) {
            var e = this.wrapLng ? o.Util.wrapNum(t.lng, this.wrapLng, !0) : t.lng, i = this.wrapLat ? o.Util.wrapNum(t.lat, this.wrapLat, !0) : t.lat;
            return o.latLng(i, e);
        }
    }, o.CRS.Simple = o.extend({}, o.CRS, {
        projection: o.Projection.LonLat,
        transformation: new o.Transformation(1, 0, -1, 0),
        scale: function(t) {
            return Math.pow(2, t);
        },
        distance: function(t, e) {
            var i = e.lng - t.lng, n = e.lat - t.lat;
            return Math.sqrt(i * i + n * n);
        },
        infinite: !0
    }), o.CRS.Earth = o.extend({}, o.CRS, {
        wrapLng: [ -180, 180 ],
        R: 6378137,
        distance: function(t, e) {
            var i = Math.PI / 180, n = t.lat * i, o = e.lat * i, s = Math.sin(n) * Math.sin(o) + Math.cos(n) * Math.cos(o) * Math.cos((e.lng - t.lng) * i);
            return this.R * Math.acos(Math.min(s, 1));
        }
    }), o.CRS.EPSG3857 = o.extend({}, o.CRS.Earth, {
        code: "EPSG:3857",
        projection: o.Projection.SphericalMercator,
        transformation: function() {
            var t = .5 / (Math.PI * o.Projection.SphericalMercator.R);
            return new o.Transformation(t, .5, -t, .5);
        }()
    }), o.CRS.EPSG900913 = o.extend({}, o.CRS.EPSG3857, {
        code: "EPSG:900913"
    }), o.CRS.EPSG4326 = o.extend({}, o.CRS.Earth, {
        code: "EPSG:4326",
        projection: o.Projection.LonLat,
        transformation: new o.Transformation(1 / 180, 1, -1 / 180, .5)
    }), o.Map = o.Evented.extend({
        options: {
            crs: o.CRS.EPSG3857,
            fadeAnimation: !0,
            trackResize: !0,
            markerZoomAnimation: !0
        },
        initialize: function(t, e) {
            e = o.setOptions(this, e), this._initContainer(t), this._initLayout(), this._onResize = o.bind(this._onResize, this), 
            this._initEvents(), e.maxBounds && this.setMaxBounds(e.maxBounds), e.zoom !== i && (this._zoom = this._limitZoom(e.zoom)), 
            e.center && e.zoom !== i && this.setView(o.latLng(e.center), e.zoom, {
                reset: !0
            }), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._sizeChanged = !0, 
            this.callInitHooks(), this._addLayers(this.options.layers);
        },
        setView: function(t, e) {
            return e = e === i ? this.getZoom() : e, this._resetView(o.latLng(t), this._limitZoom(e)), 
            this;
        },
        setZoom: function(t, e) {
            return this._loaded ? this.setView(this.getCenter(), t, {
                zoom: e
            }) : (this._zoom = this._limitZoom(t), this);
        },
        zoomIn: function(t, e) {
            return this.setZoom(this._zoom + (t || 1), e);
        },
        zoomOut: function(t, e) {
            return this.setZoom(this._zoom - (t || 1), e);
        },
        setZoomAround: function(t, e, i) {
            var n = this.getZoomScale(e), s = this.getSize().divideBy(2), r = t instanceof o.Point ? t : this.latLngToContainerPoint(t), a = r.subtract(s).multiplyBy(1 - 1 / n), h = this.containerPointToLatLng(s.add(a));
            return this.setView(h, e, {
                zoom: i
            });
        },
        fitBounds: function(t, e) {
            e = e || {}, t = t.getBounds ? t.getBounds() : o.latLngBounds(t);
            var i = o.point(e.paddingTopLeft || e.padding || [ 0, 0 ]), n = o.point(e.paddingBottomRight || e.padding || [ 0, 0 ]), s = this.getBoundsZoom(t, !1, i.add(n));
            s = e.maxZoom ? Math.min(e.maxZoom, s) : s;
            var r = n.subtract(i).divideBy(2), a = this.project(t.getSouthWest(), s), h = this.project(t.getNorthEast(), s), l = this.unproject(a.add(h).divideBy(2).add(r), s);
            return this.setView(l, s, e);
        },
        fitWorld: function(t) {
            return this.fitBounds([ [ -90, -180 ], [ 90, 180 ] ], t);
        },
        panTo: function(t, e) {
            return this.setView(t, this._zoom, {
                pan: e
            });
        },
        panBy: function(t) {
            return this.fire("movestart"), this._rawPanBy(o.point(t)), this.fire("move"), this.fire("moveend");
        },
        setMaxBounds: function(t) {
            return t = o.latLngBounds(t), this.options.maxBounds = t, t ? (this._loaded && this._panInsideMaxBounds(), 
            this.on("moveend", this._panInsideMaxBounds)) : this.off("moveend", this._panInsideMaxBounds);
        },
        panInsideBounds: function(t, e) {
            var i = this.getCenter(), n = this._limitCenter(i, this._zoom, t);
            return i.equals(n) ? this : this.panTo(n, e);
        },
        invalidateSize: function(t) {
            if (!this._loaded) return this;
            t = o.extend({
                animate: !1,
                pan: !0
            }, t === !0 ? {
                animate: !0
            } : t);
            var e = this.getSize();
            this._sizeChanged = !0, this._initialCenter = null;
            var i = this.getSize(), n = e.divideBy(2).round(), s = i.divideBy(2).round(), r = n.subtract(s);
            return r.x || r.y ? (t.animate && t.pan ? this.panBy(r) : (t.pan && this._rawPanBy(r), 
            this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(o.bind(this.fire, this, "moveend"), 200)) : this.fire("moveend")), 
            this.fire("resize", {
                oldSize: e,
                newSize: i
            })) : this;
        },
        stop: function() {
            return o.Util.cancelAnimFrame(this._flyToFrame), this._panAnim && this._panAnim.stop(), 
            this;
        },
        addHandler: function(t, e) {
            if (!e) return this;
            var i = this[t] = new e(this);
            return this._handlers.push(i), this.options[t] && i.enable(), this;
        },
        remove: function() {
            this._initEvents(!0);
            try {
                delete this._container._leaflet;
            } catch (t) {
                this._container._leaflet = i;
            }
            return o.DomUtil.remove(this._mapPane), this._clearControlPos && this._clearControlPos(), 
            this._clearHandlers(), this._loaded && this.fire("unload"), this;
        },
        createPane: function(t, e) {
            var i = "leaflet-pane" + (t ? " leaflet-" + t.replace("Pane", "") + "-pane" : ""), n = o.DomUtil.create("div", i, e || this._mapPane);
            return t && (this._panes[t] = n), n;
        },
        getCenter: function() {
            return this._checkIfLoaded(), this._initialCenter && !this._moved() ? this._initialCenter : this.layerPointToLatLng(this._getCenterLayerPoint());
        },
        getZoom: function() {
            return this._zoom;
        },
        getBounds: function() {
            var t = this.getPixelBounds(), e = this.unproject(t.getBottomLeft()), i = this.unproject(t.getTopRight());
            return new o.LatLngBounds(e, i);
        },
        getMinZoom: function() {
            return this.options.minZoom === i ? this._layersMinZoom || 0 : this.options.minZoom;
        },
        getMaxZoom: function() {
            return this.options.maxZoom === i ? this._layersMaxZoom === i ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom;
        },
        getBoundsZoom: function(t, e, i) {
            t = o.latLngBounds(t);
            var n, s = this.getMinZoom() - (e ? 1 : 0), r = this.getMaxZoom(), a = this.getSize(), h = t.getNorthWest(), l = t.getSouthEast(), u = !0;
            i = o.point(i || [ 0, 0 ]);
            do s++, n = this.project(l, s).subtract(this.project(h, s)).add(i).floor(), u = e ? n.x < a.x || n.y < a.y : a.contains(n); while (u && r >= s);
            return u && e ? null : e ? s : s - 1;
        },
        getSize: function() {
            return (!this._size || this._sizeChanged) && (this._size = new o.Point(this._container.clientWidth, this._container.clientHeight), 
            this._sizeChanged = !1), this._size.clone();
        },
        getPixelBounds: function(t, e) {
            var i = this._getTopLeftPoint(t, e);
            return new o.Bounds(i, i.add(this.getSize()));
        },
        getPixelOrigin: function() {
            return this._checkIfLoaded(), this._pixelOrigin;
        },
        getPixelWorldBounds: function(t) {
            return this.options.crs.getProjectedBounds(t === i ? this.getZoom() : t);
        },
        getPane: function(t) {
            return "string" == typeof t ? this._panes[t] : t;
        },
        getPanes: function() {
            return this._panes;
        },
        getContainer: function() {
            return this._container;
        },
        getZoomScale: function(t, e) {
            var n = this.options.crs;
            return e = e === i ? this._zoom : e, n.scale(t) / n.scale(e);
        },
        getScaleZoom: function(t, e) {
            return e = e === i ? this._zoom : e, e + Math.log(t) / Math.LN2;
        },
        project: function(t, e) {
            return e = e === i ? this._zoom : e, this.options.crs.latLngToPoint(o.latLng(t), e);
        },
        unproject: function(t, e) {
            return e = e === i ? this._zoom : e, this.options.crs.pointToLatLng(o.point(t), e);
        },
        layerPointToLatLng: function(t) {
            var e = o.point(t).add(this.getPixelOrigin());
            return this.unproject(e);
        },
        latLngToLayerPoint: function(t) {
            var e = this.project(o.latLng(t))._round();
            return e._subtract(this.getPixelOrigin());
        },
        wrapLatLng: function(t) {
            return this.options.crs.wrapLatLng(o.latLng(t));
        },
        distance: function(t, e) {
            return this.options.crs.distance(o.latLng(t), o.latLng(e));
        },
        containerPointToLayerPoint: function(t) {
            return o.point(t).subtract(this._getMapPanePos());
        },
        layerPointToContainerPoint: function(t) {
            return o.point(t).add(this._getMapPanePos());
        },
        containerPointToLatLng: function(t) {
            var e = this.containerPointToLayerPoint(o.point(t));
            return this.layerPointToLatLng(e);
        },
        latLngToContainerPoint: function(t) {
            return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)));
        },
        mouseEventToContainerPoint: function(t) {
            return o.DomEvent.getMousePosition(t, this._container);
        },
        mouseEventToLayerPoint: function(t) {
            return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t));
        },
        mouseEventToLatLng: function(t) {
            return this.layerPointToLatLng(this.mouseEventToLayerPoint(t));
        },
        _initContainer: function(t) {
            var e = this._container = o.DomUtil.get(t);
            if (!e) throw new Error("Map container not found.");
            if (e._leaflet) throw new Error("Map container is already initialized.");
            e._leaflet = !0;
        },
        _initLayout: function() {
            var t = this._container;
            this._fadeAnimated = this.options.fadeAnimation && o.Browser.any3d, o.DomUtil.addClass(t, "leaflet-container" + (o.Browser.touch ? " leaflet-touch" : "") + (o.Browser.retina ? " leaflet-retina" : "") + (o.Browser.ielt9 ? " leaflet-oldie" : "") + (o.Browser.safari ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : ""));
            var e = o.DomUtil.getStyle(t, "position");
            "absolute" !== e && "relative" !== e && "fixed" !== e && (t.style.position = "relative"), 
            this._initPanes(), this._initControlPos && this._initControlPos();
        },
        _initPanes: function() {
            var t = this._panes = {};
            this._paneRenderers = {}, this._mapPane = this.createPane("mapPane", this._container), 
            this.createPane("tilePane"), this.createPane("shadowPane"), this.createPane("overlayPane"), 
            this.createPane("markerPane"), this.createPane("popupPane"), this.options.markerZoomAnimation || (o.DomUtil.addClass(t.markerPane, "leaflet-zoom-hide"), 
            o.DomUtil.addClass(t.shadowPane, "leaflet-zoom-hide"));
        },
        _resetView: function(t, e, i, n) {
            var s = this._zoom !== e;
            n || (this.fire("movestart"), s && this.fire("zoomstart")), this._zoom = e, this._initialCenter = t, 
            i || o.DomUtil.setPosition(this._mapPane, new o.Point(0, 0)), this._pixelOrigin = this._getNewPixelOrigin(t);
            var r = !this._loaded;
            this._loaded = !0, this.fire("viewreset", {
                hard: !i
            }), r && this.fire("load"), this.fire("move"), (s || n) && this.fire("zoomend"), 
            this.fire("moveend", {
                hard: !i
            });
        },
        _rawPanBy: function(t) {
            o.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(t));
        },
        _getZoomSpan: function() {
            return this.getMaxZoom() - this.getMinZoom();
        },
        _panInsideMaxBounds: function() {
            this.panInsideBounds(this.options.maxBounds);
        },
        _checkIfLoaded: function() {
            if (!this._loaded) throw new Error("Set map center and zoom first.");
        },
        _initEvents: function(e) {
            if (o.DomEvent) {
                this._targets = {};
                var i = e ? "off" : "on";
                o.DomEvent[i](this._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress", this._handleDOMEvent, this), 
                this.options.trackResize && o.DomEvent[i](t, "resize", this._onResize, this);
            }
        },
        _onResize: function() {
            o.Util.cancelAnimFrame(this._resizeRequest), this._resizeRequest = o.Util.requestAnimFrame(function() {
                this.invalidateSize({
                    debounceMoveend: !0
                });
            }, this, !1, this._container);
        },
        _handleDOMEvent: function(t) {
            if (this._loaded && !o.DomEvent._skipped(t)) {
                var e = this._targets[o.stamp(t.target || t.srcElement)], i = "keypress" === t.type && 13 === t.keyCode ? "click" : t.type;
                (e || "mouseover" !== i && "mouseout" !== i || o.DomEvent._checkMouse(this._container, t)) && ("mousedown" === i && o.DomUtil.preventOutline(t.target || t.srcElement), 
                this._fireDOMEvent(e || this, t, i));
            }
        },
        _fireDOMEvent: function(t, e, i) {
            if ((t.listens(i, !0) || "click" === i && t.listens("preclick", !0)) && ("contextmenu" === i && o.DomEvent.preventDefault(e), 
            "click" !== e.type || e._simulated || !this._draggableMoved(t))) {
                var n = {
                    originalEvent: e
                };
                "keypress" !== e.type && (n.containerPoint = t instanceof o.Marker ? this.latLngToContainerPoint(t.getLatLng()) : this.mouseEventToContainerPoint(e), 
                n.layerPoint = this.containerPointToLayerPoint(n.containerPoint), n.latlng = this.layerPointToLatLng(n.layerPoint)), 
                "click" === i && t.fire("preclick", n, !0), t.fire(i, n, !0);
            }
        },
        _draggableMoved: function(t) {
            return t = t.options.draggable ? t : this, t.dragging && t.dragging.moved() || this.boxZoom && this.boxZoom.moved();
        },
        _clearHandlers: function() {
            for (var t = 0, e = this._handlers.length; e > t; t++) this._handlers[t].disable();
        },
        whenReady: function(t, e) {
            return this._loaded ? t.call(e || this, {
                target: this
            }) : this.on("load", t, e), this;
        },
        _getMapPanePos: function() {
            return o.DomUtil.getPosition(this._mapPane) || new o.Point(0, 0);
        },
        _moved: function() {
            var t = this._getMapPanePos();
            return t && !t.equals([ 0, 0 ]);
        },
        _getTopLeftPoint: function(t, e) {
            var n = t && e !== i ? this._getNewPixelOrigin(t, e) : this.getPixelOrigin();
            return n.subtract(this._getMapPanePos());
        },
        _getNewPixelOrigin: function(t, e) {
            var i = this.getSize()._divideBy(2);
            return this.project(t, e)._subtract(i)._add(this._getMapPanePos())._round();
        },
        _latLngToNewLayerPoint: function(t, e, i) {
            var n = this._getNewPixelOrigin(i, e);
            return this.project(t, e)._subtract(n);
        },
        _getCenterLayerPoint: function() {
            return this.containerPointToLayerPoint(this.getSize()._divideBy(2));
        },
        _getCenterOffset: function(t) {
            return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint());
        },
        _limitCenter: function(t, e, i) {
            if (!i) return t;
            var n = this.project(t, e), s = this.getSize().divideBy(2), r = new o.Bounds(n.subtract(s), n.add(s)), a = this._getBoundsOffset(r, i, e);
            return this.unproject(n.add(a), e);
        },
        _limitOffset: function(t, e) {
            if (!e) return t;
            var i = this.getPixelBounds(), n = new o.Bounds(i.min.add(t), i.max.add(t));
            return t.add(this._getBoundsOffset(n, e));
        },
        _getBoundsOffset: function(t, e, i) {
            var n = this.project(e.getNorthWest(), i).subtract(t.min), s = this.project(e.getSouthEast(), i).subtract(t.max), r = this._rebound(n.x, -s.x), a = this._rebound(n.y, -s.y);
            return new o.Point(r, a);
        },
        _rebound: function(t, e) {
            return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e));
        },
        _limitZoom: function(t) {
            var e = this.getMinZoom(), i = this.getMaxZoom();
            return Math.max(e, Math.min(i, t));
        }
    }), o.map = function(t, e) {
        return new o.Map(t, e);
    }, o.Layer = o.Evented.extend({
        options: {
            pane: "overlayPane"
        },
        addTo: function(t) {
            return t.addLayer(this), this;
        },
        remove: function() {
            return this.removeFrom(this._map || this._mapToAdd);
        },
        removeFrom: function(t) {
            return t && t.removeLayer(this), this;
        },
        getPane: function(t) {
            return this._map.getPane(t ? this.options[t] || t : this.options.pane);
        },
        addInteractiveTarget: function(t) {
            return this._map._targets[o.stamp(t)] = this, this;
        },
        removeInteractiveTarget: function(t) {
            return delete this._map._targets[o.stamp(t)], this;
        },
        _layerAdd: function(t) {
            var e = t.target;
            e.hasLayer(this) && (this._map = e, this._zoomAnimated = e._zoomAnimated, this.onAdd(e), 
            this.getAttribution && this._map.attributionControl && this._map.attributionControl.addAttribution(this.getAttribution()), 
            this.getEvents && e.on(this.getEvents(), this), this.fire("add"), e.fire("layeradd", {
                layer: this
            }));
        }
    }), o.Map.include({
        addLayer: function(t) {
            var e = o.stamp(t);
            return this._layers[e] ? t : (this._layers[e] = t, t._mapToAdd = this, t.beforeAdd && t.beforeAdd(this), 
            this.whenReady(t._layerAdd, t), this);
        },
        removeLayer: function(t) {
            var e = o.stamp(t);
            return this._layers[e] ? (this._loaded && t.onRemove(this), t.getAttribution && this.attributionControl && this.attributionControl.removeAttribution(t.getAttribution()), 
            t.getEvents && this.off(t.getEvents(), t), delete this._layers[e], this._loaded && (this.fire("layerremove", {
                layer: t
            }), t.fire("remove")), t._map = t._mapToAdd = null, this) : this;
        },
        hasLayer: function(t) {
            return !!t && o.stamp(t) in this._layers;
        },
        eachLayer: function(t, e) {
            for (var i in this._layers) t.call(e, this._layers[i]);
            return this;
        },
        _addLayers: function(t) {
            t = t ? o.Util.isArray(t) ? t : [ t ] : [];
            for (var e = 0, i = t.length; i > e; e++) this.addLayer(t[e]);
        },
        _addZoomLimit: function(t) {
            (isNaN(t.options.maxZoom) || !isNaN(t.options.minZoom)) && (this._zoomBoundLayers[o.stamp(t)] = t, 
            this._updateZoomLevels());
        },
        _removeZoomLimit: function(t) {
            var e = o.stamp(t);
            this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e], this._updateZoomLevels());
        },
        _updateZoomLevels: function() {
            var t = 1 / 0, e = -(1 / 0), n = this._getZoomSpan();
            for (var o in this._zoomBoundLayers) {
                var s = this._zoomBoundLayers[o].options;
                t = s.minZoom === i ? t : Math.min(t, s.minZoom), e = s.maxZoom === i ? e : Math.max(e, s.maxZoom);
            }
            this._layersMaxZoom = e === -(1 / 0) ? i : e, this._layersMinZoom = t === 1 / 0 ? i : t, 
            n !== this._getZoomSpan() && this.fire("zoomlevelschange");
        }
    }), o.Projection.Mercator = {
        R: 6378137,
        R_MINOR: 6356752.314245179,
        bounds: o.bounds([ -20037508.34279, -15496570.73972 ], [ 20037508.34279, 18764656.23138 ]),
        project: function(t) {
            var e = Math.PI / 180, i = this.R, n = t.lat * e, s = this.R_MINOR / i, r = Math.sqrt(1 - s * s), a = r * Math.sin(n), h = Math.tan(Math.PI / 4 - n / 2) / Math.pow((1 - a) / (1 + a), r / 2);
            return n = -i * Math.log(Math.max(h, 1e-10)), new o.Point(t.lng * e * i, n);
        },
        unproject: function(t) {
            for (var e, i = 180 / Math.PI, n = this.R, s = this.R_MINOR / n, r = Math.sqrt(1 - s * s), a = Math.exp(-t.y / n), h = Math.PI / 2 - 2 * Math.atan(a), l = 0, u = .1; 15 > l && Math.abs(u) > 1e-7; l++) e = r * Math.sin(h), 
            e = Math.pow((1 - e) / (1 + e), r / 2), u = Math.PI / 2 - 2 * Math.atan(a * e) - h, 
            h += u;
            return new o.LatLng(h * i, t.x * i / n);
        }
    }, o.CRS.EPSG3395 = o.extend({}, o.CRS.Earth, {
        code: "EPSG:3395",
        projection: o.Projection.Mercator,
        transformation: function() {
            var t = .5 / (Math.PI * o.Projection.Mercator.R);
            return new o.Transformation(t, .5, -t, .5);
        }()
    }), o.GridLayer = o.Layer.extend({
        options: {
            pane: "tilePane",
            tileSize: 256,
            opacity: 1,
            updateWhenIdle: o.Browser.mobile,
            updateInterval: 200,
            attribution: null,
            zIndex: null,
            bounds: null,
            minZoom: 0
        },
        initialize: function(t) {
            t = o.setOptions(this, t);
        },
        onAdd: function() {
            this._initContainer(), this._levels = {}, this._tiles = {}, this._viewReset(), this._update();
        },
        beforeAdd: function(t) {
            t._addZoomLimit(this);
        },
        onRemove: function(t) {
            o.DomUtil.remove(this._container), t._removeZoomLimit(this), this._container = null, 
            this._tileZoom = null;
        },
        bringToFront: function() {
            return this._map && (o.DomUtil.toFront(this._container), this._setAutoZIndex(Math.max)), 
            this;
        },
        bringToBack: function() {
            return this._map && (o.DomUtil.toBack(this._container), this._setAutoZIndex(Math.min)), 
            this;
        },
        getAttribution: function() {
            return this.options.attribution;
        },
        getContainer: function() {
            return this._container;
        },
        setOpacity: function(t) {
            return this.options.opacity = t, this._map && this._updateOpacity(), this;
        },
        setZIndex: function(t) {
            return this.options.zIndex = t, this._updateZIndex(), this;
        },
        redraw: function() {
            return this._map && (this._removeAllTiles(), this._update()), this;
        },
        getEvents: function() {
            var t = {
                viewreset: this._viewReset,
                moveend: this._move
            };
            return this.options.updateWhenIdle || (t.move = o.Util.throttle(this._move, this.options.updateInterval, this)), 
            this._zoomAnimated && (t.zoomanim = this._animateZoom), t;
        },
        createTile: function() {
            return e.createElement("div");
        },
        _updateZIndex: function() {
            this._container && this.options.zIndex !== i && null !== this.options.zIndex && (this._container.style.zIndex = this.options.zIndex);
        },
        _setAutoZIndex: function(t) {
            for (var e, i = this.getPane().children, n = -t(-(1 / 0), 1 / 0), o = 0, s = i.length; s > o; o++) e = i[o].style.zIndex, 
            i[o] !== this._container && e && (n = t(n, +e));
            isFinite(n) && (this.options.zIndex = n + t(-1, 1), this._updateZIndex());
        },
        _updateOpacity: function() {
            var t = this.options.opacity;
            if (!o.Browser.ielt9 && !this._map._fadeAnimated) return void o.DomUtil.setOpacity(this._container, t);
            var e = +new Date(), i = !1;
            for (var n in this._tiles) {
                var s = this._tiles[n];
                if (s.current && s.loaded && !s.active) {
                    var r = Math.min(1, (e - s.loaded) / 200);
                    1 > r ? (o.DomUtil.setOpacity(s.el, t * r), i = !0) : (o.DomUtil.setOpacity(s.el, t), 
                    s.active = !0, this._pruneTiles());
                }
            }
            i && (o.Util.cancelAnimFrame(this._fadeFrame), this._fadeFrame = o.Util.requestAnimFrame(this._updateOpacity, this));
        },
        _initContainer: function() {
            this._container || (this._container = o.DomUtil.create("div", "leaflet-layer"), 
            this._updateZIndex(), this.options.opacity < 1 && this._updateOpacity(), this.getPane().appendChild(this._container));
        },
        _updateLevels: function() {
            var t = this._tileZoom, e = this.options.maxZoom;
            for (var i in this._levels) this._levels[i].el.children.length || i === t ? this._levels[i].el.style.zIndex = e - Math.abs(t - i) : (o.DomUtil.remove(this._levels[i].el), 
            delete this._levels[i]);
            var n = this._levels[t], s = this._map;
            return n || (n = this._levels[t] = {}, n.el = o.DomUtil.create("div", "leaflet-tile-container leaflet-zoom-animated", this._container), 
            n.el.style.zIndex = e, n.origin = s.project(s.unproject(s.getPixelOrigin()), t).round(), 
            n.zoom = t, this._setZoomTransform(n, s.getCenter(), s.getZoom()), o.Util.falseFn(n.el.offsetWidth)), 
            this._level = n, n;
        },
        _pruneTiles: function() {
            var t, e;
            for (t in this._tiles) e = this._tiles[t], e.retain = e.current;
            for (t in this._tiles) if (e = this._tiles[t], e.current && !e.active) {
                var i = e.coords;
                this._retainParent(i.x, i.y, i.z, i.z - 5) || this._retainChildren(i.x, i.y, i.z, i.z + 2);
            }
            for (t in this._tiles) this._tiles[t].retain || this._removeTile(t);
        },
        _removeAllTiles: function() {
            for (var t in this._tiles) this._removeTile(t);
        },
        _retainParent: function(t, e, i, n) {
            var o = Math.floor(t / 2), s = Math.floor(e / 2), r = i - 1, a = o + ":" + s + ":" + r, h = this._tiles[a];
            return h && h.active ? (h.retain = !0, !0) : (h && h.loaded && (h.retain = !0), 
            r > n ? this._retainParent(o, s, r, n) : !1);
        },
        _retainChildren: function(t, e, i, n) {
            for (var o = 2 * t; 2 * t + 2 > o; o++) for (var s = 2 * e; 2 * e + 2 > s; s++) {
                var r = o + ":" + s + ":" + (i + 1), a = this._tiles[r];
                a && a.active ? a.retain = !0 : (a && a.loaded && (a.retain = !0), n > i + 1 && this._retainChildren(o, s, i + 1, n));
            }
        },
        _viewReset: function(t) {
            this._reset(this._map.getCenter(), this._map.getZoom(), t && t.hard);
        },
        _animateZoom: function(t) {
            this._reset(t.center, t.zoom, !1, !0, t.noUpdate);
        },
        _reset: function(t, e, i, n, s) {
            var r = Math.round(e), a = this._tileZoom !== r;
            s || !i && !a || (this._abortLoading && this._abortLoading(), this._tileZoom = r, 
            this._updateLevels(), this._resetGrid(), o.Browser.mobileWebkit || this._update(t, r), 
            n || this._pruneTiles()), this._setZoomTransforms(t, e);
        },
        _setZoomTransforms: function(t, e) {
            for (var i in this._levels) this._setZoomTransform(this._levels[i], t, e);
        },
        _setZoomTransform: function(t, e, i) {
            var n = this._map.getZoomScale(i, t.zoom), s = t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e, i)).round();
            o.DomUtil.setTransform(t.el, s, n);
        },
        _resetGrid: function() {
            var t = this._map, e = t.options.crs, i = this._tileSize = this._getTileSize(), n = this._tileZoom, o = this._map.getPixelWorldBounds(this._tileZoom);
            o && (this._globalTileRange = this._pxBoundsToTileRange(o)), this._wrapX = e.wrapLng && [ Math.floor(t.project([ 0, e.wrapLng[0] ], n).x / i), Math.ceil(t.project([ 0, e.wrapLng[1] ], n).x / i) ], 
            this._wrapY = e.wrapLat && [ Math.floor(t.project([ e.wrapLat[0], 0 ], n).y / i), Math.ceil(t.project([ e.wrapLat[1], 0 ], n).y / i) ];
        },
        _getTileSize: function() {
            return this.options.tileSize;
        },
        _move: function() {
            this._update(), this._pruneTiles();
        },
        _update: function(t, n) {
            var s = this._map;
            if (s) {
                t === i && (t = s.getCenter()), n === i && (n = Math.round(s.getZoom()));
                var r = s.getPixelBounds(t, n), a = this._pxBoundsToTileRange(r), h = a.getCenter(), l = [];
                for (var u in this._tiles) this._tiles[u].current = !1;
                for (var c = a.min.y; c <= a.max.y; c++) for (var d = a.min.x; d <= a.max.x; d++) {
                    var _ = new o.Point(d, c);
                    if (_.z = n, this._isValidTile(_)) {
                        var m = this._tiles[this._tileCoordsToKey(_)];
                        m ? m.current = !0 : l.push(_);
                    }
                }
                if (l.sort(function(t, e) {
                    return t.distanceTo(h) - e.distanceTo(h);
                }), 0 !== l.length) {
                    this._noTilesToLoad() && this.fire("loading");
                    var p = e.createDocumentFragment();
                    for (d = 0; d < l.length; d++) this._addTile(l[d], p);
                    this._level.el.appendChild(p);
                }
            }
        },
        _isValidTile: function(t) {
            var e = this._map.options.crs;
            if (!e.infinite) {
                var i = this._globalTileRange;
                if (!e.wrapLng && (t.x < i.min.x || t.x > i.max.x) || !e.wrapLat && (t.y < i.min.y || t.y > i.max.y)) return !1;
            }
            if (!this.options.bounds) return !0;
            var n = this._tileCoordsToBounds(t);
            return o.latLngBounds(this.options.bounds).intersects(n);
        },
        _keyToBounds: function(t) {
            return this._tileCoordsToBounds(this._keyToTileCoords(t));
        },
        _tileCoordsToBounds: function(t) {
            var e = this._map, i = this._getTileSize(), n = t.multiplyBy(i), s = n.add([ i, i ]), r = e.wrapLatLng(e.unproject(n, t.z)), a = e.wrapLatLng(e.unproject(s, t.z));
            return new o.LatLngBounds(r, a);
        },
        _tileCoordsToKey: function(t) {
            return t.x + ":" + t.y + ":" + t.z;
        },
        _keyToTileCoords: function(t) {
            var e = t.split(":"), i = new o.Point(+e[0], +e[1]);
            return i.z = +e[2], i;
        },
        _removeTile: function(t) {
            var e = this._tiles[t];
            e && (o.DomUtil.remove(e.el), delete this._tiles[t], this.fire("tileunload", {
                tile: e.el,
                coords: this._keyToTileCoords(t)
            }));
        },
        _initTile: function(t) {
            o.DomUtil.addClass(t, "leaflet-tile"), t.style.width = this._tileSize + "px", t.style.height = this._tileSize + "px", 
            t.onselectstart = o.Util.falseFn, t.onmousemove = o.Util.falseFn, o.Browser.ielt9 && this.options.opacity < 1 && o.DomUtil.setOpacity(t, this.options.opacity), 
            o.Browser.android && !o.Browser.android23 && (t.style.WebkitBackfaceVisibility = "hidden");
        },
        _addTile: function(t, e) {
            var i = this._getTilePos(t), n = this._tileCoordsToKey(t), s = this.createTile(this._wrapCoords(t), o.bind(this._tileReady, this, t));
            this._initTile(s), this.createTile.length < 2 && setTimeout(o.bind(this._tileReady, this, t, null, s), 0), 
            o.DomUtil.setPosition(s, i, !0), this._tiles[n] = {
                el: s,
                coords: t,
                current: !0
            }, e.appendChild(s), this.fire("tileloadstart", {
                tile: s,
                coords: t
            });
        },
        _tileReady: function(t, e, i) {
            if (this._map) {
                e && this.fire("tileerror", {
                    error: e,
                    tile: i,
                    coords: t
                });
                var n = this._tileCoordsToKey(t);
                i = this._tiles[n], i && (i.loaded = +new Date(), this._map._fadeAnimated ? (o.DomUtil.setOpacity(i.el, 0), 
                o.Util.cancelAnimFrame(this._fadeFrame), this._fadeFrame = o.Util.requestAnimFrame(this._updateOpacity, this)) : (i.active = !0, 
                this._pruneTiles()), o.DomUtil.addClass(i.el, "leaflet-tile-loaded"), this.fire("tileload", {
                    tile: i.el,
                    coords: t
                }), this._noTilesToLoad() && this.fire("load"));
            }
        },
        _getTilePos: function(t) {
            return t.multiplyBy(this._tileSize).subtract(this._level.origin);
        },
        _wrapCoords: function(t) {
            var e = new o.Point(this._wrapX ? o.Util.wrapNum(t.x, this._wrapX) : t.x, this._wrapY ? o.Util.wrapNum(t.y, this._wrapY) : t.y);
            return e.z = t.z, e;
        },
        _pxBoundsToTileRange: function(t) {
            return new o.Bounds(t.min.divideBy(this._tileSize).floor(), t.max.divideBy(this._tileSize).ceil().subtract([ 1, 1 ]));
        },
        _noTilesToLoad: function() {
            for (var t in this._tiles) if (!this._tiles[t].loaded) return !1;
            return !0;
        }
    }), o.gridLayer = function(t) {
        return new o.GridLayer(t);
    }, o.TileLayer = o.GridLayer.extend({
        options: {
            maxZoom: 18,
            subdomains: "abc",
            errorTileUrl: "",
            zoomOffset: 0,
            maxNativeZoom: null,
            tms: !1,
            zoomReverse: !1,
            detectRetina: !1,
            crossOrigin: !1
        },
        initialize: function(t, e) {
            this._url = t, e = o.setOptions(this, e), e.detectRetina && o.Browser.retina && e.maxZoom > 0 && (e.tileSize = Math.floor(e.tileSize / 2), 
            e.zoomOffset++, e.minZoom = Math.max(0, e.minZoom), e.maxZoom--), "string" == typeof e.subdomains && (e.subdomains = e.subdomains.split("")), 
            o.Browser.android || this.on("tileunload", this._onTileRemove);
        },
        setUrl: function(t, e) {
            return this._url = t, e || this.redraw(), this;
        },
        createTile: function(t, i) {
            var n = e.createElement("img");
            return n.onload = o.bind(this._tileOnLoad, this, i, n), n.onerror = o.bind(this._tileOnError, this, i, n), 
            this.options.crossOrigin && (n.crossOrigin = ""), n.alt = "", n.src = this.getTileUrl(t), 
            n;
        },
        getTileUrl: function(t) {
            return o.Util.template(this._url, o.extend({
                r: this.options.detectRetina && o.Browser.retina && this.options.maxZoom > 0 ? "@2x" : "",
                s: this._getSubdomain(t),
                x: t.x,
                y: this.options.tms ? this._globalTileRange.max.y - t.y : t.y,
                z: this._getZoomForUrl()
            }, this.options));
        },
        _tileOnLoad: function(t, e) {
            t(null, e);
        },
        _tileOnError: function(t, e, i) {
            var n = this.options.errorTileUrl;
            n && (e.src = n), t(i, e);
        },
        _getTileSize: function() {
            var t = this._map, e = this.options, i = this._tileZoom + e.zoomOffset, n = e.maxNativeZoom;
            return null !== n && i > n ? Math.round(e.tileSize / t.getZoomScale(n, i)) : e.tileSize;
        },
        _onTileRemove: function(t) {
            t.tile.onload = null;
        },
        _getZoomForUrl: function() {
            var t = this.options, e = this._tileZoom;
            return t.zoomReverse && (e = t.maxZoom - e), e += t.zoomOffset, t.maxNativeZoom ? Math.min(e, t.maxNativeZoom) : e;
        },
        _getSubdomain: function(t) {
            var e = Math.abs(t.x + t.y) % this.options.subdomains.length;
            return this.options.subdomains[e];
        },
        _abortLoading: function() {
            var t, e;
            for (t in this._tiles) e = this._tiles[t].el, e.onload = o.Util.falseFn, e.onerror = o.Util.falseFn, 
            e.complete || (e.src = o.Util.emptyImageUrl, o.DomUtil.remove(e));
        }
    }), o.tileLayer = function(t, e) {
        return new o.TileLayer(t, e);
    }, o.TileLayer.WMS = o.TileLayer.extend({
        defaultWmsParams: {
            service: "WMS",
            request: "GetMap",
            version: "1.1.1",
            layers: "",
            styles: "",
            format: "image/jpeg",
            transparent: !1
        },
        options: {
            crs: null,
            uppercase: !1
        },
        initialize: function(t, e) {
            this._url = t;
            var i = o.extend({}, this.defaultWmsParams);
            for (var n in e) n in this.options || (i[n] = e[n]);
            e = o.setOptions(this, e), i.width = i.height = e.tileSize * (e.detectRetina && o.Browser.retina ? 2 : 1), 
            this.wmsParams = i;
        },
        onAdd: function(t) {
            this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version);
            var e = this._wmsVersion >= 1.3 ? "crs" : "srs";
            this.wmsParams[e] = this._crs.code, o.TileLayer.prototype.onAdd.call(this, t);
        },
        getTileUrl: function(t) {
            var e = this._tileCoordsToBounds(t), i = this._crs.project(e.getNorthWest()), n = this._crs.project(e.getSouthEast()), s = (this._wmsVersion >= 1.3 && this._crs === o.CRS.EPSG4326 ? [ n.y, i.x, i.y, n.x ] : [ i.x, n.y, n.x, i.y ]).join(","), r = o.TileLayer.prototype.getTileUrl.call(this, t);
            return r + o.Util.getParamString(this.wmsParams, r, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + s;
        },
        setParams: function(t, e) {
            return o.extend(this.wmsParams, t), e || this.redraw(), this;
        }
    }), o.tileLayer.wms = function(t, e) {
        return new o.TileLayer.WMS(t, e);
    }, o.ImageOverlay = o.Layer.extend({
        options: {
            opacity: 1,
            alt: "",
            interactive: !1
        },
        initialize: function(t, e, i) {
            this._url = t, this._bounds = o.latLngBounds(e), o.setOptions(this, i);
        },
        onAdd: function() {
            this._image || (this._initImage(), this.options.opacity < 1 && this._updateOpacity()), 
            this.options.interactive && (o.DomUtil.addClass(this._image, "leaflet-interactive"), 
            this.addInteractiveTarget(this._image)), this.getPane().appendChild(this._image), 
            this._reset();
        },
        onRemove: function() {
            o.DomUtil.remove(this._image), this.options.interactive && this.removeInteractiveTarget(this._image);
        },
        setOpacity: function(t) {
            return this.options.opacity = t, this._image && this._updateOpacity(), this;
        },
        setStyle: function(t) {
            return t.opacity && this.setOpacity(t.opacity), this;
        },
        bringToFront: function() {
            return this._map && o.DomUtil.toFront(this._image), this;
        },
        bringToBack: function() {
            return this._map && o.DomUtil.toBack(this._image), this;
        },
        setUrl: function(t) {
            return this._url = t, this._image && (this._image.src = t), this;
        },
        getAttribution: function() {
            return this.options.attribution;
        },
        getEvents: function() {
            var t = {
                viewreset: this._reset
            };
            return this._zoomAnimated && (t.zoomanim = this._animateZoom), t;
        },
        getBounds: function() {
            return this._bounds;
        },
        _initImage: function() {
            var t = this._image = o.DomUtil.create("img", "leaflet-image-layer " + (this._zoomAnimated ? "leaflet-zoom-animated" : ""));
            t.onselectstart = o.Util.falseFn, t.onmousemove = o.Util.falseFn, t.onload = o.bind(this.fire, this, "load"), 
            t.src = this._url, t.alt = this.options.alt;
        },
        _animateZoom: function(t) {
            var e = new o.Bounds(this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(), t.zoom, t.center), this._map._latLngToNewLayerPoint(this._bounds.getSouthEast(), t.zoom, t.center)), i = e.min.add(e.getSize()._multiplyBy((1 - 1 / t.scale) / 2));
            o.DomUtil.setTransform(this._image, i, t.scale);
        },
        _reset: function() {
            var t = this._image, e = new o.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()), this._map.latLngToLayerPoint(this._bounds.getSouthEast())), i = e.getSize();
            o.DomUtil.setPosition(t, e.min), t.style.width = i.x + "px", t.style.height = i.y + "px";
        },
        _updateOpacity: function() {
            o.DomUtil.setOpacity(this._image, this.options.opacity);
        }
    }), o.imageOverlay = function(t, e, i) {
        return new o.ImageOverlay(t, e, i);
    }, o.Icon = o.Class.extend({
        initialize: function(t) {
            o.setOptions(this, t);
        },
        createIcon: function(t) {
            return this._createIcon("icon", t);
        },
        createShadow: function(t) {
            return this._createIcon("shadow", t);
        },
        _createIcon: function(t, e) {
            var i = this._getIconUrl(t);
            if (!i) {
                if ("icon" === t) throw new Error("iconUrl not set in Icon options (see the docs).");
                return null;
            }
            var n = this._createImg(i, e && "IMG" === e.tagName ? e : null);
            return this._setIconStyles(n, t), n;
        },
        _setIconStyles: function(t, e) {
            var i = this.options, n = o.point(i[e + "Size"]), s = o.point("shadow" === e && i.shadowAnchor || i.iconAnchor || n && n.divideBy(2, !0));
            t.className = "leaflet-marker-" + e + " " + (i.className || ""), s && (t.style.marginLeft = -s.x + "px", 
            t.style.marginTop = -s.y + "px"), n && (t.style.width = n.x + "px", t.style.height = n.y + "px");
        },
        _createImg: function(t, i) {
            return i = i || e.createElement("img"), i.src = t, i;
        },
        _getIconUrl: function(t) {
            return o.Browser.retina && this.options[t + "RetinaUrl"] || this.options[t + "Url"];
        }
    }), o.icon = function(t) {
        return new o.Icon(t);
    }, o.Icon.Default = o.Icon.extend({
        options: {
            iconSize: [ 25, 41 ],
            iconAnchor: [ 12, 41 ],
            popupAnchor: [ 1, -34 ],
            shadowSize: [ 41, 41 ]
        },
        _getIconUrl: function(t) {
            var e = t + "Url";
            if (this.options[e]) return this.options[e];
            var i = o.Icon.Default.imagePath;
            if (!i) throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");
            return i + "/marker-" + t + (o.Browser.retina && "icon" === t ? "-2x" : "") + ".png";
        }
    }), o.Icon.Default.imagePath = function() {
        var t, i, n, o, s = e.getElementsByTagName("script"), r = /[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;
        for (t = 0, i = s.length; i > t; t++) if (n = s[t].src, n.match(r)) return o = n.split(r)[0], 
        (o ? o + "/" : "") + "images";
    }(), o.Marker = o.Layer.extend({
        options: {
            pane: "markerPane",
            icon: new o.Icon.Default(),
            interactive: !0,
            keyboard: !0,
            zIndexOffset: 0,
            opacity: 1,
            riseOffset: 250
        },
        initialize: function(t, e) {
            o.setOptions(this, e), this._latlng = o.latLng(t);
        },
        onAdd: function(t) {
            this._zoomAnimated = this._zoomAnimated && t.options.markerZoomAnimation, this._initIcon(), 
            this.update();
        },
        onRemove: function() {
            this.dragging && this.dragging.enabled() && this.dragging.removeHooks(), this._removeIcon(), 
            this._removeShadow();
        },
        getEvents: function() {
            var t = {
                viewreset: this.update
            };
            return this._zoomAnimated && (t.zoomanim = this._animateZoom), t;
        },
        getLatLng: function() {
            return this._latlng;
        },
        setLatLng: function(t) {
            var e = this._latlng;
            return this._latlng = o.latLng(t), this.update(), this.fire("move", {
                oldLatLng: e,
                latlng: this._latlng
            });
        },
        setZIndexOffset: function(t) {
            return this.options.zIndexOffset = t, this.update();
        },
        setIcon: function(t) {
            return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup, this._popup.options), 
            this;
        },
        update: function() {
            if (this._icon) {
                var t = this._map.latLngToLayerPoint(this._latlng).round();
                this._setPos(t);
            }
            return this;
        },
        _initIcon: function() {
            var t = this.options, e = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"), i = t.icon.createIcon(this._icon), n = !1;
            i !== this._icon && (this._icon && this._removeIcon(), n = !0, t.title && (i.title = t.title), 
            t.alt && (i.alt = t.alt)), o.DomUtil.addClass(i, e), t.keyboard && (i.tabIndex = "0"), 
            this._icon = i, this._initInteraction(), t.riseOnHover && this.on({
                mouseover: this._bringToFront,
                mouseout: this._resetZIndex
            });
            var s = t.icon.createShadow(this._shadow), r = !1;
            s !== this._shadow && (this._removeShadow(), r = !0), s && o.DomUtil.addClass(s, e), 
            this._shadow = s, t.opacity < 1 && this._updateOpacity(), n && this.getPane().appendChild(this._icon), 
            s && r && this.getPane("shadowPane").appendChild(this._shadow);
        },
        _removeIcon: function() {
            this.options.riseOnHover && this.off({
                mouseover: this._bringToFront,
                mouseout: this._resetZIndex
            }), o.DomUtil.remove(this._icon), this.removeInteractiveTarget(this._icon), this._icon = null;
        },
        _removeShadow: function() {
            this._shadow && o.DomUtil.remove(this._shadow), this._shadow = null;
        },
        _setPos: function(t) {
            o.DomUtil.setPosition(this._icon, t), this._shadow && o.DomUtil.setPosition(this._shadow, t), 
            this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex();
        },
        _updateZIndex: function(t) {
            this._icon.style.zIndex = this._zIndex + t;
        },
        _animateZoom: function(t) {
            var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round();
            this._setPos(e);
        },
        _initInteraction: function() {
            if (this.options.interactive && (o.DomUtil.addClass(this._icon, "leaflet-interactive"), 
            this.addInteractiveTarget(this._icon), o.Handler.MarkerDrag)) {
                var t = this.options.draggable;
                this.dragging && (t = this.dragging.enabled(), this.dragging.disable()), this.dragging = new o.Handler.MarkerDrag(this), 
                t && this.dragging.enable();
            }
        },
        setOpacity: function(t) {
            return this.options.opacity = t, this._map && this._updateOpacity(), this;
        },
        _updateOpacity: function() {
            var t = this.options.opacity;
            o.DomUtil.setOpacity(this._icon, t), this._shadow && o.DomUtil.setOpacity(this._shadow, t);
        },
        _bringToFront: function() {
            this._updateZIndex(this.options.riseOffset);
        },
        _resetZIndex: function() {
            this._updateZIndex(0);
        }
    }), o.marker = function(t, e) {
        return new o.Marker(t, e);
    }, o.DivIcon = o.Icon.extend({
        options: {
            iconSize: [ 12, 12 ],
            className: "leaflet-div-icon",
            html: !1
        },
        createIcon: function(t) {
            var i = t && "DIV" === t.tagName ? t : e.createElement("div"), n = this.options;
            return i.innerHTML = n.html !== !1 ? n.html : "", n.bgPos && (i.style.backgroundPosition = -n.bgPos.x + "px " + -n.bgPos.y + "px"), 
            this._setIconStyles(i, "icon"), i;
        },
        createShadow: function() {
            return null;
        }
    }), o.divIcon = function(t) {
        return new o.DivIcon(t);
    }, o.Map.mergeOptions({
        closePopupOnClick: !0
    }), o.Popup = o.Layer.extend({
        options: {
            pane: "popupPane",
            minWidth: 50,
            maxWidth: 300,
            offset: [ 0, 7 ],
            autoPan: !0,
            autoPanPadding: [ 5, 5 ],
            closeButton: !0,
            autoClose: !0,
            zoomAnimation: !0
        },
        initialize: function(t, e) {
            o.setOptions(this, t), this._source = e;
        },
        onAdd: function(t) {
            this._zoomAnimated = this._zoomAnimated && this.options.zoomAnimation, this._container || this._initLayout(), 
            t._fadeAnimated && o.DomUtil.setOpacity(this._container, 0), clearTimeout(this._removeTimeout), 
            this.getPane().appendChild(this._container), this.update(), t._fadeAnimated && o.DomUtil.setOpacity(this._container, 1), 
            t.fire("popupopen", {
                popup: this
            }), this._source && this._source.fire("popupopen", {
                popup: this
            }, !0);
        },
        openOn: function(t) {
            return t.openPopup(this), this;
        },
        onRemove: function(t) {
            t._fadeAnimated ? (o.DomUtil.setOpacity(this._container, 0), this._removeTimeout = setTimeout(o.bind(o.DomUtil.remove, o.DomUtil, this._container), 200)) : o.DomUtil.remove(this._container), 
            t.fire("popupclose", {
                popup: this
            }), this._source && this._source.fire("popupclose", {
                popup: this
            }, !0);
        },
        getLatLng: function() {
            return this._latlng;
        },
        setLatLng: function(t) {
            return this._latlng = o.latLng(t), this._map && (this._updatePosition(), this._adjustPan()), 
            this;
        },
        getContent: function() {
            return this._content;
        },
        setContent: function(t) {
            return this._content = t, this.update(), this;
        },
        update: function() {
            this._map && (this._container.style.visibility = "hidden", this._updateContent(), 
            this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", 
            this._adjustPan());
        },
        getEvents: function() {
            var t = {
                viewreset: this._updatePosition
            }, e = this.options;
            return this._zoomAnimated && (t.zoomanim = this._animateZoom), ("closeOnClick" in e ? e.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this._close), 
            e.keepInView && (t.moveend = this._adjustPan), t;
        },
        isOpen: function() {
            return !!this._map && this._map.hasLayer(this);
        },
        _close: function() {
            this._map && this._map.closePopup(this);
        },
        _initLayout: function() {
            var t = "leaflet-popup", e = this._container = o.DomUtil.create("div", t + " " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"));
            if (this.options.closeButton) {
                var i = this._closeButton = o.DomUtil.create("a", t + "-close-button", e);
                i.href = "#close", i.innerHTML = "&#215;", o.DomEvent.on(i, "click", this._onCloseButtonClick, this);
            }
            var n = this._wrapper = o.DomUtil.create("div", t + "-content-wrapper", e);
            this._contentNode = o.DomUtil.create("div", t + "-content", n), o.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n, "contextmenu", o.DomEvent.stopPropagation), 
            this._tipContainer = o.DomUtil.create("div", t + "-tip-container", e), this._tip = o.DomUtil.create("div", t + "-tip", this._tipContainer);
        },
        _updateContent: function() {
            if (this._content) {
                var t = this._contentNode;
                if ("string" == typeof this._content) t.innerHTML = this._content; else {
                    for (;t.hasChildNodes(); ) t.removeChild(t.firstChild);
                    t.appendChild(this._content);
                }
                this.fire("contentupdate");
            }
        },
        _updateLayout: function() {
            var t = this._contentNode, e = t.style;
            e.width = "", e.whiteSpace = "nowrap";
            var i = t.offsetWidth;
            i = Math.min(i, this.options.maxWidth), i = Math.max(i, this.options.minWidth), 
            e.width = i + 1 + "px", e.whiteSpace = "", e.height = "";
            var n = t.offsetHeight, s = this.options.maxHeight, r = "leaflet-popup-scrolled";
            s && n > s ? (e.height = s + "px", o.DomUtil.addClass(t, r)) : o.DomUtil.removeClass(t, r), 
            this._containerWidth = this._container.offsetWidth;
        },
        _updatePosition: function() {
            if (this._map) {
                var t = this._map.latLngToLayerPoint(this._latlng), e = o.point(this.options.offset);
                this._zoomAnimated ? o.DomUtil.setPosition(this._container, t) : e = e.add(t);
                var i = this._containerBottom = -e.y, n = this._containerLeft = -Math.round(this._containerWidth / 2) + e.x;
                this._container.style.bottom = i + "px", this._container.style.left = n + "px";
            }
        },
        _animateZoom: function(t) {
            var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center);
            o.DomUtil.setPosition(this._container, e);
        },
        _adjustPan: function() {
            if (this.options.autoPan) {
                var t = this._map, e = this._container.offsetHeight, i = this._containerWidth, n = new o.Point(this._containerLeft, -e - this._containerBottom);
                this._zoomAnimated && n._add(o.DomUtil.getPosition(this._container));
                var s = t.layerPointToContainerPoint(n), r = o.point(this.options.autoPanPadding), a = o.point(this.options.autoPanPaddingTopLeft || r), h = o.point(this.options.autoPanPaddingBottomRight || r), l = t.getSize(), u = 0, c = 0;
                s.x + i + h.x > l.x && (u = s.x + i - l.x + h.x), s.x - u - a.x < 0 && (u = s.x - a.x), 
                s.y + e + h.y > l.y && (c = s.y + e - l.y + h.y), s.y - c - a.y < 0 && (c = s.y - a.y), 
                (u || c) && t.fire("autopanstart").panBy([ u, c ]);
            }
        },
        _onCloseButtonClick: function(t) {
            this._close(), o.DomEvent.stop(t);
        }
    }), o.popup = function(t, e) {
        return new o.Popup(t, e);
    }, o.Map.include({
        openPopup: function(t, e, i) {
            if (!(t instanceof o.Popup)) {
                var n = t;
                t = new o.Popup(i).setContent(n);
            }
            return e && t.setLatLng(e), this.hasLayer(t) ? this : (this._popup && this._popup.options.autoClose && this.closePopup(), 
            this._popup = t, this.addLayer(t));
        },
        closePopup: function(t) {
            return t && t !== this._popup || (t = this._popup, this._popup = null), t && this.removeLayer(t), 
            this;
        }
    }), o.Layer.include({
        bindPopup: function(t, e) {
            return t instanceof o.Popup ? (o.setOptions(t, e), this._popup = t, t._source = this) : ((!this._popup || e) && (this._popup = new o.Popup(e, this)), 
            this._popup.setContent(t)), this._popupHandlersAdded || (this.on({
                click: this._openPopup,
                remove: this.closePopup,
                move: this._movePopup
            }), this._popupHandlersAdded = !0), this;
        },
        unbindPopup: function() {
            return this._popup && (this.off({
                click: this._openPopup,
                remove: this.closePopup,
                move: this._movePopup
            }), this._popupHandlersAdded = !1, this._popup = null), this;
        },
        openPopup: function(t) {
            return this._popup && this._map && this._map.openPopup(this._popup, t || this._latlng || this.getCenter()), 
            this;
        },
        closePopup: function() {
            return this._popup && this._popup._close(), this;
        },
        togglePopup: function() {
            return this._popup && (this._popup._map ? this.closePopup() : this.openPopup()), 
            this;
        },
        setPopupContent: function(t) {
            return this._popup && this._popup.setContent(t), this;
        },
        getPopup: function() {
            return this._popup;
        },
        _openPopup: function(t) {
            this._map.openPopup(this._popup, t.latlng);
        },
        _movePopup: function(t) {
            this._popup.setLatLng(t.latlng);
        }
    }), o.Marker.include({
        bindPopup: function(t, e) {
            var i = o.point(this.options.icon.options.popupAnchor || [ 0, 0 ]).add(o.Popup.prototype.options.offset);
            return e = o.extend({
                offset: i
            }, e), o.Layer.prototype.bindPopup.call(this, t, e);
        },
        _openPopup: o.Layer.prototype.togglePopup
    }), o.LayerGroup = o.Layer.extend({
        initialize: function(t) {
            this._layers = {};
            var e, i;
            if (t) for (e = 0, i = t.length; i > e; e++) this.addLayer(t[e]);
        },
        addLayer: function(t) {
            var e = this.getLayerId(t);
            return this._layers[e] = t, this._map && this._map.addLayer(t), this;
        },
        removeLayer: function(t) {
            var e = t in this._layers ? t : this.getLayerId(t);
            return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]), delete this._layers[e], 
            this;
        },
        hasLayer: function(t) {
            return !!t && (t in this._layers || this.getLayerId(t) in this._layers);
        },
        clearLayers: function() {
            for (var t in this._layers) this.removeLayer(this._layers[t]);
            return this;
        },
        invoke: function(t) {
            var e, i, n = Array.prototype.slice.call(arguments, 1);
            for (e in this._layers) i = this._layers[e], i[t] && i[t].apply(i, n);
            return this;
        },
        onAdd: function(t) {
            for (var e in this._layers) t.addLayer(this._layers[e]);
        },
        onRemove: function(t) {
            for (var e in this._layers) t.removeLayer(this._layers[e]);
        },
        eachLayer: function(t, e) {
            for (var i in this._layers) t.call(e, this._layers[i]);
            return this;
        },
        getLayer: function(t) {
            return this._layers[t];
        },
        getLayers: function() {
            var t = [];
            for (var e in this._layers) t.push(this._layers[e]);
            return t;
        },
        setZIndex: function(t) {
            return this.invoke("setZIndex", t);
        },
        getLayerId: function(t) {
            return o.stamp(t);
        }
    }), o.layerGroup = function(t) {
        return new o.LayerGroup(t);
    }, o.FeatureGroup = o.LayerGroup.extend({
        addLayer: function(t) {
            return this.hasLayer(t) ? this : (t.addEventParent(this), o.LayerGroup.prototype.addLayer.call(this, t), 
            this._popupContent && t.bindPopup && t.bindPopup(this._popupContent, this._popupOptions), 
            this.fire("layeradd", {
                layer: t
            }));
        },
        removeLayer: function(t) {
            return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), t.removeEventParent(this), 
            o.LayerGroup.prototype.removeLayer.call(this, t), this._popupContent && this.invoke("unbindPopup"), 
            this.fire("layerremove", {
                layer: t
            })) : this;
        },
        bindPopup: function(t, e) {
            return this._popupContent = t, this._popupOptions = e, this.invoke("bindPopup", t, e);
        },
        openPopup: function(t) {
            for (var e in this._layers) {
                this._layers[e].openPopup(t);
                break;
            }
            return this;
        },
        setStyle: function(t) {
            return this.invoke("setStyle", t);
        },
        bringToFront: function() {
            return this.invoke("bringToFront");
        },
        bringToBack: function() {
            return this.invoke("bringToBack");
        },
        getBounds: function() {
            var t = new o.LatLngBounds();
            return this.eachLayer(function(e) {
                t.extend(e.getBounds ? e.getBounds() : e.getLatLng());
            }), t;
        }
    }), o.featureGroup = function(t) {
        return new o.FeatureGroup(t);
    }, o.Renderer = o.Layer.extend({
        options: {
            padding: 0
        },
        initialize: function(t) {
            o.setOptions(this, t), o.stamp(this);
        },
        onAdd: function() {
            this._container || (this._initContainer(), this._zoomAnimated && o.DomUtil.addClass(this._container, "leaflet-zoom-animated")), 
            this.getPane().appendChild(this._container), this._update();
        },
        onRemove: function() {
            o.DomUtil.remove(this._container);
        },
        getEvents: function() {
            var t = {
                moveend: this._update
            };
            return this._zoomAnimated && (t.zoomanim = this._animateZoom), t;
        },
        _animateZoom: function(t) {
            var e = t.origin.subtract(this._map._getCenterLayerPoint()), i = this._bounds.min.add(e.multiplyBy(1 - t.scale)).add(t.offset).round();
            o.DomUtil.setTransform(this._container, i, t.scale);
        },
        _update: function() {
            var t = this.options.padding, e = this._map.getSize(), i = this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();
            this._bounds = new o.Bounds(i, i.add(e.multiplyBy(1 + 2 * t)).round());
        }
    }), o.Map.include({
        getRenderer: function(t) {
            var e = t.options.renderer || this._getPaneRenderer(t.options.pane) || this.options.renderer || this._renderer;
            return e || (e = this._renderer = o.SVG && o.svg() || o.Canvas && o.canvas()), this.hasLayer(e) || this.addLayer(e), 
            e;
        },
        _getPaneRenderer: function(t) {
            if ("overlayPane" === t || t === i) return !1;
            var e = this._paneRenderers[t];
            return e === i && (e = o.SVG && o.svg({
                pane: t
            }) || o.Canvas && o.canvas({
                pane: t
            }), this._paneRenderers[t] = e), e;
        }
    }), o.Path = o.Layer.extend({
        options: {
            stroke: !0,
            color: "#3388ff",
            weight: 3,
            opacity: 1,
            lineCap: "round",
            lineJoin: "round",
            fillOpacity: .2,
            fillRule: "evenodd",
            interactive: !0
        },
        onAdd: function() {
            this._renderer = this._map.getRenderer(this), this._renderer._initPath(this), this._project(), 
            this._update(), this._renderer._addPath(this);
        },
        onRemove: function() {
            this._renderer._removePath(this);
        },
        getEvents: function() {
            return {
                viewreset: this._project,
                moveend: this._update
            };
        },
        redraw: function() {
            return this._map && this._renderer._updatePath(this), this;
        },
        setStyle: function(t) {
            return o.setOptions(this, t), this._renderer && this._renderer._updateStyle(this), 
            this;
        },
        bringToFront: function() {
            return this._renderer && this._renderer._bringToFront(this), this;
        },
        bringToBack: function() {
            return this._renderer && this._renderer._bringToBack(this), this;
        },
        _clickTolerance: function() {
            return (this.options.stroke ? this.options.weight / 2 : 0) + (o.Browser.touch ? 10 : 0);
        }
    }), o.LineUtil = {
        simplify: function(t, e) {
            if (!e || !t.length) return t.slice();
            var i = e * e;
            return t = this._reducePoints(t, i), t = this._simplifyDP(t, i);
        },
        pointToSegmentDistance: function(t, e, i) {
            return Math.sqrt(this._sqClosestPointOnSegment(t, e, i, !0));
        },
        closestPointOnSegment: function(t, e, i) {
            return this._sqClosestPointOnSegment(t, e, i);
        },
        _simplifyDP: function(t, e) {
            var n = t.length, o = typeof Uint8Array != i + "" ? Uint8Array : Array, s = new o(n);
            s[0] = s[n - 1] = 1, this._simplifyDPStep(t, s, e, 0, n - 1);
            var r, a = [];
            for (r = 0; n > r; r++) s[r] && a.push(t[r]);
            return a;
        },
        _simplifyDPStep: function(t, e, i, n, o) {
            var s, r, a, h = 0;
            for (r = n + 1; o - 1 >= r; r++) a = this._sqClosestPointOnSegment(t[r], t[n], t[o], !0), 
            a > h && (s = r, h = a);
            h > i && (e[s] = 1, this._simplifyDPStep(t, e, i, n, s), this._simplifyDPStep(t, e, i, s, o));
        },
        _reducePoints: function(t, e) {
            for (var i = [ t[0] ], n = 1, o = 0, s = t.length; s > n; n++) this._sqDist(t[n], t[o]) > e && (i.push(t[n]), 
            o = n);
            return s - 1 > o && i.push(t[s - 1]), i;
        },
        clipSegment: function(t, e, i, n, o) {
            var s, r, a, h = n ? this._lastCode : this._getBitCode(t, i), l = this._getBitCode(e, i);
            for (this._lastCode = l; ;) {
                if (!(h | l)) return [ t, e ];
                if (h & l) return !1;
                s = h || l, r = this._getEdgeIntersection(t, e, s, i, o), a = this._getBitCode(r, i), 
                s === h ? (t = r, h = a) : (e = r, l = a);
            }
        },
        _getEdgeIntersection: function(t, e, i, n, s) {
            var r, a, h = e.x - t.x, l = e.y - t.y, u = n.min, c = n.max;
            return 8 & i ? (r = t.x + h * (c.y - t.y) / l, a = c.y) : 4 & i ? (r = t.x + h * (u.y - t.y) / l, 
            a = u.y) : 2 & i ? (r = c.x, a = t.y + l * (c.x - t.x) / h) : 1 & i && (r = u.x, 
            a = t.y + l * (u.x - t.x) / h), new o.Point(r, a, s);
        },
        _getBitCode: function(t, e) {
            var i = 0;
            return t.x < e.min.x ? i |= 1 : t.x > e.max.x && (i |= 2), t.y < e.min.y ? i |= 4 : t.y > e.max.y && (i |= 8), 
            i;
        },
        _sqDist: function(t, e) {
            var i = e.x - t.x, n = e.y - t.y;
            return i * i + n * n;
        },
        _sqClosestPointOnSegment: function(t, e, i, n) {
            var s, r = e.x, a = e.y, h = i.x - r, l = i.y - a, u = h * h + l * l;
            return u > 0 && (s = ((t.x - r) * h + (t.y - a) * l) / u, s > 1 ? (r = i.x, a = i.y) : s > 0 && (r += h * s, 
            a += l * s)), h = t.x - r, l = t.y - a, n ? h * h + l * l : new o.Point(r, a);
        }
    }, o.Polyline = o.Path.extend({
        options: {
            smoothFactor: 1
        },
        initialize: function(t, e) {
            o.setOptions(this, e), this._setLatLngs(t);
        },
        getLatLngs: function() {
            return this._latlngs;
        },
        setLatLngs: function(t) {
            return this._setLatLngs(t), this.redraw();
        },
        addLatLng: function(t) {
            return t = o.latLng(t), this._latlngs.push(t), this._bounds.extend(t), this.redraw();
        },
        spliceLatLngs: function() {
            var t = [].splice.apply(this._latlngs, arguments);
            return this._setLatLngs(this._latlngs), this.redraw(), t;
        },
        closestLayerPoint: function(t) {
            for (var e, i, n = 1 / 0, s = null, r = o.LineUtil._sqClosestPointOnSegment, a = 0, h = this._parts.length; h > a; a++) for (var l = this._parts[a], u = 1, c = l.length; c > u; u++) {
                e = l[u - 1], i = l[u];
                var d = r(t, e, i, !0);
                n > d && (n = d, s = r(t, e, i));
            }
            return s && (s.distance = Math.sqrt(n)), s;
        },
        getCenter: function() {
            var t, e, i, n, o, s, r, a = this._rings[0], h = a.length;
            for (t = 0, e = 0; h - 1 > t; t++) e += a[t].distanceTo(a[t + 1]) / 2;
            for (t = 0, n = 0; h - 1 > t; t++) if (o = a[t], s = a[t + 1], i = o.distanceTo(s), 
            n += i, n > e) return r = (n - e) / i, this._map.layerPointToLatLng([ s.x - r * (s.x - o.x), s.y - r * (s.y - o.y) ]);
        },
        getBounds: function() {
            return this._bounds;
        },
        _setLatLngs: function(t) {
            this._bounds = new o.LatLngBounds(), this._latlngs = this._convertLatLngs(t);
        },
        _convertLatLngs: function(t) {
            for (var e = [], i = this._flat(t), n = 0, s = t.length; s > n; n++) i ? (e[n] = o.latLng(t[n]), 
            this._bounds.extend(e[n])) : e[n] = this._convertLatLngs(t[n]);
            return e;
        },
        _flat: function(t) {
            return !o.Util.isArray(t[0]) || "object" != typeof t[0][0];
        },
        _project: function() {
            this._rings = [], this._projectLatlngs(this._latlngs, this._rings);
            var t = this._clickTolerance(), e = new o.Point(t, -t);
            this._latlngs.length && (this._pxBounds = new o.Bounds(this._map.latLngToLayerPoint(this._bounds.getSouthWest())._subtract(e), this._map.latLngToLayerPoint(this._bounds.getNorthEast())._add(e)));
        },
        _projectLatlngs: function(t, e) {
            var i, n, s = t[0] instanceof o.LatLng, r = t.length;
            if (s) {
                for (n = [], i = 0; r > i; i++) n[i] = this._map.latLngToLayerPoint(t[i]);
                e.push(n);
            } else for (i = 0; r > i; i++) this._projectLatlngs(t[i], e);
        },
        _clipPoints: function() {
            if (this.options.noClip) return void (this._parts = this._rings);
            this._parts = [];
            var t, e, i, n, s, r, a, h = this._parts, l = this._renderer._bounds;
            for (t = 0, i = 0, n = this._rings.length; n > t; t++) for (a = this._rings[t], 
            e = 0, s = a.length; s - 1 > e; e++) r = o.LineUtil.clipSegment(a[e], a[e + 1], l, e, !0), 
            r && (h[i] = h[i] || [], h[i].push(r[0]), (r[1] !== a[e + 1] || e === s - 2) && (h[i].push(r[1]), 
            i++));
        },
        _simplifyPoints: function() {
            for (var t = this._parts, e = this.options.smoothFactor, i = 0, n = t.length; n > i; i++) t[i] = o.LineUtil.simplify(t[i], e);
        },
        _update: function() {
            this._map && (this._clipPoints(), this._simplifyPoints(), this._updatePath());
        },
        _updatePath: function() {
            this._renderer._updatePoly(this);
        }
    }), o.polyline = function(t, e) {
        return new o.Polyline(t, e);
    }, o.PolyUtil = {}, o.PolyUtil.clipPolygon = function(t, e, i) {
        var n, s, r, a, h, l, u, c, d, _ = [ 1, 4, 2, 8 ], m = o.LineUtil;
        for (s = 0, u = t.length; u > s; s++) t[s]._code = m._getBitCode(t[s], e);
        for (a = 0; 4 > a; a++) {
            for (c = _[a], n = [], s = 0, u = t.length, r = u - 1; u > s; r = s++) h = t[s], 
            l = t[r], h._code & c ? l._code & c || (d = m._getEdgeIntersection(l, h, c, e, i), 
            d._code = m._getBitCode(d, e), n.push(d)) : (l._code & c && (d = m._getEdgeIntersection(l, h, c, e, i), 
            d._code = m._getBitCode(d, e), n.push(d)), n.push(h));
            t = n;
        }
        return t;
    }, o.Polygon = o.Polyline.extend({
        options: {
            fill: !0
        },
        getCenter: function() {
            var t, e, i, n, o, s, r, a, h, l = this._rings[0];
            for (r = a = h = 0, t = 0, i = l.length, e = i - 1; i > t; e = t++) n = l[t], o = l[e], 
            s = n.y * o.x - o.y * n.x, a += (n.x + o.x) * s, h += (n.y + o.y) * s, r += 3 * s;
            return this._map.layerPointToLatLng([ a / r, h / r ]);
        },
        _convertLatLngs: function(t) {
            var e = o.Polyline.prototype._convertLatLngs.call(this, t), i = e.length;
            return i >= 2 && e[0] instanceof o.LatLng && e[0].equals(e[i - 1]) && e.pop(), e;
        },
        _clipPoints: function() {
            if (this.options.noClip) return void (this._parts = this._rings);
            var t = this._renderer._bounds, e = this.options.weight, i = new o.Point(e, e);
            t = new o.Bounds(t.min.subtract(i), t.max.add(i)), this._parts = [];
            for (var n, s = 0, r = this._rings.length; r > s; s++) n = o.PolyUtil.clipPolygon(this._rings[s], t, !0), 
            n.length && this._parts.push(n);
        },
        _updatePath: function() {
            this._renderer._updatePoly(this, !0);
        }
    }), o.polygon = function(t, e) {
        return new o.Polygon(t, e);
    }, o.Rectangle = o.Polygon.extend({
        initialize: function(t, e) {
            o.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(t), e);
        },
        setBounds: function(t) {
            this.setLatLngs(this._boundsToLatLngs(t));
        },
        _boundsToLatLngs: function(t) {
            return t = o.latLngBounds(t), [ t.getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast() ];
        }
    }), o.rectangle = function(t, e) {
        return new o.Rectangle(t, e);
    }, o.CircleMarker = o.Path.extend({
        options: {
            fill: !0,
            radius: 10
        },
        initialize: function(t, e) {
            o.setOptions(this, e), this._latlng = o.latLng(t), this._radius = this.options.radius;
        },
        setLatLng: function(t) {
            return this._latlng = o.latLng(t), this.redraw(), this.fire("move", {
                latlng: this._latlng
            });
        },
        getLatLng: function() {
            return this._latlng;
        },
        setRadius: function(t) {
            return this.options.radius = this._radius = t, this.redraw();
        },
        getRadius: function() {
            return this._radius;
        },
        setStyle: function(t) {
            var e = t && t.radius || this._radius;
            return o.Path.prototype.setStyle.call(this, t), this.setRadius(e), this;
        },
        _project: function() {
            this._point = this._map.latLngToLayerPoint(this._latlng), this._updateBounds();
        },
        _updateBounds: function() {
            var t = this._radius, e = this._radiusY || t, i = this._clickTolerance(), n = [ t + i, e + i ];
            this._pxBounds = new o.Bounds(this._point.subtract(n), this._point.add(n));
        },
        _update: function() {
            this._map && this._updatePath();
        },
        _updatePath: function() {
            this._renderer._updateCircle(this);
        },
        _empty: function() {
            return this._radius && !this._renderer._bounds.intersects(this._pxBounds);
        }
    }), o.circleMarker = function(t, e) {
        return new o.CircleMarker(t, e);
    }, o.Circle = o.CircleMarker.extend({
        initialize: function(t, e, i) {
            o.setOptions(this, i), this._latlng = o.latLng(t), this._mRadius = e;
        },
        setRadius: function(t) {
            return this._mRadius = t, this.redraw();
        },
        getRadius: function() {
            return this._mRadius;
        },
        getBounds: function() {
            var t = [ this._radius, this._radiusY ];
            return new o.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)), this._map.layerPointToLatLng(this._point.add(t)));
        },
        setStyle: o.Path.prototype.setStyle,
        _project: function() {
            var t = this._latlng.lng, e = this._latlng.lat, i = this._map, n = i.options.crs;
            if (n.distance === o.CRS.Earth.distance) {
                var s = Math.PI / 180, r = this._mRadius / o.CRS.Earth.R / s, a = i.project([ e + r, t ]), h = i.project([ e - r, t ]), l = a.add(h).divideBy(2), u = i.unproject(l).lat, c = Math.acos((Math.cos(r * s) - Math.sin(e * s) * Math.sin(u * s)) / (Math.cos(e * s) * Math.cos(u * s))) / s;
                this._point = l.subtract(i.getPixelOrigin()), this._radius = isNaN(c) ? 0 : Math.max(Math.round(l.x - i.project([ u, t - c ]).x), 1), 
                this._radiusY = Math.max(Math.round(l.y - a.y), 1);
            } else {
                var d = n.unproject(n.project(this._latlng).subtract([ this._mRadius, 0 ]));
                this._point = i.latLngToLayerPoint(this._latlng), this._radius = this._point.x - i.latLngToLayerPoint(d).x;
            }
            this._updateBounds();
        }
    }), o.circle = function(t, e, i) {
        return new o.Circle(t, e, i);
    }, o.SVG = o.Renderer.extend({
        _initContainer: function() {
            this._container = o.SVG.create("svg"), this._container.setAttribute("pointer-events", "none");
        },
        _update: function() {
            if (!this._map._animatingZoom || !this._bounds) {
                o.Renderer.prototype._update.call(this);
                var t = this._bounds, e = t.getSize(), i = this._container;
                o.DomUtil.setPosition(i, t.min), this._svgSize && this._svgSize.equals(e) || (this._svgSize = e, 
                i.setAttribute("width", e.x), i.setAttribute("height", e.y)), o.DomUtil.setPosition(i, t.min), 
                i.setAttribute("viewBox", [ t.min.x, t.min.y, e.x, e.y ].join(" "));
            }
        },
        _initPath: function(t) {
            var e = t._path = o.SVG.create("path");
            t.options.className && o.DomUtil.addClass(e, t.options.className), t.options.interactive && o.DomUtil.addClass(e, "leaflet-interactive"), 
            this._updateStyle(t);
        },
        _addPath: function(t) {
            this._container.appendChild(t._path), t.addInteractiveTarget(t._path);
        },
        _removePath: function(t) {
            o.DomUtil.remove(t._path), t.removeInteractiveTarget(t._path);
        },
        _updatePath: function(t) {
            t._project(), t._update();
        },
        _updateStyle: function(t) {
            var e = t._path, i = t.options;
            e && (i.stroke ? (e.setAttribute("stroke", i.color), e.setAttribute("stroke-opacity", i.opacity), 
            e.setAttribute("stroke-width", i.weight), e.setAttribute("stroke-linecap", i.lineCap), 
            e.setAttribute("stroke-linejoin", i.lineJoin), i.dashArray ? e.setAttribute("stroke-dasharray", i.dashArray) : e.removeAttribute("stroke-dasharray"), 
            i.dashOffset ? e.setAttribute("stroke-dashoffset", i.dashOffset) : e.removeAttribute("stroke-dashoffset")) : e.setAttribute("stroke", "none"), 
            i.fill ? (e.setAttribute("fill", i.fillColor || i.color), e.setAttribute("fill-opacity", i.fillOpacity), 
            e.setAttribute("fill-rule", i.fillRule || "evenodd")) : e.setAttribute("fill", "none"), 
            e.setAttribute("pointer-events", i.pointerEvents || (i.interactive ? "visiblePainted" : "none")));
        },
        _updatePoly: function(t, e) {
            this._setPath(t, o.SVG.pointsToPath(t._parts, e));
        },
        _updateCircle: function(t) {
            var e = t._point, i = t._radius, n = t._radiusY || i, o = "a" + i + "," + n + " 0 1,0 ", s = t._empty() ? "M0 0" : "M" + (e.x - i) + "," + e.y + o + 2 * i + ",0 " + o + 2 * -i + ",0 ";
            this._setPath(t, s);
        },
        _setPath: function(t, e) {
            t._path.setAttribute("d", e);
        },
        _bringToFront: function(t) {
            o.DomUtil.toFront(t._path);
        },
        _bringToBack: function(t) {
            o.DomUtil.toBack(t._path);
        }
    }), o.extend(o.SVG, {
        create: function(t) {
            return e.createElementNS("http://www.w3.org/2000/svg", t);
        },
        pointsToPath: function(t, e) {
            var i, n, s, r, a, h, l = "";
            for (i = 0, s = t.length; s > i; i++) {
                for (a = t[i], n = 0, r = a.length; r > n; n++) h = a[n], l += (n ? "L" : "M") + h.x + " " + h.y;
                l += e ? o.Browser.svg ? "z" : "x" : "";
            }
            return l || "M0 0";
        }
    }), o.Browser.svg = !(!e.createElementNS || !o.SVG.create("svg").createSVGRect), 
    o.svg = function(t) {
        return o.Browser.svg || o.Browser.vml ? new o.SVG(t) : null;
    }, o.Browser.vml = !o.Browser.svg && function() {
        try {
            var t = e.createElement("div");
            t.innerHTML = '<v:shape adj="1"/>';
            var i = t.firstChild;
            return i.style.behavior = "url(#default#VML)", i && "object" == typeof i.adj;
        } catch (n) {
            return !1;
        }
    }(), o.SVG.include(o.Browser.vml ? {
        _initContainer: function() {
            this._container = o.DomUtil.create("div", "leaflet-vml-container"), this._paths = {}, 
            this._initEvents();
        },
        _update: function() {
            this._map._animatingZoom || o.Renderer.prototype._update.call(this);
        },
        _initPath: function(t) {
            var e = t._container = o.SVG.create("shape");
            o.DomUtil.addClass(e, "leaflet-vml-shape " + (this.options.className || "")), e.coordsize = "1 1", 
            t._path = o.SVG.create("path"), e.appendChild(t._path), this._updateStyle(t);
        },
        _addPath: function(t) {
            var e = t._container;
            this._container.appendChild(e), this._paths[o.stamp(e)] = t;
        },
        _removePath: function(t) {
            var e = t._container;
            o.DomUtil.remove(e), delete this._paths[o.stamp(e)];
        },
        _updateStyle: function(t) {
            var e = t._stroke, i = t._fill, n = t.options, s = t._container;
            s.stroked = !!n.stroke, s.filled = !!n.fill, n.stroke ? (e || (e = t._stroke = o.SVG.create("stroke"), 
            s.appendChild(e)), e.weight = n.weight + "px", e.color = n.color, e.opacity = n.opacity, 
            e.dashStyle = n.dashArray ? o.Util.isArray(n.dashArray) ? n.dashArray.join(" ") : n.dashArray.replace(/( *, *)/g, " ") : "", 
            e.endcap = n.lineCap.replace("butt", "flat"), e.joinstyle = n.lineJoin) : e && (s.removeChild(e), 
            t._stroke = null), n.fill ? (i || (i = t._fill = o.SVG.create("fill"), s.appendChild(i)), 
            i.color = n.fillColor || n.color, i.opacity = n.fillOpacity) : i && (s.removeChild(i), 
            t._fill = null);
        },
        _updateCircle: function(t) {
            var e = t._point.round(), i = Math.round(t._radius), n = Math.round(t._radiusY || i);
            this._setPath(t, t._empty() ? "M0 0" : "AL " + e.x + "," + e.y + " " + i + "," + n + " 0,23592600");
        },
        _setPath: function(t, e) {
            t._path.v = e;
        },
        _bringToFront: function(t) {
            o.DomUtil.toFront(t._container);
        },
        _bringToBack: function(t) {
            o.DomUtil.toBack(t._container);
        }
    } : {}), o.Browser.vml && (o.SVG.create = function() {
        try {
            return e.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"), function(t) {
                return e.createElement("<lvml:" + t + ' class="lvml">');
            };
        } catch (t) {
            return function(t) {
                return e.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');
            };
        }
    }()), o.Canvas = o.Renderer.extend({
        onAdd: function() {
            o.Renderer.prototype.onAdd.call(this), this._layers = this._layers || {}, this._draw();
        },
        _initContainer: function() {
            var t = this._container = e.createElement("canvas");
            o.DomEvent.on(t, "mousemove", this._onMouseMove, this).on(t, "click dblclick mousedown mouseup contextmenu", this._onClick, this), 
            this._ctx = t.getContext("2d");
        },
        _update: function() {
            if (!this._map._animatingZoom || !this._bounds) {
                o.Renderer.prototype._update.call(this);
                var t = this._bounds, e = this._container, i = t.getSize(), n = o.Browser.retina ? 2 : 1;
                o.DomUtil.setPosition(e, t.min), e.width = n * i.x, e.height = n * i.y, e.style.width = i.x + "px", 
                e.style.height = i.y + "px", o.Browser.retina && this._ctx.scale(2, 2), this._ctx.translate(-t.min.x, -t.min.y);
            }
        },
        _initPath: function(t) {
            this._layers[o.stamp(t)] = t;
        },
        _addPath: o.Util.falseFn,
        _removePath: function(t) {
            t._removed = !0, this._requestRedraw(t);
        },
        _updatePath: function(t) {
            this._redrawBounds = t._pxBounds, this._draw(!0), t._project(), t._update(), this._draw(), 
            this._redrawBounds = null;
        },
        _updateStyle: function(t) {
            this._requestRedraw(t);
        },
        _requestRedraw: function(t) {
            this._map && (this._redrawBounds = this._redrawBounds || new o.Bounds(), this._redrawBounds.extend(t._pxBounds.min).extend(t._pxBounds.max), 
            this._redrawRequest = this._redrawRequest || o.Util.requestAnimFrame(this._redraw, this));
        },
        _redraw: function() {
            this._redrawRequest = null, this._draw(!0), this._draw(), this._redrawBounds = null;
        },
        _draw: function(t) {
            this._clear = t;
            var e;
            for (var i in this._layers) e = this._layers[i], (!this._redrawBounds || e._pxBounds.intersects(this._redrawBounds)) && e._updatePath(), 
            t && e._removed && (delete e._removed, delete this._layers[i]);
        },
        _updatePoly: function(t, e) {
            var i, n, o, s, r = t._parts, a = r.length, h = this._ctx;
            if (a) {
                for (h.beginPath(), i = 0; a > i; i++) {
                    for (n = 0, o = r[i].length; o > n; n++) s = r[i][n], h[n ? "lineTo" : "moveTo"](s.x, s.y);
                    e && h.closePath();
                }
                this._fillStroke(h, t);
            }
        },
        _updateCircle: function(t) {
            if (!t._empty()) {
                var e = t._point, i = this._ctx, n = t._radius, o = (t._radiusY || n) / n;
                1 !== o && (i.save(), i.scale(1, o)), i.beginPath(), i.arc(e.x, e.y / o, n, 0, 2 * Math.PI, !1), 
                1 !== o && i.restore(), this._fillStroke(i, t);
            }
        },
        _fillStroke: function(t, e) {
            var i = this._clear, n = e.options;
            t.globalCompositeOperation = i ? "destination-out" : "source-over", n.fill && (t.globalAlpha = i ? 1 : n.fillOpacity, 
            t.fillStyle = n.fillColor || n.color, t.fill(n.fillRule || "evenodd")), n.stroke && 0 !== n.weight && (t.globalAlpha = i ? 1 : n.opacity, 
            e._prevWeight = t.lineWidth = i ? e._prevWeight + 1 : n.weight, t.strokeStyle = n.color, 
            t.lineCap = n.lineCap, t.lineJoin = n.lineJoin, t.stroke());
        },
        _onClick: function(t) {
            var e = this._map.mouseEventToLayerPoint(t);
            for (var i in this._layers) this._layers[i]._containsPoint(e) && (o.DomEvent._fakeStop(t), 
            this._fireEvent(this._layers[i], t));
        },
        _onMouseMove: function(t) {
            if (this._map && !this._map._animatingZoom) {
                var e = this._map.mouseEventToLayerPoint(t);
                for (var i in this._layers) this._handleHover(this._layers[i], t, e);
            }
        },
        _handleHover: function(t, e, i) {
            t.options.interactive && (t._containsPoint(i) ? (t._mouseInside || (o.DomUtil.addClass(this._container, "leaflet-interactive"), 
            this._fireEvent(t, e, "mouseover"), t._mouseInside = !0), this._fireEvent(t, e)) : t._mouseInside && (o.DomUtil.removeClass(this._container, "leaflet-interactive"), 
            this._fireEvent(t, e, "mouseout"), t._mouseInside = !1));
        },
        _fireEvent: function(t, e, i) {
            this._map._fireDOMEvent(t, e, i || e.type);
        },
        _bringToFront: o.Util.falseFn,
        _bringToBack: o.Util.falseFn
    }), o.Browser.canvas = function() {
        return !!e.createElement("canvas").getContext;
    }(), o.canvas = function(t) {
        return o.Browser.canvas ? new o.Canvas(t) : null;
    }, o.Polyline.prototype._containsPoint = function(t, e) {
        var i, n, s, r, a, h, l = this._clickTolerance();
        if (!this._pxBounds.contains(t)) return !1;
        for (i = 0, r = this._parts.length; r > i; i++) for (h = this._parts[i], n = 0, 
        a = h.length, s = a - 1; a > n; s = n++) if ((e || 0 !== n) && o.LineUtil.pointToSegmentDistance(t, h[s], h[n]) <= l) return !0;
        return !1;
    }, o.Polygon.prototype._containsPoint = function(t) {
        var e, i, n, s, r, a, h, l, u = !1;
        if (!this._pxBounds.contains(t)) return !1;
        for (s = 0, h = this._parts.length; h > s; s++) for (e = this._parts[s], r = 0, 
        l = e.length, a = l - 1; l > r; a = r++) i = e[r], n = e[a], i.y > t.y != n.y > t.y && t.x < (n.x - i.x) * (t.y - i.y) / (n.y - i.y) + i.x && (u = !u);
        return u || o.Polyline.prototype._containsPoint.call(this, t, !0);
    }, o.CircleMarker.prototype._containsPoint = function(t) {
        return t.distanceTo(this._point) <= this._radius + this._clickTolerance();
    }, o.GeoJSON = o.FeatureGroup.extend({
        initialize: function(t, e) {
            o.setOptions(this, e), this._layers = {}, t && this.addData(t);
        },
        addData: function(t) {
            var e, i, n, s = o.Util.isArray(t) ? t : t.features;
            if (s) {
                for (e = 0, i = s.length; i > e; e++) n = s[e], (n.geometries || n.geometry || n.features || n.coordinates) && this.addData(n);
                return this;
            }
            var r = this.options;
            if (r.filter && !r.filter(t)) return this;
            var a = o.GeoJSON.geometryToLayer(t, r);
            return a.feature = o.GeoJSON.asFeature(t), a.defaultOptions = a.options, this.resetStyle(a), 
            r.onEachFeature && r.onEachFeature(t, a), this.addLayer(a);
        },
        resetStyle: function(t) {
            return t.options = t.defaultOptions, this._setLayerStyle(t, this.options.style), 
            this;
        },
        setStyle: function(t) {
            return this.eachLayer(function(e) {
                this._setLayerStyle(e, t);
            }, this);
        },
        _setLayerStyle: function(t, e) {
            "function" == typeof e && (e = e(t.feature)), t.setStyle && t.setStyle(e);
        }
    }), o.extend(o.GeoJSON, {
        geometryToLayer: function(t, e) {
            var i, n, s, r, a = "Feature" === t.type ? t.geometry : t, h = a.coordinates, l = [], u = e && e.pointToLayer, c = e && e.coordsToLatLng || this.coordsToLatLng;
            switch (a.type) {
              case "Point":
                return i = c(h), u ? u(t, i) : new o.Marker(i);

              case "MultiPoint":
                for (s = 0, r = h.length; r > s; s++) i = c(h[s]), l.push(u ? u(t, i) : new o.Marker(i));
                return new o.FeatureGroup(l);

              case "LineString":
              case "MultiLineString":
                return n = this.coordsToLatLngs(h, "LineString" === a.type ? 0 : 1, c), new o.Polyline(n, e);

              case "Polygon":
              case "MultiPolygon":
                return n = this.coordsToLatLngs(h, "Polygon" === a.type ? 1 : 2, c), new o.Polygon(n, e);

              case "GeometryCollection":
                for (s = 0, r = a.geometries.length; r > s; s++) l.push(this.geometryToLayer({
                    geometry: a.geometries[s],
                    type: "Feature",
                    properties: t.properties
                }, e));
                return new o.FeatureGroup(l);

              default:
                throw new Error("Invalid GeoJSON object.");
            }
        },
        coordsToLatLng: function(t) {
            return new o.LatLng(t[1], t[0], t[2]);
        },
        coordsToLatLngs: function(t, e, i) {
            for (var n, o = [], s = 0, r = t.length; r > s; s++) n = e ? this.coordsToLatLngs(t[s], e - 1, i) : (i || this.coordsToLatLng)(t[s]), 
            o.push(n);
            return o;
        },
        latLngToCoords: function(t) {
            return t.alt !== i ? [ t.lng, t.lat, t.alt ] : [ t.lng, t.lat ];
        },
        latLngsToCoords: function(t, e, i) {
            for (var n = [], s = 0, r = t.length; r > s; s++) n.push(e ? o.GeoJSON.latLngsToCoords(t[s], e - 1, i) : o.GeoJSON.latLngToCoords(t[s]));
            return !e && i && n.push(n[0]), n;
        },
        getFeature: function(t, e) {
            return t.feature ? o.extend({}, t.feature, {
                geometry: e
            }) : o.GeoJSON.asFeature(e);
        },
        asFeature: function(t) {
            return "Feature" === t.type ? t : {
                type: "Feature",
                properties: {},
                geometry: t
            };
        }
    });
    var r = {
        toGeoJSON: function() {
            return o.GeoJSON.getFeature(this, {
                type: "Point",
                coordinates: o.GeoJSON.latLngToCoords(this.getLatLng())
            });
        }
    };
    o.Marker.include(r), o.Circle.include(r), o.CircleMarker.include(r), o.Polyline.prototype.toGeoJSON = function() {
        var t = !this._flat(this._latlngs), e = o.GeoJSON.latLngsToCoords(this._latlngs, t ? 1 : 0);
        return o.GeoJSON.getFeature(this, {
            type: (t ? "Multi" : "") + "LineString",
            coordinates: e
        });
    }, o.Polygon.prototype.toGeoJSON = function() {
        var t = !this._flat(this._latlngs), e = t && !this._flat(this._latlngs[0]), i = o.GeoJSON.latLngsToCoords(this._latlngs, e ? 2 : t ? 1 : 0, !0);
        return t || (i = [ i ]), o.GeoJSON.getFeature(this, {
            type: (e ? "Multi" : "") + "Polygon",
            coordinates: i
        });
    }, o.LayerGroup.include({
        toMultiPoint: function() {
            var t = [];
            return this.eachLayer(function(e) {
                t.push(e.toGeoJSON().geometry.coordinates);
            }), o.GeoJSON.getFeature(this, {
                type: "MultiPoint",
                coordinates: t
            });
        },
        toGeoJSON: function() {
            var t = this.feature && this.feature.geometry && this.feature.geometry.type;
            if ("MultiPoint" === t) return this.toMultiPoint();
            var e = "GeometryCollection" === t, i = [];
            return this.eachLayer(function(t) {
                if (t.toGeoJSON) {
                    var n = t.toGeoJSON();
                    i.push(e ? n.geometry : o.GeoJSON.asFeature(n));
                }
            }), e ? o.GeoJSON.getFeature(this, {
                geometries: i,
                type: "GeometryCollection"
            }) : {
                type: "FeatureCollection",
                features: i
            };
        }
    }), o.geoJson = function(t, e) {
        return new o.GeoJSON(t, e);
    };
    var a = "_leaflet_events";
    o.DomEvent = {
        on: function(t, e, i, n) {
            if ("object" == typeof e) for (var s in e) this._on(t, s, e[s], i); else {
                e = o.Util.splitWords(e);
                for (var r = 0, a = e.length; a > r; r++) this._on(t, e[r], i, n);
            }
            return this;
        },
        off: function(t, e, i, n) {
            if ("object" == typeof e) for (var s in e) this._off(t, s, e[s], i); else {
                e = o.Util.splitWords(e);
                for (var r = 0, a = e.length; a > r; r++) this._off(t, e[r], i, n);
            }
            return this;
        },
        _on: function(e, i, n, s) {
            var r = i + o.stamp(n) + (s ? "_" + o.stamp(s) : "");
            if (e[a] && e[a][r]) return this;
            var h = function(i) {
                return n.call(s || e, i || t.event);
            }, l = h;
            return o.Browser.pointer && 0 === i.indexOf("touch") ? this.addPointerListener(e, i, h, r) : o.Browser.touch && "dblclick" === i && this.addDoubleTapListener ? this.addDoubleTapListener(e, h, r) : "addEventListener" in e ? "mousewheel" === i ? (e.addEventListener("DOMMouseScroll", h, !1), 
            e.addEventListener(i, h, !1)) : "mouseenter" === i || "mouseleave" === i ? (h = function(i) {
                i = i || t.event, o.DomEvent._checkMouse(e, i) && l(i);
            }, e.addEventListener("mouseenter" === i ? "mouseover" : "mouseout", h, !1)) : ("click" === i && o.Browser.android && (h = function(t) {
                return o.DomEvent._filterClick(t, l);
            }), e.addEventListener(i, h, !1)) : "attachEvent" in e && e.attachEvent("on" + i, h), 
            e[a] = e[a] || {}, e[a][r] = h, this;
        },
        _off: function(t, e, i, n) {
            var s = e + o.stamp(i) + (n ? "_" + o.stamp(n) : ""), r = t[a] && t[a][s];
            return r ? (o.Browser.pointer && 0 === e.indexOf("touch") ? this.removePointerListener(t, e, s) : o.Browser.touch && "dblclick" === e && this.removeDoubleTapListener ? this.removeDoubleTapListener(t, s) : "removeEventListener" in t ? "mousewheel" === e ? (t.removeEventListener("DOMMouseScroll", r, !1), 
            t.removeEventListener(e, r, !1)) : t.removeEventListener("mouseenter" === e ? "mouseover" : "mouseleave" === e ? "mouseout" : e, r, !1) : "detachEvent" in t && t.detachEvent("on" + e, r), 
            t[a][s] = null, this) : this;
        },
        stopPropagation: function(t) {
            return t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0, o.DomEvent._skipped(t), 
            this;
        },
        disableScrollPropagation: function(t) {
            return o.DomEvent.on(t, "mousewheel MozMousePixelScroll", o.DomEvent.stopPropagation);
        },
        disableClickPropagation: function(t) {
            var e = o.DomEvent.stopPropagation;
            return o.DomEvent.on(t, o.Draggable.START.join(" "), e), o.DomEvent.on(t, {
                click: o.DomEvent._fakeStop,
                dblclick: e
            });
        },
        preventDefault: function(t) {
            return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this;
        },
        stop: function(t) {
            return o.DomEvent.preventDefault(t).stopPropagation(t);
        },
        getMousePosition: function(t, e) {
            if (!e) return new o.Point(t.clientX, t.clientY);
            var i = e.getBoundingClientRect();
            return new o.Point(t.clientX - i.left - e.clientLeft, t.clientY - i.top - e.clientTop);
        },
        getWheelDelta: function(t) {
            var e = 0;
            return t.wheelDelta && (e = t.wheelDelta / 120), t.detail && (e = -t.detail / 3), 
            e;
        },
        _skipEvents: {},
        _fakeStop: function(t) {
            o.DomEvent._skipEvents[t.type] = !0;
        },
        _skipped: function(t) {
            var e = this._skipEvents[t.type];
            return this._skipEvents[t.type] = !1, e;
        },
        _checkMouse: function(t, e) {
            var i = e.relatedTarget;
            if (!i) return !0;
            try {
                for (;i && i !== t; ) i = i.parentNode;
            } catch (n) {
                return !1;
            }
            return i !== t;
        },
        _filterClick: function(t, e) {
            var i = t.timeStamp || t.originalEvent.timeStamp, n = o.DomEvent._lastClick && i - o.DomEvent._lastClick;
            return n && n > 100 && 500 > n || t.target._simulatedClick && !t._simulated ? void o.DomEvent.stop(t) : (o.DomEvent._lastClick = i, 
            void e(t));
        }
    }, o.DomEvent.addListener = o.DomEvent.on, o.DomEvent.removeListener = o.DomEvent.off, 
    o.Draggable = o.Evented.extend({
        statics: {
            START: o.Browser.touch ? [ "touchstart", "mousedown" ] : [ "mousedown" ],
            END: {
                mousedown: "mouseup",
                touchstart: "touchend",
                pointerdown: "touchend",
                MSPointerDown: "touchend"
            },
            MOVE: {
                mousedown: "mousemove",
                touchstart: "touchmove",
                pointerdown: "touchmove",
                MSPointerDown: "touchmove"
            }
        },
        initialize: function(t, e, i) {
            this._element = t, this._dragStartTarget = e || t, this._preventOutline = i;
        },
        enable: function() {
            this._enabled || (o.DomEvent.on(this._dragStartTarget, o.Draggable.START.join(" "), this._onDown, this), 
            this._enabled = !0);
        },
        disable: function() {
            this._enabled && (o.DomEvent.off(this._dragStartTarget, o.Draggable.START.join(" "), this._onDown, this), 
            this._enabled = !1, this._moved = !1);
        },
        _onDown: function(t) {
            if (this._moved = !1, !(t.shiftKey || 1 !== t.which && 0 !== t.button && !t.touches || (o.DomEvent.stopPropagation(t), 
            this._preventOutline && o.DomUtil.preventOutline(this._element), o.DomUtil.hasClass(this._element, "leaflet-zoom-anim") || (o.DomUtil.disableImageDrag(), 
            o.DomUtil.disableTextSelection(), this._moving)))) {
                this.fire("down");
                var i = t.touches ? t.touches[0] : t;
                this._startPoint = new o.Point(i.clientX, i.clientY), this._startPos = this._newPos = o.DomUtil.getPosition(this._element), 
                o.DomEvent.on(e, o.Draggable.MOVE[t.type], this._onMove, this).on(e, o.Draggable.END[t.type], this._onUp, this);
            }
        },
        _onMove: function(t) {
            if (t.touches && t.touches.length > 1) return void (this._moved = !0);
            var i = t.touches && 1 === t.touches.length ? t.touches[0] : t, n = new o.Point(i.clientX, i.clientY), s = n.subtract(this._startPoint);
            (s.x || s.y) && (o.Browser.touch && Math.abs(s.x) + Math.abs(s.y) < 3 || (o.DomEvent.preventDefault(t), 
            this._moved || (this.fire("dragstart"), this._moved = !0, this._startPos = o.DomUtil.getPosition(this._element).subtract(s), 
            o.DomUtil.addClass(e.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, 
            o.DomUtil.addClass(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(s), 
            this._moving = !0, o.Util.cancelAnimFrame(this._animRequest), this._lastEvent = t, 
            this._animRequest = o.Util.requestAnimFrame(this._updatePosition, this, !0, this._dragStartTarget)));
        },
        _updatePosition: function() {
            var t = {
                originalEvent: this._lastEvent
            };
            this.fire("predrag", t), o.DomUtil.setPosition(this._element, this._newPos), this.fire("drag", t);
        },
        _onUp: function() {
            o.DomUtil.removeClass(e.body, "leaflet-dragging"), this._lastTarget && (o.DomUtil.removeClass(this._lastTarget, "leaflet-drag-target"), 
            this._lastTarget = null);
            for (var t in o.Draggable.MOVE) o.DomEvent.off(e, o.Draggable.MOVE[t], this._onMove, this).off(e, o.Draggable.END[t], this._onUp, this);
            o.DomUtil.enableImageDrag(), o.DomUtil.enableTextSelection(), this._moved && this._moving && (o.Util.cancelAnimFrame(this._animRequest), 
            this.fire("dragend", {
                distance: this._newPos.distanceTo(this._startPos)
            })), this._moving = !1;
        }
    }), o.Handler = o.Class.extend({
        initialize: function(t) {
            this._map = t;
        },
        enable: function() {
            this._enabled || (this._enabled = !0, this.addHooks());
        },
        disable: function() {
            this._enabled && (this._enabled = !1, this.removeHooks());
        },
        enabled: function() {
            return !!this._enabled;
        }
    }), o.Map.mergeOptions({
        dragging: !0,
        inertia: !o.Browser.android23,
        inertiaDeceleration: 3400,
        inertiaMaxSpeed: 1 / 0,
        easeLinearity: .2,
        worldCopyJump: !1
    }), o.Map.Drag = o.Handler.extend({
        addHooks: function() {
            if (!this._draggable) {
                var t = this._map;
                this._draggable = new o.Draggable(t._mapPane, t._container), this._draggable.on({
                    down: this._onDown,
                    dragstart: this._onDragStart,
                    drag: this._onDrag,
                    dragend: this._onDragEnd
                }, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDrag, this), 
                t.on("viewreset", this._onViewReset, this), t.whenReady(this._onViewReset, this));
            }
            this._draggable.enable();
        },
        removeHooks: function() {
            this._draggable.disable();
        },
        moved: function() {
            return this._draggable && this._draggable._moved;
        },
        _onDown: function() {
            this._map.stop();
        },
        _onDragStart: function() {
            var t = this._map;
            t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], 
            this._times = []);
        },
        _onDrag: function(t) {
            if (this._map.options.inertia) {
                var e = this._lastTime = +new Date(), i = this._lastPos = this._draggable._absPos || this._draggable._newPos;
                this._positions.push(i), this._times.push(e), e - this._times[0] > 50 && (this._positions.shift(), 
                this._times.shift());
            }
            this._map.fire("move", t).fire("drag", t);
        },
        _onViewReset: function() {
            var t = this._map.getSize().divideBy(2), e = this._map.latLngToLayerPoint([ 0, 0 ]);
            this._initialWorldOffset = e.subtract(t).x, this._worldWidth = this._map.getPixelWorldBounds().getSize().x;
        },
        _onPreDrag: function() {
            var t = this._worldWidth, e = Math.round(t / 2), i = this._initialWorldOffset, n = this._draggable._newPos.x, o = (n - e + i) % t + e - i, s = (n + e + i) % t - e - i, r = Math.abs(o + i) < Math.abs(s + i) ? o : s;
            this._draggable._absPos = this._draggable._newPos.clone(), this._draggable._newPos.x = r;
        },
        _onDragEnd: function(t) {
            var e = this._map, i = e.options, n = !i.inertia || this._times.length < 2;
            if (e.fire("dragend", t), n) e.fire("moveend"); else {
                var s = this._lastPos.subtract(this._positions[0]), r = (this._lastTime - this._times[0]) / 1e3, a = i.easeLinearity, h = s.multiplyBy(a / r), l = h.distanceTo([ 0, 0 ]), u = Math.min(i.inertiaMaxSpeed, l), c = h.multiplyBy(u / l), d = u / (i.inertiaDeceleration * a), _ = c.multiplyBy(-d / 2).round();
                _.x && _.y ? (_ = e._limitOffset(_, e.options.maxBounds), o.Util.requestAnimFrame(function() {
                    e.panBy(_, {
                        duration: d,
                        easeLinearity: a,
                        noMoveStart: !0,
                        animate: !0
                    });
                })) : e.fire("moveend");
            }
        }
    }), o.Map.addInitHook("addHandler", "dragging", o.Map.Drag), o.Map.mergeOptions({
        doubleClickZoom: !0
    }), o.Map.DoubleClickZoom = o.Handler.extend({
        addHooks: function() {
            this._map.on("dblclick", this._onDoubleClick, this);
        },
        removeHooks: function() {
            this._map.off("dblclick", this._onDoubleClick, this);
        },
        _onDoubleClick: function(t) {
            var e = this._map, i = e.getZoom(), n = t.originalEvent.shiftKey ? Math.ceil(i) - 1 : Math.floor(i) + 1;
            "center" === e.options.doubleClickZoom ? e.setZoom(n) : e.setZoomAround(t.containerPoint, n);
        }
    }), o.Map.addInitHook("addHandler", "doubleClickZoom", o.Map.DoubleClickZoom), o.Map.mergeOptions({
        scrollWheelZoom: !0,
        wheelDebounceTime: 40
    }), o.Map.ScrollWheelZoom = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, {
                mousewheel: this._onWheelScroll,
                MozMousePixelScroll: o.DomEvent.preventDefault
            }, this), this._delta = 0;
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, {
                mousewheel: this._onWheelScroll,
                MozMousePixelScroll: o.DomEvent.preventDefault
            }, this);
        },
        _onWheelScroll: function(t) {
            var e = o.DomEvent.getWheelDelta(t), i = this._map.options.wheelDebounceTime;
            this._delta += e, this._lastMousePos = this._map.mouseEventToContainerPoint(t), 
            this._startTime || (this._startTime = +new Date());
            var n = Math.max(i - (+new Date() - this._startTime), 0);
            clearTimeout(this._timer), this._timer = setTimeout(o.bind(this._performZoom, this), n), 
            o.DomEvent.stop(t);
        },
        _performZoom: function() {
            var t = this._map, e = this._delta, i = t.getZoom();
            t.stop(), e = e > 0 ? Math.ceil(e) : Math.floor(e), e = Math.max(Math.min(e, 4), -4), 
            e = t._limitZoom(i + e) - i, this._delta = 0, this._startTime = null, e && ("center" === t.options.scrollWheelZoom ? t.setZoom(i + e) : t.setZoomAround(this._lastMousePos, i + e));
        }
    }), o.Map.addInitHook("addHandler", "scrollWheelZoom", o.Map.ScrollWheelZoom), o.extend(o.DomEvent, {
        _touchstart: o.Browser.msPointer ? "MSPointerDown" : o.Browser.pointer ? "pointerdown" : "touchstart",
        _touchend: o.Browser.msPointer ? "MSPointerUp" : o.Browser.pointer ? "pointerup" : "touchend",
        addDoubleTapListener: function(t, e, i) {
            function n(t) {
                var e;
                if (e = o.Browser.pointer ? o.DomEvent._pointersCount : t.touches.length, !(e > 1)) {
                    var i = Date.now(), n = i - (r || i);
                    a = t.touches ? t.touches[0] : t, h = n > 0 && l >= n, r = i;
                }
            }
            function s() {
                if (h) {
                    if (o.Browser.pointer) {
                        var t, i, n = {};
                        for (i in a) t = a[i], n[i] = t && t.bind ? t.bind(a) : t;
                        a = n;
                    }
                    a.type = "dblclick", e(a), r = null;
                }
            }
            var r, a, h = !1, l = 250, u = "_leaflet_", c = this._touchstart, d = this._touchend;
            return t[u + c + i] = n, t[u + d + i] = s, t.addEventListener(c, n, !1), t.addEventListener(d, s, !1), 
            this;
        },
        removeDoubleTapListener: function(t, e) {
            var i = "_leaflet_", n = t[i + this._touchend + e];
            return t.removeEventListener(this._touchstart, t[i + this._touchstart + e], !1), 
            t.removeEventListener(this._touchend, n, !1), this;
        }
    }), o.extend(o.DomEvent, {
        POINTER_DOWN: o.Browser.msPointer ? "MSPointerDown" : "pointerdown",
        POINTER_MOVE: o.Browser.msPointer ? "MSPointerMove" : "pointermove",
        POINTER_UP: o.Browser.msPointer ? "MSPointerUp" : "pointerup",
        POINTER_CANCEL: o.Browser.msPointer ? "MSPointerCancel" : "pointercancel",
        _pointers: {},
        _pointersCount: 0,
        addPointerListener: function(t, e, i, n) {
            return "touchstart" === e ? this._addPointerStart(t, i, n) : "touchmove" === e ? this._addPointerMove(t, i, n) : "touchend" === e && this._addPointerEnd(t, i, n), 
            this;
        },
        removePointerListener: function(t, e, i) {
            var n = t["_leaflet_" + e + i];
            return "touchstart" === e ? t.removeEventListener(this.POINTER_DOWN, n, !1) : "touchmove" === e ? t.removeEventListener(this.POINTER_MOVE, n, !1) : "touchend" === e && (t.removeEventListener(this.POINTER_UP, n, !1), 
            t.removeEventListener(this.POINTER_CANCEL, n, !1)), this;
        },
        _addPointerStart: function(t, i, n) {
            var s = o.bind(function(t) {
                o.DomEvent.preventDefault(t), this._handlePointer(t, i);
            }, this);
            if (t["_leaflet_touchstart" + n] = s, t.addEventListener(this.POINTER_DOWN, s, !1), 
            !this._pointerDocListener) {
                var r = o.bind(this._globalPointerUp, this);
                e.documentElement.addEventListener(this.POINTER_DOWN, o.bind(this._globalPointerDown, this), !0), 
                e.documentElement.addEventListener(this.POINTER_MOVE, o.bind(this._globalPointerMove, this), !0), 
                e.documentElement.addEventListener(this.POINTER_UP, r, !0), e.documentElement.addEventListener(this.POINTER_CANCEL, r, !0), 
                this._pointerDocListener = !0;
            }
        },
        _globalPointerDown: function(t) {
            this._pointers[t.pointerId] = t, this._pointersCount++;
        },
        _globalPointerMove: function(t) {
            this._pointers[t.pointerId] && (this._pointers[t.pointerId] = t);
        },
        _globalPointerUp: function(t) {
            delete this._pointers[t.pointerId], this._pointersCount--;
        },
        _handlePointer: function(t, e) {
            t.touches = [];
            for (var i in this._pointers) t.touches.push(this._pointers[i]);
            t.changedTouches = [ t ], e(t);
        },
        _addPointerMove: function(t, e, i) {
            var n = o.bind(function(t) {
                (t.pointerType !== t.MSPOINTER_TYPE_MOUSE && "mouse" !== t.pointerType || 0 !== t.buttons) && this._handlePointer(t, e);
            }, this);
            t["_leaflet_touchmove" + i] = n, t.addEventListener(this.POINTER_MOVE, n, !1);
        },
        _addPointerEnd: function(t, e, i) {
            var n = o.bind(function(t) {
                this._handlePointer(t, e);
            }, this);
            t["_leaflet_touchend" + i] = n, t.addEventListener(this.POINTER_UP, n, !1), t.addEventListener(this.POINTER_CANCEL, n, !1);
        }
    }), o.Map.mergeOptions({
        touchZoom: o.Browser.touch && !o.Browser.android23,
        bounceAtZoomLimits: !0
    }), o.Map.TouchZoom = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, "touchstart", this._onTouchStart, this);
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, "touchstart", this._onTouchStart, this);
        },
        _onTouchStart: function(t) {
            var i = this._map;
            if (t.touches && 2 === t.touches.length && !i._animatingZoom && !this._zooming) {
                var n = i.mouseEventToLayerPoint(t.touches[0]), s = i.mouseEventToLayerPoint(t.touches[1]), r = i._getCenterLayerPoint();
                this._startCenter = n.add(s)._divideBy(2), this._startDist = n.distanceTo(s), this._moved = !1, 
                this._zooming = !0, this._centerOffset = r.subtract(this._startCenter), i.stop(), 
                o.DomEvent.on(e, "touchmove", this._onTouchMove, this).on(e, "touchend", this._onTouchEnd, this), 
                o.DomEvent.preventDefault(t);
            }
        },
        _onTouchMove: function(t) {
            if (t.touches && 2 === t.touches.length && this._zooming) {
                var e = this._map, i = e.mouseEventToLayerPoint(t.touches[0]), n = e.mouseEventToLayerPoint(t.touches[1]);
                if (this._scale = i.distanceTo(n) / this._startDist, this._delta = i._add(n)._divideBy(2)._subtract(this._startCenter), 
                !e.options.bounceAtZoomLimits) {
                    var s = e.getScaleZoom(this._scale);
                    if (s <= e.getMinZoom() && this._scale < 1 || s >= e.getMaxZoom() && this._scale > 1) return;
                }
                this._moved || (e.fire("movestart").fire("zoomstart"), this._moved = !0), o.Util.cancelAnimFrame(this._animRequest), 
                this._animRequest = o.Util.requestAnimFrame(this._updateOnMove, this, !0, this._map._container), 
                o.DomEvent.preventDefault(t);
            }
        },
        _updateOnMove: function() {
            var t = this._map;
            this._center = "center" === t.options.touchZoom ? t.getCenter() : t.layerPointToLatLng(this._getTargetCenter()), 
            this._zoom = t.getScaleZoom(this._scale), (1 !== this._scale || 0 !== this._delta.x || 0 !== this._delta.y) && t._animateZoom(this._center, this._zoom, !1, !0);
        },
        _onTouchEnd: function() {
            if (!this._moved || !this._zooming) return void (this._zooming = !1);
            this._zooming = !1, o.Util.cancelAnimFrame(this._animRequest), o.DomEvent.off(e, "touchmove", this._onTouchMove).off(e, "touchend", this._onTouchEnd);
            var t = this._map, i = t.getZoom(), n = this._zoom - i, s = t._limitZoom(n > 0 ? Math.ceil(this._zoom) : Math.floor(this._zoom));
            t._animateZoom(this._center, s, !0, !0);
        },
        _getTargetCenter: function() {
            var t = this._centerOffset.subtract(this._delta).divideBy(this._scale);
            return this._startCenter.add(t);
        }
    }), o.Map.addInitHook("addHandler", "touchZoom", o.Map.TouchZoom), o.Map.mergeOptions({
        tap: !0,
        tapTolerance: 15
    }), o.Map.Tap = o.Handler.extend({
        addHooks: function() {
            o.DomEvent.on(this._map._container, "touchstart", this._onDown, this);
        },
        removeHooks: function() {
            o.DomEvent.off(this._map._container, "touchstart", this._onDown, this);
        },
        _onDown: function(t) {
            if (t.touches) {
                if (o.DomEvent.preventDefault(t), this._fireClick = !0, t.touches.length > 1) return this._fireClick = !1, 
                void clearTimeout(this._holdTimeout);
                var i = t.touches[0], n = i.target;
                this._startPos = this._newPos = new o.Point(i.clientX, i.clientY), n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.addClass(n, "leaflet-active"), 
                this._holdTimeout = setTimeout(o.bind(function() {
                    this._isTapValid() && (this._fireClick = !1, this._onUp(), this._simulateEvent("contextmenu", i));
                }, this), 1e3), this._simulateEvent("mousedown", i), o.DomEvent.on(e, {
                    touchmove: this._onMove,
                    touchend: this._onUp
                }, this);
            }
        },
        _onUp: function(t) {
            if (clearTimeout(this._holdTimeout), o.DomEvent.off(e, {
                touchmove: this._onMove,
                touchend: this._onUp
            }, this), this._fireClick && t && t.changedTouches) {
                var i = t.changedTouches[0], n = i.target;
                n && n.tagName && "a" === n.tagName.toLowerCase() && o.DomUtil.removeClass(n, "leaflet-active"), 
                this._simulateEvent("mouseup", i), this._isTapValid() && this._simulateEvent("click", i);
            }
        },
        _isTapValid: function() {
            return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;
        },
        _onMove: function(t) {
            var e = t.touches[0];
            this._newPos = new o.Point(e.clientX, e.clientY);
        },
        _simulateEvent: function(i, n) {
            var o = e.createEvent("MouseEvents");
            o._simulated = !0, n.target._simulatedClick = !0, o.initMouseEvent(i, !0, !0, t, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null), 
            n.target.dispatchEvent(o);
        }
    }), o.Browser.touch && !o.Browser.pointer && o.Map.addInitHook("addHandler", "tap", o.Map.Tap), 
    o.Map.mergeOptions({
        boxZoom: !0
    }), o.Map.BoxZoom = o.Handler.extend({
        initialize: function(t) {
            this._map = t, this._container = t._container, this._pane = t._panes.overlayPane;
        },
        addHooks: function() {
            o.DomEvent.on(this._container, "mousedown", this._onMouseDown, this);
        },
        removeHooks: function() {
            o.DomEvent.off(this._container, "mousedown", this._onMouseDown, this);
        },
        moved: function() {
            return this._moved;
        },
        _onMouseDown: function(t) {
            return !t.shiftKey || 1 !== t.which && 0 !== t.button ? !1 : (this._moved = !1, 
            o.DomUtil.disableTextSelection(), o.DomUtil.disableImageDrag(), this._startPoint = this._map.mouseEventToContainerPoint(t), 
            void o.DomEvent.on(e, {
                contextmenu: o.DomEvent.stop,
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp,
                keydown: this._onKeyDown
            }, this));
        },
        _onMouseMove: function(t) {
            this._moved || (this._moved = !0, this._box = o.DomUtil.create("div", "leaflet-zoom-box", this._container), 
            o.DomUtil.addClass(this._container, "leaflet-crosshair"), this._map.fire("boxzoomstart")), 
            this._point = this._map.mouseEventToContainerPoint(t);
            var e = new o.Bounds(this._point, this._startPoint), i = e.getSize();
            o.DomUtil.setPosition(this._box, e.min), this._box.style.width = i.x + "px", this._box.style.height = i.y + "px";
        },
        _finish: function() {
            this._moved && (o.DomUtil.remove(this._box), o.DomUtil.removeClass(this._container, "leaflet-crosshair")), 
            o.DomUtil.enableTextSelection(), o.DomUtil.enableImageDrag(), o.DomEvent.off(e, {
                contextmenu: o.DomEvent.stop,
                mousemove: this._onMouseMove,
                mouseup: this._onMouseUp,
                keydown: this._onKeyDown
            }, this);
        },
        _onMouseUp: function(t) {
            if ((1 === t.which || 0 === t.button) && (this._finish(), this._moved)) {
                var e = new o.LatLngBounds(this._map.containerPointToLatLng(this._startPoint), this._map.containerPointToLatLng(this._point));
                this._map.fitBounds(e).fire("boxzoomend", {
                    boxZoomBounds: e
                });
            }
        },
        _onKeyDown: function(t) {
            27 === t.keyCode && this._finish();
        }
    }), o.Map.addInitHook("addHandler", "boxZoom", o.Map.BoxZoom), o.Map.mergeOptions({
        keyboard: !0,
        keyboardPanOffset: 80,
        keyboardZoomOffset: 1
    }), o.Map.Keyboard = o.Handler.extend({
        keyCodes: {
            left: [ 37 ],
            right: [ 39 ],
            down: [ 40 ],
            up: [ 38 ],
            zoomIn: [ 187, 107, 61, 171 ],
            zoomOut: [ 189, 109, 173 ]
        },
        initialize: function(t) {
            this._map = t, this._setPanOffset(t.options.keyboardPanOffset), this._setZoomOffset(t.options.keyboardZoomOffset);
        },
        addHooks: function() {
            var t = this._map._container;
            -1 === t.tabIndex && (t.tabIndex = "0"), o.DomEvent.on(t, {
                focus: this._onFocus,
                blur: this._onBlur,
                mousedown: this._onMouseDown
            }, this), this._map.on({
                focus: this._addHooks,
                blur: this._removeHooks
            }, this);
        },
        removeHooks: function() {
            this._removeHooks(), o.DomEvent.off(this._map._container, {
                focus: this._onFocus,
                blur: this._onBlur,
                mousedown: this._onMouseDown
            }, this), this._map.off({
                focus: this._addHooks,
                blur: this._removeHooks
            }, this);
        },
        _onMouseDown: function() {
            if (!this._focused) {
                var i = e.body, n = e.documentElement, o = i.scrollTop || n.scrollTop, s = i.scrollLeft || n.scrollLeft;
                this._map._container.focus(), t.scrollTo(s, o);
            }
        },
        _onFocus: function() {
            this._focused = !0, this._map.fire("focus");
        },
        _onBlur: function() {
            this._focused = !1, this._map.fire("blur");
        },
        _setPanOffset: function(t) {
            var e, i, n = this._panKeys = {}, o = this.keyCodes;
            for (e = 0, i = o.left.length; i > e; e++) n[o.left[e]] = [ -1 * t, 0 ];
            for (e = 0, i = o.right.length; i > e; e++) n[o.right[e]] = [ t, 0 ];
            for (e = 0, i = o.down.length; i > e; e++) n[o.down[e]] = [ 0, t ];
            for (e = 0, i = o.up.length; i > e; e++) n[o.up[e]] = [ 0, -1 * t ];
        },
        _setZoomOffset: function(t) {
            var e, i, n = this._zoomKeys = {}, o = this.keyCodes;
            for (e = 0, i = o.zoomIn.length; i > e; e++) n[o.zoomIn[e]] = t;
            for (e = 0, i = o.zoomOut.length; i > e; e++) n[o.zoomOut[e]] = -t;
        },
        _addHooks: function() {
            o.DomEvent.on(e, "keydown", this._onKeyDown, this);
        },
        _removeHooks: function() {
            o.DomEvent.off(e, "keydown", this._onKeyDown, this);
        },
        _onKeyDown: function(t) {
            if (!(t.altKey || t.ctrlKey || t.metaKey)) {
                var e = t.keyCode, i = this._map;
                if (e in this._panKeys) {
                    if (i._panAnim && i._panAnim._inProgress) return;
                    i.panBy(this._panKeys[e]), i.options.maxBounds && i.panInsideBounds(i.options.maxBounds);
                } else if (e in this._zoomKeys) i.setZoom(i.getZoom() + (t.shiftKey ? 3 : 1) * this._zoomKeys[e]); else {
                    if (27 !== e) return;
                    i.closePopup();
                }
                o.DomEvent.stop(t);
            }
        }
    }), o.Map.addInitHook("addHandler", "keyboard", o.Map.Keyboard), o.Handler.MarkerDrag = o.Handler.extend({
        initialize: function(t) {
            this._marker = t;
        },
        addHooks: function() {
            var t = this._marker._icon;
            this._draggable || (this._draggable = new o.Draggable(t, t, !0)), this._draggable.on({
                dragstart: this._onDragStart,
                drag: this._onDrag,
                dragend: this._onDragEnd
            }, this).enable(), o.DomUtil.addClass(t, "leaflet-marker-draggable");
        },
        removeHooks: function() {
            this._draggable.off({
                dragstart: this._onDragStart,
                drag: this._onDrag,
                dragend: this._onDragEnd
            }, this).disable(), this._marker._icon && o.DomUtil.removeClass(this._marker._icon, "leaflet-marker-draggable");
        },
        moved: function() {
            return this._draggable && this._draggable._moved;
        },
        _onDragStart: function() {
            this._marker.closePopup().fire("movestart").fire("dragstart");
        },
        _onDrag: function(t) {
            var e = this._marker, i = e._shadow, n = o.DomUtil.getPosition(e._icon), s = e._map.layerPointToLatLng(n);
            i && o.DomUtil.setPosition(i, n), e._latlng = s, t.latlng = s, e.fire("move", t).fire("drag", t);
        },
        _onDragEnd: function(t) {
            this._marker.fire("moveend").fire("dragend", t);
        }
    }), o.Control = o.Class.extend({
        options: {
            position: "topright"
        },
        initialize: function(t) {
            o.setOptions(this, t);
        },
        getPosition: function() {
            return this.options.position;
        },
        setPosition: function(t) {
            var e = this._map;
            return e && e.removeControl(this), this.options.position = t, e && e.addControl(this), 
            this;
        },
        getContainer: function() {
            return this._container;
        },
        addTo: function(t) {
            this.remove(), this._map = t;
            var e = this._container = this.onAdd(t), i = this.getPosition(), n = t._controlCorners[i];
            return o.DomUtil.addClass(e, "leaflet-control"), -1 !== i.indexOf("bottom") ? n.insertBefore(e, n.firstChild) : n.appendChild(e), 
            this;
        },
        remove: function() {
            return this._map ? (o.DomUtil.remove(this._container), this.onRemove && this.onRemove(this._map), 
            this._map = null, this) : this;
        },
        _refocusOnMap: function(t) {
            this._map && t && t.screenX > 0 && t.screenY > 0 && this._map.getContainer().focus();
        }
    }), o.control = function(t) {
        return new o.Control(t);
    }, o.Map.include({
        addControl: function(t) {
            return t.addTo(this), this;
        },
        removeControl: function(t) {
            return t.remove(), this;
        },
        _initControlPos: function() {
            function t(t, s) {
                var r = i + t + " " + i + s;
                e[t + s] = o.DomUtil.create("div", r, n);
            }
            var e = this._controlCorners = {}, i = "leaflet-", n = this._controlContainer = o.DomUtil.create("div", i + "control-container", this._container);
            t("top", "left"), t("top", "right"), t("bottom", "left"), t("bottom", "right");
        },
        _clearControlPos: function() {
            o.DomUtil.remove(this._controlContainer);
        }
    }), o.Control.Zoom = o.Control.extend({
        options: {
            position: "topleft",
            zoomInText: "+",
            zoomInTitle: "Zoom in",
            zoomOutText: "-",
            zoomOutTitle: "Zoom out"
        },
        onAdd: function(t) {
            var e = "leaflet-control-zoom", i = o.DomUtil.create("div", e + " leaflet-bar"), n = this.options;
            return this._zoomInButton = this._createButton(n.zoomInText, n.zoomInTitle, e + "-in", i, this._zoomIn), 
            this._zoomOutButton = this._createButton(n.zoomOutText, n.zoomOutTitle, e + "-out", i, this._zoomOut), 
            this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), 
            i;
        },
        onRemove: function(t) {
            t.off("zoomend zoomlevelschange", this._updateDisabled, this);
        },
        disable: function() {
            return this._disabled = !0, this._updateDisabled(), this;
        },
        enable: function() {
            return this._disabled = !1, this._updateDisabled(), this;
        },
        _zoomIn: function(t) {
            this._disabled || this._map.zoomIn(t.shiftKey ? 3 : 1);
        },
        _zoomOut: function(t) {
            this._disabled || this._map.zoomOut(t.shiftKey ? 3 : 1);
        },
        _createButton: function(t, e, i, n, s) {
            var r = o.DomUtil.create("a", i, n);
            return r.innerHTML = t, r.href = "#", r.title = e, o.DomEvent.on(r, "mousedown dblclick", o.DomEvent.stopPropagation).on(r, "click", o.DomEvent.stop).on(r, "click", s, this).on(r, "click", this._refocusOnMap, this), 
            r;
        },
        _updateDisabled: function() {
            var t = this._map, e = "leaflet-disabled";
            o.DomUtil.removeClass(this._zoomInButton, e), o.DomUtil.removeClass(this._zoomOutButton, e), 
            (this._disabled || t._zoom === t.getMinZoom()) && o.DomUtil.addClass(this._zoomOutButton, e), 
            (this._disabled || t._zoom === t.getMaxZoom()) && o.DomUtil.addClass(this._zoomInButton, e);
        }
    }), o.Map.mergeOptions({
        zoomControl: !0
    }), o.Map.addInitHook(function() {
        this.options.zoomControl && (this.zoomControl = new o.Control.Zoom(), this.addControl(this.zoomControl));
    }), o.control.zoom = function(t) {
        return new o.Control.Zoom(t);
    }, o.Control.Attribution = o.Control.extend({
        options: {
            position: "bottomright",
            prefix: '<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'
        },
        initialize: function(t) {
            o.setOptions(this, t), this._attributions = {};
        },
        onAdd: function(t) {
            this._container = o.DomUtil.create("div", "leaflet-control-attribution"), o.DomEvent && o.DomEvent.disableClickPropagation(this._container);
            for (var e in t._layers) t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution());
            return this._update(), this._container;
        },
        setPrefix: function(t) {
            return this.options.prefix = t, this._update(), this;
        },
        addAttribution: function(t) {
            return t ? (this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++, 
            this._update(), this) : this;
        },
        removeAttribution: function(t) {
            return t ? (this._attributions[t] && (this._attributions[t]--, this._update()), 
            this) : this;
        },
        _update: function() {
            if (this._map) {
                var t = [];
                for (var e in this._attributions) this._attributions[e] && t.push(e);
                var i = [];
                this.options.prefix && i.push(this.options.prefix), t.length && i.push(t.join(", ")), 
                this._container.innerHTML = i.join(" | ");
            }
        }
    }), o.Map.mergeOptions({
        attributionControl: !0
    }), o.Map.addInitHook(function() {
        this.options.attributionControl && (this.attributionControl = new o.Control.Attribution().addTo(this));
    }), o.control.attribution = function(t) {
        return new o.Control.Attribution(t);
    }, o.Control.Scale = o.Control.extend({
        options: {
            position: "bottomleft",
            maxWidth: 100,
            metric: !0,
            imperial: !0
        },
        onAdd: function(t) {
            var e = "leaflet-control-scale", i = o.DomUtil.create("div", e), n = this.options;
            return this._addScales(n, e + "-line", i), t.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), 
            t.whenReady(this._update, this), i;
        },
        onRemove: function(t) {
            t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this);
        },
        _addScales: function(t, e, i) {
            t.metric && (this._mScale = o.DomUtil.create("div", e, i)), t.imperial && (this._iScale = o.DomUtil.create("div", e, i));
        },
        _update: function() {
            var t = this._map, e = t.getSize().y / 2, i = o.CRS.Earth.distance(t.containerPointToLatLng([ 0, e ]), t.containerPointToLatLng([ this.options.maxWidth, e ]));
            this._updateScales(i);
        },
        _updateScales: function(t) {
            this.options.metric && t && this._updateMetric(t), this.options.imperial && t && this._updateImperial(t);
        },
        _updateMetric: function(t) {
            var e = this._getRoundNum(t), i = 1e3 > e ? e + " m" : e / 1e3 + " km";
            this._updateScale(this._mScale, i, e / t);
        },
        _updateImperial: function(t) {
            var e, i, n, o = 3.2808399 * t;
            o > 5280 ? (e = o / 5280, i = this._getRoundNum(e), this._updateScale(this._iScale, i + " mi", i / e)) : (n = this._getRoundNum(o), 
            this._updateScale(this._iScale, n + " ft", n / o));
        },
        _updateScale: function(t, e, i) {
            t.style.width = Math.round(this.options.maxWidth * i) + "px", t.innerHTML = e;
        },
        _getRoundNum: function(t) {
            var e = Math.pow(10, (Math.floor(t) + "").length - 1), i = t / e;
            return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : 1, e * i;
        }
    }), o.control.scale = function(t) {
        return new o.Control.Scale(t);
    }, o.Control.Layers = o.Control.extend({
        options: {
            collapsed: !0,
            position: "topright",
            autoZIndex: !0,
            hideSingleBase: !1
        },
        initialize: function(t, e, i) {
            o.setOptions(this, i), this._layers = {}, this._lastZIndex = 0, this._handlingClick = !1;
            for (var n in t) this._addLayer(t[n], n);
            for (n in e) this._addLayer(e[n], n, !0);
        },
        onAdd: function() {
            return this._initLayout(), this._update(), this._container;
        },
        addBaseLayer: function(t, e) {
            return this._addLayer(t, e), this._update();
        },
        addOverlay: function(t, e) {
            return this._addLayer(t, e, !0), this._update();
        },
        removeLayer: function(t) {
            return t.off("add remove", this._onLayerChange, this), delete this._layers[o.stamp(t)], 
            this._update();
        },
        _initLayout: function() {
            var t = "leaflet-control-layers", e = this._container = o.DomUtil.create("div", t);
            e.setAttribute("aria-haspopup", !0), o.Browser.touch ? o.DomEvent.on(e, "click", o.DomEvent.stopPropagation) : o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);
            var i = this._form = o.DomUtil.create("form", t + "-list");
            if (this.options.collapsed) {
                o.Browser.android || o.DomEvent.on(e, {
                    mouseenter: this._expand,
                    mouseleave: this._collapse
                }, this);
                var n = this._layersLink = o.DomUtil.create("a", t + "-toggle", e);
                n.href = "#", n.title = "Layers", o.Browser.touch ? o.DomEvent.on(n, "click", o.DomEvent.stop).on(n, "click", this._expand, this) : o.DomEvent.on(n, "focus", this._expand, this), 
                o.DomEvent.on(i, "click", function() {
                    setTimeout(o.bind(this._onInputClick, this), 0);
                }, this), this._map.on("click", this._collapse, this);
            } else this._expand();
            this._baseLayersList = o.DomUtil.create("div", t + "-base", i), this._separator = o.DomUtil.create("div", t + "-separator", i), 
            this._overlaysList = o.DomUtil.create("div", t + "-overlays", i), e.appendChild(i);
        },
        _addLayer: function(t, e, i) {
            t.on("add remove", this._onLayerChange, this);
            var n = o.stamp(t);
            this._layers[n] = {
                layer: t,
                name: e,
                overlay: i
            }, this.options.autoZIndex && t.setZIndex && (this._lastZIndex++, t.setZIndex(this._lastZIndex));
        },
        _update: function() {
            if (!this._container) return this;
            o.DomUtil.empty(this._baseLayersList), o.DomUtil.empty(this._overlaysList);
            var t, e, i, n, s = 0;
            for (i in this._layers) n = this._layers[i], this._addItem(n), e = e || n.overlay, 
            t = t || !n.overlay, s += n.overlay ? 0 : 1;
            return this.options.hideSingleBase && (t = t && s > 1, this._baseLayersList.style.display = t ? "" : "none"), 
            this._separator.style.display = e && t ? "" : "none", this;
        },
        _onLayerChange: function(t) {
            this._handlingClick || this._update();
            var e = this._layers[o.stamp(t.target)].overlay, i = e ? "add" === t.type ? "overlayadd" : "overlayremove" : "add" === t.type ? "baselayerchange" : null;
            i && this._map.fire(i, t.target);
        },
        _createRadioElement: function(t, i) {
            var n = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"' + (i ? ' checked="checked"' : "") + "/>", o = e.createElement("div");
            return o.innerHTML = n, o.firstChild;
        },
        _addItem: function(t) {
            var i, n = e.createElement("label"), s = this._map.hasLayer(t.layer);
            t.overlay ? (i = e.createElement("input"), i.type = "checkbox", i.className = "leaflet-control-layers-selector", 
            i.defaultChecked = s) : i = this._createRadioElement("leaflet-base-layers", s), 
            i.layerId = o.stamp(t.layer), o.DomEvent.on(i, "click", this._onInputClick, this);
            var r = e.createElement("span");
            r.innerHTML = " " + t.name, n.appendChild(i), n.appendChild(r);
            var a = t.overlay ? this._overlaysList : this._baseLayersList;
            return a.appendChild(n), n;
        },
        _onInputClick: function() {
            var t, e, i, n = this._form.getElementsByTagName("input"), o = [], s = [];
            this._handlingClick = !0;
            for (var r = 0, a = n.length; a > r; r++) t = n[r], e = this._layers[t.layerId].layer, 
            i = this._map.hasLayer(e), t.checked && !i ? o.push(e) : !t.checked && i && s.push(e);
            for (r = 0; r < s.length; r++) this._map.removeLayer(s[r]);
            for (r = 0; r < o.length; r++) this._map.addLayer(o[r]);
            this._handlingClick = !1, this._refocusOnMap();
        },
        _expand: function() {
            o.DomUtil.addClass(this._container, "leaflet-control-layers-expanded");
        },
        _collapse: function() {
            o.DomUtil.removeClass(this._container, "leaflet-control-layers-expanded");
        }
    }), o.control.layers = function(t, e, i) {
        return new o.Control.Layers(t, e, i);
    }, o.PosAnimation = o.Evented.extend({
        run: function(t, e, i, n) {
            this.stop(), this._el = t, this._inProgress = !0, this._duration = i || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), 
            this._startPos = o.DomUtil.getPosition(t), this._offset = e.subtract(this._startPos), 
            this._startTime = +new Date(), this.fire("start"), this._animate();
        },
        stop: function() {
            this._inProgress && (this._step(!0), this._complete());
        },
        _animate: function() {
            this._animId = o.Util.requestAnimFrame(this._animate, this), this._step();
        },
        _step: function(t) {
            var e = +new Date() - this._startTime, i = 1e3 * this._duration;
            i > e ? this._runFrame(this._easeOut(e / i), t) : (this._runFrame(1), this._complete());
        },
        _runFrame: function(t, e) {
            var i = this._startPos.add(this._offset.multiplyBy(t));
            e && i._round(), o.DomUtil.setPosition(this._el, i), this.fire("step");
        },
        _complete: function() {
            o.Util.cancelAnimFrame(this._animId), this._inProgress = !1, this.fire("end");
        },
        _easeOut: function(t) {
            return 1 - Math.pow(1 - t, this._easeOutPower);
        }
    }), o.Map.include({
        setView: function(t, e, n) {
            if (e = e === i ? this._zoom : this._limitZoom(e), t = this._limitCenter(o.latLng(t), e, this.options.maxBounds), 
            n = n || {}, this.stop(), this._loaded && !n.reset && n !== !0) {
                n.animate !== i && (n.zoom = o.extend({
                    animate: n.animate
                }, n.zoom), n.pan = o.extend({
                    animate: n.animate
                }, n.pan));
                var s = this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, n.zoom) : this._tryAnimatedPan(t, n.pan);
                if (s) return clearTimeout(this._sizeTimer), this;
            }
            return this._resetView(t, e), this;
        },
        panBy: function(t, e) {
            if (t = o.point(t).round(), e = e || {}, !t.x && !t.y) return this;
            if (e.animate !== !0 && !this.getSize().contains(t)) return this._resetView(this.unproject(this.project(this.getCenter()).add(t)), this.getZoom());
            if (this._panAnim || (this._panAnim = new o.PosAnimation(), this._panAnim.on({
                step: this._onPanTransitionStep,
                end: this._onPanTransitionEnd
            }, this)), e.noMoveStart || this.fire("movestart"), e.animate !== !1) {
                o.DomUtil.addClass(this._mapPane, "leaflet-pan-anim");
                var i = this._getMapPanePos().subtract(t);
                this._panAnim.run(this._mapPane, i, e.duration || .25, e.easeLinearity);
            } else this._rawPanBy(t), this.fire("move").fire("moveend");
            return this;
        },
        _onPanTransitionStep: function() {
            this.fire("move");
        },
        _onPanTransitionEnd: function() {
            o.DomUtil.removeClass(this._mapPane, "leaflet-pan-anim"), this.fire("moveend");
        },
        _tryAnimatedPan: function(t, e) {
            var i = this._getCenterOffset(t)._floor();
            return (e && e.animate) === !0 || this.getSize().contains(i) ? (this.panBy(i, e), 
            (e && e.animate) !== !1) : !1;
        }
    }), o.Map.mergeOptions({
        zoomAnimation: !0,
        zoomAnimationThreshold: 4
    });
    var h = o.DomUtil.TRANSITION && o.Browser.any3d && !o.Browser.mobileOpera;
    h && o.Map.addInitHook(function() {
        this._zoomAnimated = this.options.zoomAnimation, this._zoomAnimated && (this._createAnimProxy(), 
        o.DomEvent.on(this._proxy, o.DomUtil.TRANSITION_END, this._catchTransitionEnd, this));
    }), o.Map.include(h ? {
        _createAnimProxy: function() {
            var t = this._proxy = o.DomUtil.create("div", "leaflet-proxy leaflet-zoom-animated");
            this._panes.mapPane.appendChild(t), this.on("zoomanim", function(e) {
                var i = o.DomUtil.TRANSFORM, n = t.style[i];
                o.DomUtil.setTransform(t, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1)), 
                n === t.style[i] && this._animatingZoom && this._onZoomTransitionEnd();
            }, this), this.on("load moveend", function() {
                var e = this.getCenter(), i = this.getZoom();
                o.DomUtil.setTransform(t, this.project(e, i), this.getZoomScale(i, 1));
            }, this);
        },
        _catchTransitionEnd: function(t) {
            this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd();
        },
        _nothingToAnimate: function() {
            return !this._container.getElementsByClassName("leaflet-zoom-animated").length;
        },
        _tryAnimatedZoom: function(t, e, i) {
            if (this._animatingZoom) return !0;
            if (i = i || {}, !this._zoomAnimated || i.animate === !1 || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold) return !1;
            var n = this.getZoomScale(e), s = this._getCenterOffset(t)._divideBy(1 - 1 / n);
            return i.animate === !0 || this.getSize().contains(s) ? (o.Util.requestAnimFrame(function() {
                this.fire("movestart").fire("zoomstart")._animateZoom(t, e, !0);
            }, this), !0) : !1;
        },
        _animateZoom: function(t, e, i, n) {
            i && (this._animatingZoom = !0, this._animateToCenter = t, this._animateToZoom = e, 
            o.DomUtil.addClass(this._mapPane, "leaflet-zoom-anim")), this.fire("zoomanim", {
                center: t,
                zoom: e,
                scale: this.getZoomScale(e),
                origin: this.latLngToLayerPoint(t),
                offset: this._getCenterOffset(t).multiplyBy(-1),
                noUpdate: n
            });
        },
        _onZoomTransitionEnd: function() {
            this._animatingZoom = !1, o.DomUtil.removeClass(this._mapPane, "leaflet-zoom-anim"), 
            this._resetView(this._animateToCenter, this._animateToZoom, !0, !0);
        }
    } : {}), o.Map.include({
        flyTo: function(t, e) {
            function n(t) {
                var e = (g * g - f * f + (t ? -1 : 1) * P * P * v * v) / (2 * (t ? g : f) * P * v);
                return Math.log(Math.sqrt(e * e + 1) - e);
            }
            function s(t) {
                return (Math.exp(t) - Math.exp(-t)) / 2;
            }
            function r(t) {
                return (Math.exp(t) + Math.exp(-t)) / 2;
            }
            function a(t) {
                return s(t) / r(t);
            }
            function h(t) {
                return f * (r(L) / r(L + y * t));
            }
            function l(t) {
                return f * (r(L) * a(L + y * t) - s(L)) / P;
            }
            function u(t) {
                return 1 - Math.pow(1 - t, 1.5);
            }
            function c() {
                var i = (Date.now() - x) / w, n = u(i) * b;
                1 >= i ? (this._flyToFrame = o.Util.requestAnimFrame(c, this), this._resetView(this.unproject(d.add(_.subtract(d).multiplyBy(l(n) / v)), p), this.getScaleZoom(f / h(n), p), !0, !0)) : this._resetView(t, e, !0, !0);
            }
            this.stop();
            var d = this.project(this.getCenter()), _ = this.project(t), m = this.getSize(), p = this._zoom;
            t = o.latLng(t), e = e === i ? p : e;
            var f = Math.max(m.x, m.y), g = f * this.getZoomScale(p, e), v = _.distanceTo(d), y = 1.42, P = y * y, L = n(0), x = Date.now(), b = (n(1) - L) / y, w = 1e3 * b * .8;
            this.fire("zoomstart"), c.call(this);
        }
    }), o.Map.include({
        _defaultLocateOptions: {
            timeout: 1e4,
            watch: !1
        },
        locate: function(t) {
            if (t = this._locateOptions = o.extend({}, this._defaultLocateOptions, t), !navigator.geolocation) return this._handleGeolocationError({
                code: 0,
                message: "Geolocation not supported."
            }), this;
            var e = o.bind(this._handleGeolocationResponse, this), i = o.bind(this._handleGeolocationError, this);
            return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, i, t) : navigator.geolocation.getCurrentPosition(e, i, t), 
            this;
        },
        stopLocate: function() {
            return navigator.geolocation && navigator.geolocation.clearWatch(this._locationWatchId), 
            this._locateOptions && (this._locateOptions.setView = !1), this;
        },
        _handleGeolocationError: function(t) {
            var e = t.code, i = t.message || (1 === e ? "permission denied" : 2 === e ? "position unavailable" : "timeout");
            this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", {
                code: e,
                message: "Geolocation error: " + i + "."
            });
        },
        _handleGeolocationResponse: function(t) {
            var e = t.coords.latitude, i = t.coords.longitude, n = new o.LatLng(e, i), s = n.toBounds(t.coords.accuracy), r = this._locateOptions;
            if (r.setView) {
                var a = this.getBoundsZoom(s);
                this.setView(n, r.maxZoom ? Math.min(a, r.maxZoom) : a);
            }
            var h = {
                latlng: n,
                bounds: s,
                timestamp: t.timestamp
            };
            for (var l in t.coords) "number" == typeof t.coords[l] && (h[l] = t.coords[l]);
            this.fire("locationfound", h);
        }
    });
}(window, document), function(window) {
    var HAS_HASHCHANGE = function() {
        var doc_mode = window.documentMode;
        return "onhashchange" in window && (void 0 === doc_mode || doc_mode > 7);
    }();
    L.Hash = function(map) {
        this.onHashChange = L.Util.bind(this.onHashChange, this), map && this.init(map);
    }, L.Hash.parseHash = function(hash) {
        var params = getHashParams();
        if ("undefined" != typeof params.zoom || "undefined" != typeof params.lat || "undefined" != typeof params.lon) {
            var zoom = parseInt(params.zoom.values, 10), lat = parseFloat(params.lat.values), lon = parseFloat(params.lon.values);
            return isNaN(zoom) || isNaN(lat) || isNaN(lon) ? !1 : {
                center: {
                    lat: lat,
                    lon: lon
                },
                zoom: zoom,
                params: params
            };
        }
        return !1;
    }, L.Hash.formatHash = function(map) {
        var center = map.getCenter(), zoom = map.getZoom(), precision = Math.max(0, Math.ceil(Math.log(zoom) / Math.LN2)), returnObj = {
            zoom: {
                values: zoom,
                comparator: "="
            },
            lat: {
                values: center.lat.toFixed(precision),
                comparator: "="
            },
            lon: {
                values: center.lng.toFixed(precision),
                comparator: "="
            }
        };
        return returnObj;
    }, L.Hash.prototype = {
        map: null,
        lastHash: null,
        parseHash: L.Hash.parseHash,
        formatHash: L.Hash.formatHash,
        init: function(map) {
            this.map = map, this.lastHash = null, this.onHashChange(), this.isListening || this.startListening();
        },
        removeFrom: function(map) {
            this.changeTimeout && clearTimeout(this.changeTimeout), this.isListening && this.stopListening(), 
            this.map = null;
        },
        onMapMove: function() {
            var hash;
            if (this.movingMap || !this.map._loaded) return !1;
            if (this.parseHash(hash)) {
                hash = getHashParams();
                var newParams = this.formatHash(this.map);
                _.each(newParams, function(val, key) {
                    hash[key].values = val.values, hash[key].comparator = "=";
                }), updateUrlHash(hash);
            } else hash = getHashParams(), _.extend(hash, this.formatHash(this.map)), updateUrlHash(hash);
            this.lastHash = hash;
        },
        movingMap: !1,
        update: function() {
            if (_.isEqual(hash, this.lastHash)) return !1;
            var parsed = this.parseHash(hash);
            parsed ? (this.movingMap = !0, this.map.setView(parsed.center, parsed.zoom), this.movingMap = !1) : this.onMapMove(this.map);
        },
        changeDefer: 200,
        changeTimeout: null,
        onHashChange: function() {
            if (!this.changeTimeout) {
                var that = this;
                this.changeTimeout = setTimeout(function() {
                    that.update(), that.changeTimeout = null;
                }, this.changeDefer);
            }
        },
        isListening: !1,
        hashChangeInterval: null,
        startListening: function() {
            this.map.on("moveend", this.onMapMove, this), HAS_HASHCHANGE ? L.DomEvent.addListener(window, "hashchange", this.onHashChange) : (clearInterval(this.hashChangeInterval), 
            this.hashChangeInterval = setInterval(this.onHashChange, 500)), this.isListening = !0;
        },
        stopListening: function() {
            this.map.off("moveend", this.onMapMove, this), HAS_HASHCHANGE ? L.DomEvent.removeListener(window, "hashchange", this.onHashChange) : clearInterval(this.hashChangeInterval), 
            this.isListening = !1;
        }
    }, L.hash = function(map) {
        return new L.Hash(map);
    }, L.Map.prototype.addHash = function() {
        this._hash = L.hash(this);
    }, L.Map.prototype.removeHash = function() {
        this._hash.removeFrom();
    };
}(window), function(window, undefined) {
    L.Util.ajax = function(url, success, error) {
        window.XMLHttpRequest === undefined && (window.XMLHttpRequest = function() {
            try {
                return new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                throw Error("XMLHttpRequest is not supported");
            }
        });
        var response, request = new XMLHttpRequest();
        return request.open("GET", url), request.onreadystatechange = function() {
            4 === request.readyState && (200 === request.status ? (response = window.JSON ? JSON.parse(request.responseText) : eval("(" + request.responseText + ")"), 
            success(response)) : 0 !== request.status && error !== undefined && error(request.status));
        }, request.ontimeout = function() {
            error("timeout");
        }, request.send(), request;
    }, L.UtfGrid = (L.Layer || L.Class).extend({
        includes: L.Mixin.Events,
        options: {
            subdomains: "abc",
            minZoom: 0,
            maxZoom: 18,
            tileSize: 256,
            resolution: 4,
            useJsonP: !0,
            pointerCursor: !0,
            maxRequests: 4,
            requestTimeout: 6e4
        },
        _mouseOn: null,
        initialize: function(e, t) {
            L.Util.setOptions(this, t), this._requests = {}, this._request_queue = [], this._requests_in_process = [], 
            this._url = e, this._cache = {};
            for (var n = 0; window["lu" + n]; ) n++;
            this._windowKey = "lu" + n, window[this._windowKey] = {};
            var r = this.options.subdomains;
            "string" == typeof this.options.subdomains && (this.options.subdomains = r.split(""));
        },
        onAdd: function(e) {
            this._map = e, this._container = this._map._container, this._update();
            var t = this._map.getZoom();
            t > this.options.maxZoom || t < this.options.minZoom || (e.on("click", this._click, this), 
            e.on("mousemove", this._move, this), e.on("moveend", this._update, this));
        },
        onRemove: function() {
            var e = this._map;
            e.off("click", this._click, this), e.off("mousemove", this._move, this), e.off("moveend", this._update, this), 
            this.options.pointerCursor && (this._container.style.cursor = "");
        },
        setUrl: function(e, t) {
            return this._url = e, t || this.redraw(), this;
        },
        redraw: function() {
            this._request_queue = [];
            for (var e in this._requests) this._requests.hasOwnProperty(e) && this._abort_request(e);
            this._cache = {}, this._update();
        },
        _click: function(e) {
            this.fire("click", this._objectForEvent(e));
        },
        _move: function(e) {
            var t = this._objectForEvent(e);
            t.data !== this._mouseOn ? (this._mouseOn && (this.fire("mouseout", {
                latlng: e.latlng,
                data: this._mouseOn
            }), this.options.pointerCursor && (this._container.style.cursor = "")), t.data && (this.fire("mouseover", t), 
            this.options.pointerCursor && (this._container.style.cursor = "pointer")), this._mouseOn = t.data) : t.data && this.fire("mousemove", t);
        },
        _objectForEvent: function(e) {
            var t = this._map, n = t.project(e.latlng), r = this.options.tileSize, i = this.options.resolution, s = Math.floor(n.x / r), o = Math.floor(n.y / r), u = Math.floor((n.x - s * r) / i), a = Math.floor((n.y - o * r) / i), f = t.options.crs.scale(t.getZoom()) / r;
            s = (s + f) % f, o = (o + f) % f;
            var l = this._cache[t.getZoom() + "_" + s + "_" + o], c = null;
            if (l && l.grid) {
                var h = this._utfDecode(l.grid[a].charCodeAt(u)), p = l.keys[h];
                l.data.hasOwnProperty(p) && (c = l.data[p]);
            }
            return L.extend({
                latlng: e.latlng,
                data: c
            }, e);
        },
        _update: function() {
            var e = this._map.getPixelBounds(), t = this._map.getZoom(), n = this.options.tileSize;
            if (!(t > this.options.maxZoom || t < this.options.minZoom)) {
                for (var r = new L.Point(Math.floor(e.min.x / n), Math.floor(e.min.y / n)), i = new L.Point(Math.floor(e.max.x / n), Math.floor(e.max.y / n)), s = this._map.options.crs.scale(t) / n, o = [], u = r.x; u <= i.x; u++) for (var a = r.y; a <= i.y; a++) {
                    var f = (u + s) % s, l = (a + s) % s, c = t + "_" + f + "_" + l;
                    o.push(c), this._cache.hasOwnProperty(c) || (this._cache[c] = null, this.options.useJsonP ? this._loadTileP(t, f, l) : this._loadTile(t, f, l));
                }
                for (var h in this._requests) o.indexOf(h) < 0 && this._abort_request(h);
            }
        },
        _loadTileP: function(e, t, n) {
            var r = document.getElementsByTagName("head")[0], i = e + "_" + t + "_" + n, s = "lu_" + i, o = this._windowKey, u = this, a = L.Util.template(this._url, L.Util.extend({
                s: L.TileLayer.prototype._getSubdomain.call(this, {
                    x: t,
                    y: n
                }),
                z: e,
                x: t,
                y: n,
                cb: o + "." + s
            }, this.options)), f = document.createElement("script");
            f.setAttribute("type", "text/javascript"), f.setAttribute("src", a), window[o][s] = function(e) {
                u._cache[i] = e, delete window[o][s], r.removeChild(f), u._finish_request(i);
            }, this._queue_request(i, a, function() {
                return r.appendChild(f), {
                    abort: function() {
                        r.removeChild(f);
                    }
                };
            });
        },
        _loadTile: function(e, t, n) {
            var r = L.Util.template(this._url, L.Util.extend({
                s: L.TileLayer.prototype._getSubdomain.call(this, {
                    x: t,
                    y: n
                }),
                z: e,
                x: t,
                y: n
            }, this.options)), i = e + "_" + t + "_" + n;
            this._queue_request(i, r, this._ajaxRequestFactory(i, r));
        },
        _ajaxRequestFactory: function(e, t) {
            var n = this._successCallbackFactory(e), r = this._errorCallbackFactory(t);
            return function() {
                var e = L.Util.ajax(t, n, r);
                return e.timeout = this.options.requestTimeout, e;
            }.bind(this);
        },
        _successCallbackFactory: function(e) {
            return function(t) {
                this._cache[e] = t, this._finish_request(e);
            }.bind(this);
        },
        _errorCallbackFactory: function(e) {
            return function(t) {
                this.fire("tileerror", {
                    url: e,
                    code: t
                });
            }.bind(this);
        },
        _queue_request: function(e, t, n) {
            this._requests[e] = {
                callback: n,
                timeout: null,
                handler: null,
                url: t
            }, this._request_queue.push(e), this._process_queued_requests();
        },
        _finish_request: function(e) {
            var t = this._requests_in_process.indexOf(e);
            t >= 0 && this._requests_in_process.splice(t, 1), t = this._request_queue.indexOf(e), 
            t >= 0 && this._request_queue.splice(t, 1), this._requests[e] && (this._requests[e].timeout && window.clearTimeout(this._requests[e].timeout), 
            delete this._requests[e]), this._process_queued_requests(), 0 === this._requests_in_process.length && this.fire("load");
        },
        _abort_request: function(e) {
            this._requests[e] && this._requests[e].handler && "function" == typeof this._requests[e].handler.abort && this._requests[e].handler.abort(), 
            null === this._cache[e] && delete this._cache[e], this._finish_request(e);
        },
        _process_queued_requests: function() {
            for (;this._request_queue.length > 0 && (0 === this.options.maxRequests || this._requests_in_process.length < this.options.maxRequests); ) this._process_request(this._request_queue.pop());
        },
        _process_request: function(e) {
            this._requests_in_process.push(e);
            var t = this._requests[e].callback();
            if (this._requests[e] && (this._requests[e].handler = t, t.timeout === undefined)) {
                var n = this._timeoutCallbackFactory(e);
                this._requests[e].timeout = window.setTimeout(n, this.options.requestTimeout);
            }
        },
        _timeoutCallbackFactory: function(e) {
            var t = this._requests[e].url;
            return function() {
                this.fire("tileerror", {
                    url: t,
                    code: "timeout"
                }), this._abort_request(e);
            }.bind(this);
        },
        _utfDecode: function(e) {
            return e >= 93 && e--, e >= 35 && e--, e - 32;
        }
    }), L.utfGrid = function(e, t) {
        return new L.UtfGrid(e, t);
    };
}(window), L.Rrose = L.Popup.extend({
    _initLayout: function() {
        var closeButton, wrapper, prefix = "leaflet-rrose", container = this._container = L.DomUtil.create("div", prefix + " " + this.options.className + " leaflet-zoom-animated");
        this.options.closeButton && (closeButton = this._closeButton = L.DomUtil.create("a", prefix + "-close-button", container), 
        closeButton.href = "#close", closeButton.innerHTML = "&#215;", L.DomEvent.on(closeButton, "click", this._onCloseButtonClick, this));
        var x_bound = this.options.x_bound || 80, y_bound = this.options.y_bound || 80;
        this.options.position = "n";
        var y_diff = y_bound - this._map.latLngToContainerPoint(this._latlng).y;
        y_diff > 0 && (this.options.position = "s");
        var x_diff = this._map.latLngToContainerPoint(this._latlng).x - (this._map.getSize().x - x_bound);
        x_diff > 0 ? this.options.position += "w" : (x_diff = x_bound - this._map.latLngToContainerPoint(this._latlng).x, 
        x_diff > 0 && (this.options.position += "e")), /s/.test(this.options.position) ? ("s" === this.options.position ? (this._tipContainer = L.DomUtil.create("div", prefix + "-tip-container", container), 
        wrapper = this._wrapper = L.DomUtil.create("div", prefix + "-content-wrapper", container)) : (this._tipContainer = L.DomUtil.create("div", prefix + "-tip-container " + prefix + "-tip-container-" + this.options.position, container), 
        wrapper = this._wrapper = L.DomUtil.create("div", prefix + "-content-wrapper " + prefix + "-content-wrapper-" + this.options.position, container)), 
        this._tip = L.DomUtil.create("div", prefix + "-tip " + prefix + "-tip-" + this.options.position, this._tipContainer), 
        L.DomEvent.disableClickPropagation(wrapper), this._contentNode = L.DomUtil.create("div", prefix + "-content", wrapper), 
        L.DomEvent.on(this._contentNode, "mousewheel", L.DomEvent.stopPropagation)) : ("n" === this.options.position ? (wrapper = this._wrapper = L.DomUtil.create("div", prefix + "-content-wrapper", container), 
        this._tipContainer = L.DomUtil.create("div", prefix + "-tip-container", container)) : (wrapper = this._wrapper = L.DomUtil.create("div", prefix + "-content-wrapper " + prefix + "-content-wrapper-" + this.options.position, container), 
        this._tipContainer = L.DomUtil.create("div", prefix + "-tip-container " + prefix + "-tip-container-" + this.options.position, container)), 
        L.DomEvent.disableClickPropagation(wrapper), this._contentNode = L.DomUtil.create("div", prefix + "-content", wrapper), 
        L.DomEvent.on(this._contentNode, "mousewheel", L.DomEvent.stopPropagation), this._tip = L.DomUtil.create("div", prefix + "-tip " + prefix + "-tip-" + this.options.position, this._tipContainer));
    },
    _updatePosition: function() {
        var pos = this._map.latLngToLayerPoint(this._latlng), is3d = L.Browser.any3d, offset = this.options.offset;
        is3d && L.DomUtil.setPosition(this._container, pos), /s/.test(this.options.position) ? this._containerBottom = -this._container.offsetHeight + offset.y - (is3d ? 0 : pos.y) : this._containerBottom = -offset.y - (is3d ? 0 : pos.y), 
        /e/.test(this.options.position) ? this._containerLeft = offset.x + (is3d ? 0 : pos.x) : /w/.test(this.options.position) ? this._containerLeft = -Math.round(this._containerWidth) + offset.x + (is3d ? 0 : pos.x) : this._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (is3d ? 0 : pos.x), 
        this._container.style.bottom = this._containerBottom + "px", this._container.style.left = this._containerLeft + "px";
    }
}), function() {
    function a(a) {
        this._value = a;
    }
    function b(a, b, c, d) {
        var e, f, g = Math.pow(10, b);
        return f = (c(a * g) / g).toFixed(b), d && (e = new RegExp("0{1," + d + "}$"), f = f.replace(e, "")), 
        f;
    }
    function c(a, b, c) {
        var d;
        return d = b.indexOf("$") > -1 ? e(a, b, c) : b.indexOf("%") > -1 ? f(a, b, c) : b.indexOf(":") > -1 ? g(a, b) : i(a._value, b, c);
    }
    function d(a, b) {
        var c, d, e, f, g, i = b, j = [ "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" ], k = !1;
        if (b.indexOf(":") > -1) a._value = h(b); else if (b === q) a._value = 0; else {
            for ("." !== o[p].delimiters.decimal && (b = b.replace(/\./g, "").replace(o[p].delimiters.decimal, ".")), 
            c = new RegExp("[^a-zA-Z]" + o[p].abbreviations.thousand + "(?:\\)|(\\" + o[p].currency.symbol + ")?(?:\\))?)?$"), 
            d = new RegExp("[^a-zA-Z]" + o[p].abbreviations.million + "(?:\\)|(\\" + o[p].currency.symbol + ")?(?:\\))?)?$"), 
            e = new RegExp("[^a-zA-Z]" + o[p].abbreviations.billion + "(?:\\)|(\\" + o[p].currency.symbol + ")?(?:\\))?)?$"), 
            f = new RegExp("[^a-zA-Z]" + o[p].abbreviations.trillion + "(?:\\)|(\\" + o[p].currency.symbol + ")?(?:\\))?)?$"), 
            g = 0; g <= j.length && !(k = b.indexOf(j[g]) > -1 ? Math.pow(1024, g + 1) : !1); g++) ;
            a._value = (k ? k : 1) * (i.match(c) ? Math.pow(10, 3) : 1) * (i.match(d) ? Math.pow(10, 6) : 1) * (i.match(e) ? Math.pow(10, 9) : 1) * (i.match(f) ? Math.pow(10, 12) : 1) * (b.indexOf("%") > -1 ? .01 : 1) * ((b.split("-").length + Math.min(b.split("(").length - 1, b.split(")").length - 1)) % 2 ? 1 : -1) * Number(b.replace(/[^0-9\.]+/g, "")), 
            a._value = k ? Math.ceil(a._value) : a._value;
        }
        return a._value;
    }
    function e(a, b, c) {
        var d, e, f = b.indexOf("$"), g = b.indexOf("("), h = b.indexOf("-"), j = "";
        return b.indexOf(" $") > -1 ? (j = " ", b = b.replace(" $", "")) : b.indexOf("$ ") > -1 ? (j = " ", 
        b = b.replace("$ ", "")) : b = b.replace("$", ""), e = i(a._value, b, c), 1 >= f ? e.indexOf("(") > -1 || e.indexOf("-") > -1 ? (e = e.split(""), 
        d = 1, (g > f || h > f) && (d = 0), e.splice(d, 0, o[p].currency.symbol + j), e = e.join("")) : e = o[p].currency.symbol + j + e : e.indexOf(")") > -1 ? (e = e.split(""), 
        e.splice(-1, 0, j + o[p].currency.symbol), e = e.join("")) : e = e + j + o[p].currency.symbol, 
        e;
    }
    function f(a, b, c) {
        var d, e = "", f = 100 * a._value;
        return b.indexOf(" %") > -1 ? (e = " ", b = b.replace(" %", "")) : b = b.replace("%", ""), 
        d = i(f, b, c), d.indexOf(")") > -1 ? (d = d.split(""), d.splice(-1, 0, e + "%"), 
        d = d.join("")) : d = d + e + "%", d;
    }
    function g(a) {
        var b = Math.floor(a._value / 60 / 60), c = Math.floor((a._value - 60 * b * 60) / 60), d = Math.round(a._value - 60 * b * 60 - 60 * c);
        return b + ":" + (10 > c ? "0" + c : c) + ":" + (10 > d ? "0" + d : d);
    }
    function h(a) {
        var b = a.split(":"), c = 0;
        return 3 === b.length ? (c += 60 * Number(b[0]) * 60, c += 60 * Number(b[1]), c += Number(b[2])) : 2 === b.length && (c += 60 * Number(b[0]), 
        c += Number(b[1])), Number(c);
    }
    function i(a, c, d) {
        var e, f, g, h, i, j, k = !1, l = !1, m = !1, n = "", r = !1, s = !1, t = !1, u = !1, v = !1, w = "", x = "", y = Math.abs(a), z = [ "B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" ], A = "", B = !1;
        if (0 === a && null !== q) return q;
        if (c.indexOf("(") > -1 ? (k = !0, c = c.slice(1, -1)) : c.indexOf("+") > -1 && (l = !0, 
        c = c.replace(/\+/g, "")), c.indexOf("a") > -1 && (r = c.indexOf("aK") >= 0, s = c.indexOf("aM") >= 0, 
        t = c.indexOf("aB") >= 0, u = c.indexOf("aT") >= 0, v = r || s || t || u, c.indexOf(" a") > -1 ? (n = " ", 
        c = c.replace(" a", "")) : c = c.replace("a", ""), y >= Math.pow(10, 12) && !v || u ? (n += o[p].abbreviations.trillion, 
        a /= Math.pow(10, 12)) : y < Math.pow(10, 12) && y >= Math.pow(10, 9) && !v || t ? (n += o[p].abbreviations.billion, 
        a /= Math.pow(10, 9)) : y < Math.pow(10, 9) && y >= Math.pow(10, 6) && !v || s ? (n += o[p].abbreviations.million, 
        a /= Math.pow(10, 6)) : (y < Math.pow(10, 6) && y >= Math.pow(10, 3) && !v || r) && (n += o[p].abbreviations.thousand, 
        a /= Math.pow(10, 3))), c.indexOf("b") > -1) for (c.indexOf(" b") > -1 ? (w = " ", 
        c = c.replace(" b", "")) : c = c.replace("b", ""), g = 0; g <= z.length; g++) if (e = Math.pow(1024, g), 
        f = Math.pow(1024, g + 1), a >= e && f > a) {
            w += z[g], e > 0 && (a /= e);
            break;
        }
        return c.indexOf("o") > -1 && (c.indexOf(" o") > -1 ? (x = " ", c = c.replace(" o", "")) : c = c.replace("o", ""), 
        x += o[p].ordinal(a)), c.indexOf("[.]") > -1 && (m = !0, c = c.replace("[.]", ".")), 
        h = a.toString().split(".")[0], i = c.split(".")[1], j = c.indexOf(","), i ? (i.indexOf("[") > -1 ? (i = i.replace("]", ""), 
        i = i.split("["), A = b(a, i[0].length + i[1].length, d, i[1].length)) : A = b(a, i.length, d), 
        h = A.split(".")[0], A = A.split(".")[1].length ? o[p].delimiters.decimal + A.split(".")[1] : "", 
        m && 0 === Number(A.slice(1)) && (A = "")) : h = b(a, null, d), h.indexOf("-") > -1 && (h = h.slice(1), 
        B = !0), j > -1 && (h = h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + o[p].delimiters.thousands)), 
        0 === c.indexOf(".") && (h = ""), (k && B ? "(" : "") + (!k && B ? "-" : "") + (!B && l ? "+" : "") + h + A + (x ? x : "") + (n ? n : "") + (w ? w : "") + (k && B ? ")" : "");
    }
    function j(a, b) {
        o[a] = b;
    }
    function k(a) {
        var b = a.toString().split(".");
        return b.length < 2 ? 1 : Math.pow(10, b[1].length);
    }
    function l() {
        var a = Array.prototype.slice.call(arguments);
        return a.reduce(function(a, b) {
            var c = k(a), d = k(b);
            return c > d ? c : d;
        }, -1 / 0);
    }
    var m, n = "1.5.3", o = {}, p = "en", q = null, r = "0,0", s = "undefined" != typeof module && module.exports;
    m = function(b) {
        return m.isNumeral(b) ? b = b.value() : 0 === b || "undefined" == typeof b ? b = 0 : Number(b) || (b = m.fn.unformat(b)), 
        new a(Number(b));
    }, m.version = n, m.isNumeral = function(b) {
        return b instanceof a;
    }, m.language = function(a, b) {
        if (!a) return p;
        if (a && !b) {
            if (!o[a]) throw new Error("Unknown language : " + a);
            p = a;
        }
        return (b || !o[a]) && j(a, b), m;
    }, m.languageData = function(a) {
        if (!a) return o[p];
        if (!o[a]) throw new Error("Unknown language : " + a);
        return o[a];
    }, m.language("en", {
        delimiters: {
            thousands: ",",
            decimal: "."
        },
        abbreviations: {
            thousand: "k",
            million: "m",
            billion: "b",
            trillion: "t"
        },
        ordinal: function(a) {
            var b = a % 10;
            return 1 === ~~(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th";
        },
        currency: {
            symbol: "$"
        }
    }), m.zeroFormat = function(a) {
        q = "string" == typeof a ? a : null;
    }, m.defaultFormat = function(a) {
        r = "string" == typeof a ? a : "0.0";
    }, "function" != typeof Array.prototype.reduce && (Array.prototype.reduce = function(a, b) {
        "use strict";
        if (null === this || "undefined" == typeof this) throw new TypeError("Array.prototype.reduce called on null or undefined");
        if ("function" != typeof a) throw new TypeError(a + " is not a function");
        var c, d, e = this.length >>> 0, f = !1;
        for (1 < arguments.length && (d = b, f = !0), c = 0; e > c; ++c) this.hasOwnProperty(c) && (f ? d = a(d, this[c], c, this) : (d = this[c], 
        f = !0));
        if (!f) throw new TypeError("Reduce of empty array with no initial value");
        return d;
    }), m.fn = a.prototype = {
        clone: function() {
            return m(this);
        },
        format: function(a, b) {
            return c(this, a ? a : r, void 0 !== b ? b : Math.round);
        },
        unformat: function(a) {
            return "[object Number]" === Object.prototype.toString.call(a) ? a : d(this, a ? a : r);
        },
        value: function() {
            return this._value;
        },
        valueOf: function() {
            return this._value;
        },
        set: function(a) {
            return this._value = Number(a), this;
        },
        add: function(a) {
            function b(a, b) {
                return a + c * b;
            }
            var c = l.call(null, this._value, a);
            return this._value = [ this._value, a ].reduce(b, 0) / c, this;
        },
        subtract: function(a) {
            function b(a, b) {
                return a - c * b;
            }
            var c = l.call(null, this._value, a);
            return this._value = [ a ].reduce(b, this._value * c) / c, this;
        },
        multiply: function(a) {
            function b(a, b) {
                var c = l(a, b);
                return a * c * b * c / (c * c);
            }
            return this._value = [ this._value, a ].reduce(b, 1), this;
        },
        divide: function(a) {
            function b(a, b) {
                var c = l(a, b);
                return a * c / (b * c);
            }
            return this._value = [ this._value, a ].reduce(b), this;
        },
        difference: function(a) {
            return Math.abs(m(this._value).subtract(a).value());
        }
    }, s && (module.exports = m), "undefined" == typeof ender && (this.numeral = m), 
    "function" == typeof define && define.amd && define([], function() {
        return m;
    });
}.call(this), function(factory, window) {
    "function" == typeof define && define.amd ? define([ "leaflet" ], factory) : "object" == typeof exports && (module.exports = factory(require("leaflet"))), 
    "undefined" != typeof window && window.L && (window.L.Control.MiniMap = factory(L), 
    window.L.control.minimap = function(layer, options) {
        return new window.L.Control.MiniMap(layer, options);
    });
}(function(L) {
    var MiniMap = L.Control.extend({
        options: {
            position: "bottomright",
            toggleDisplay: !1,
            zoomLevelOffset: -5,
            zoomLevelFixed: !1,
            zoomAnimation: !1,
            autoToggleDisplay: !1,
            width: 150,
            height: 150,
            collapsedWidth: 19,
            collapsedHeight: 19,
            aimingRectOptions: {
                color: "#ff7800",
                weight: 1,
                clickable: !1
            },
            shadowRectOptions: {
                color: "#000000",
                weight: 1,
                clickable: !1,
                opacity: 0,
                fillOpacity: 0
            },
            strings: {
                hideText: "Hide MiniMap",
                showText: "Show MiniMap"
            }
        },
        initialize: function(layer, options) {
            L.Util.setOptions(this, options), this.options.aimingRectOptions.clickable = !1, 
            this.options.shadowRectOptions.clickable = !1, this._layer = layer;
        },
        onAdd: function(map) {
            return this._mainMap = map, this._container = L.DomUtil.create("div", "leaflet-control-minimap"), 
            this._container.style.width = this.options.width + "px", this._container.style.height = this.options.height + "px", 
            L.DomEvent.disableClickPropagation(this._container), L.DomEvent.on(this._container, "mousewheel", L.DomEvent.stopPropagation), 
            this._miniMap = new L.Map(this._container, {
                attributionControl: !1,
                zoomControl: !1,
                zoomAnimation: this.options.zoomAnimation,
                autoToggleDisplay: this.options.autoToggleDisplay,
                touchZoom: !this._isZoomLevelFixed(),
                scrollWheelZoom: !this._isZoomLevelFixed(),
                doubleClickZoom: !this._isZoomLevelFixed(),
                boxZoom: !this._isZoomLevelFixed(),
                crs: map.options.crs
            }), this._miniMap.addLayer(this._layer), this._mainMapMoving = !1, this._miniMapMoving = !1, 
            this._userToggledDisplay = !1, this._minimized = !1, this.options.toggleDisplay && this._addToggleButton(), 
            this._miniMap.whenReady(L.Util.bind(function() {
                this._aimingRect = L.rectangle(this._mainMap.getBounds(), this.options.aimingRectOptions).addTo(this._miniMap), 
                this._shadowRect = L.rectangle(this._mainMap.getBounds(), this.options.shadowRectOptions).addTo(this._miniMap), 
                this._mainMap.on("moveend", this._onMainMapMoved, this), this._mainMap.on("move", this._onMainMapMoving, this), 
                this._miniMap.on("movestart", this._onMiniMapMoveStarted, this), this._miniMap.on("move", this._onMiniMapMoving, this), 
                this._miniMap.on("moveend", this._onMiniMapMoved, this);
            }, this)), this._container;
        },
        addTo: function(map) {
            return L.Control.prototype.addTo.call(this, map), this._miniMap.setView(this._mainMap.getCenter(), this._decideZoom(!0)), 
            this._setDisplay(this._decideMinimized()), this;
        },
        onRemove: function(map) {
            this._mainMap.off("moveend", this._onMainMapMoved, this), this._mainMap.off("move", this._onMainMapMoving, this), 
            this._miniMap.off("moveend", this._onMiniMapMoved, this), this._miniMap.removeLayer(this._layer);
        },
        changeLayer: function(layer) {
            this._miniMap.removeLayer(this._layer), this._layer = layer, this._miniMap.addLayer(this._layer);
        },
        _addToggleButton: function() {
            this._toggleDisplayButton = this.options.toggleDisplay ? this._createButton("", this.options.strings.hideText, "leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-" + this.options.position, this._container, this._toggleDisplayButtonClicked, this) : void 0, 
            this._toggleDisplayButton.style.width = this.options.collapsedWidth + "px", this._toggleDisplayButton.style.height = this.options.collapsedHeight + "px";
        },
        _createButton: function(html, title, className, container, fn, context) {
            var link = L.DomUtil.create("a", className, container);
            link.innerHTML = html, link.href = "#", link.title = title;
            var stop = L.DomEvent.stopPropagation;
            return L.DomEvent.on(link, "click", stop).on(link, "mousedown", stop).on(link, "dblclick", stop).on(link, "click", L.DomEvent.preventDefault).on(link, "click", fn, context), 
            link;
        },
        _toggleDisplayButtonClicked: function() {
            this._userToggledDisplay = !0, this._minimized ? (this._restore(), this._toggleDisplayButton.title = this.options.strings.hideText) : (this._minimize(), 
            this._toggleDisplayButton.title = this.options.strings.showText);
        },
        _setDisplay: function(minimize) {
            minimize != this._minimized && (this._minimized ? this._restore() : this._minimize());
        },
        _minimize: function() {
            this.options.toggleDisplay ? (this._container.style.width = this.options.collapsedWidth + "px", 
            this._container.style.height = this.options.collapsedHeight + "px", this._toggleDisplayButton.className += " minimized-" + this.options.position) : this._container.style.display = "none", 
            this._minimized = !0;
        },
        _restore: function() {
            this.options.toggleDisplay ? (this._container.style.width = this.options.width + "px", 
            this._container.style.height = this.options.height + "px", this._toggleDisplayButton.className = this._toggleDisplayButton.className.replace("minimized-" + this.options.position, "")) : this._container.style.display = "block", 
            this._minimized = !1;
        },
        _onMainMapMoved: function(e) {
            this._miniMapMoving ? this._miniMapMoving = !1 : (this._mainMapMoving = !0, this._miniMap.setView(this._mainMap.getCenter(), this._decideZoom(!0)), 
            this._setDisplay(this._decideMinimized())), this._aimingRect.setBounds(this._mainMap.getBounds());
        },
        _onMainMapMoving: function(e) {
            this._aimingRect.setBounds(this._mainMap.getBounds());
        },
        _onMiniMapMoveStarted: function(e) {
            var lastAimingRect = this._aimingRect.getBounds(), sw = this._miniMap.latLngToContainerPoint(lastAimingRect.getSouthWest()), ne = this._miniMap.latLngToContainerPoint(lastAimingRect.getNorthEast());
            this._lastAimingRectPosition = {
                sw: sw,
                ne: ne
            };
        },
        _onMiniMapMoving: function(e) {
            !this._mainMapMoving && this._lastAimingRectPosition && (this._shadowRect.setBounds(new L.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw), this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))), 
            this._shadowRect.setStyle({
                opacity: 1,
                fillOpacity: .3
            }));
        },
        _onMiniMapMoved: function(e) {
            this._mainMapMoving ? this._mainMapMoving = !1 : (this._miniMapMoving = !0, this._mainMap.setView(this._miniMap.getCenter(), this._decideZoom(!1)), 
            this._shadowRect.setStyle({
                opacity: 0,
                fillOpacity: 0
            }));
        },
        _isZoomLevelFixed: function() {
            var zoomLevelFixed = this.options.zoomLevelFixed;
            return this._isDefined(zoomLevelFixed) && this._isInteger(zoomLevelFixed);
        },
        _decideZoom: function(fromMaintoMini) {
            if (this._isZoomLevelFixed()) return fromMaintoMini ? this.options.zoomLevelFixed : this._mainMap.getZoom();
            if (fromMaintoMini) return this._mainMap.getZoom() + this.options.zoomLevelOffset;
            var toRet, currentDiff = this._miniMap.getZoom() - this._mainMap.getZoom(), proposedZoom = this._miniMap.getZoom() - this.options.zoomLevelOffset;
            return currentDiff > this.options.zoomLevelOffset && this._mainMap.getZoom() < this._miniMap.getMinZoom() - this.options.zoomLevelOffset ? this._miniMap.getZoom() > this._lastMiniMapZoom ? (toRet = this._mainMap.getZoom() + 1, 
            this._miniMap.setZoom(this._miniMap.getZoom() - 1)) : toRet = this._mainMap.getZoom() : toRet = proposedZoom, 
            this._lastMiniMapZoom = this._miniMap.getZoom(), toRet;
        },
        _decideMinimized: function() {
            return this._userToggledDisplay ? this._minimized : this.options.autoToggleDisplay ? this._mainMap.getBounds().contains(this._miniMap.getBounds()) ? !0 : !1 : this._minimized;
        },
        _isInteger: function(value) {
            return "number" == typeof value;
        },
        _isDefined: function(value) {
            return "undefined" != typeof value;
        }
    });
    return L.Map.mergeOptions({
        miniMapControl: !1
    }), L.Map.addInitHook(function() {
        this.options.miniMapControl && (this.miniMapControl = new MiniMap().addTo(this));
    }), MiniMap;
}, window);
//# sourceMappingURL=map-vendor.min.js.map